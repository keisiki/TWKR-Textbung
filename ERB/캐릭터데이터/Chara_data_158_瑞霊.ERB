@CHARAMOVE_DATA_158(ARG, ARG:2)
LOCAL = 158
SELECTCASE ARG
	;連動設定（RETURN=依存するキャラ, RESULT:1～3=対等に連動するキャラ）
	CASE 1
	;特殊生活時間設定（CFLAG:LOCAL:生活時間補正を設定する）
	CASE 3
	;移動傾向（±～10=行きやすい/行きにくい, -100=行かない）
	CASE 4
		SELECTCASE ARG:2
			;Why would she return to the place she broke out of?
			CASE P901지령전앞 TO P948수혈의바닥
				RETURN -100
			;Not gonna return to the scenes of her crimes (Myouren Temple, SDM, Eientei, Mokou's House, Hakugyokurou, areas Nitori and Hina frequent, Moriya Shrine)
			CASE P101산문 TO P140지장길, P301정문 TO P348안개의호수・바닥, P401영원정입구 TO P430지하실, P445모코우의집, P621백옥루정원 TO P629사이교, P703현무의늪 TO P706액신의집, P811경내 TO P826복도
				RETURN -100
			;Not likely to confront Reimu directly, but might taunt her if she thinks she can get away with it
			CASE P1토리이 TO P56아운의거처
				RETURN -10
			;Interested in seeing what other food the surface has
			CASE P211술집, P212카페, P216식료품가게 TO P218일품요릿집
				RETURN 5
		ENDSELECT
	;出現場所
	CASE 7
		SELECTCASE ARG:2
			;Restaurant district
			CASE 술집소로
				RETURN 1
			;Possessing Marisa and stealing her magic items would help her get revenge
			CASE 키리사메마법점
				RETURN 1
			;Might try to recruit other disgruntled spirits
			CASE 축생계, 영장원
				RETURN 1
		ENDSELECT
	;引力設定（CFLAG:LOCAL:引力点を設定する）
	CASE 8
ENDSELECT

@EXIST_캐릭터데이터158
#LOCALSIZE 1
#LOCALSSIZE 1

@캐릭터데이터158(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "통칭"
	CALLF MAKE_STR(V_NAME, "미즈치")
;여기서부터 의상 설정
CASE "오늘의 파자마"
	CALLF MAKE_STR(V_NAME, "파자마(바지) 세트")
CASE "평상복：치마"
	CALLF MAKE_INT(V_NAME, CLOTHES_ID("치마", "죄수 스커트"))
CASE "평상복：상반신윗도리2"
	CALLF MAKE_INT(V_NAME, CLOTHES_ID("상반신윗도리2", "죄수 저지"))

CASE "평상복：액세서리"
	CALLF MAKE_INT(V_NAME, CLOTHES_ID("액세서리", "수갑"))
CASE "고유 속옷 형용사"
	CALLF MAKE_STR(V_NAME, "흑백 줄무늬")
CASE "고유 하반신속옷명"
	CALLF MAKE_STR(V_NAME, "죄수 팬티")
CASE "고유 상반신속옷"
	CALLF MAKE_INT(V_NAME, 1)
CASE "고유 상반신속옷명"
	CALLF MAKE_STR(V_NAME, "칠흑의 캐미숄")
CASE "고유 속옷 착용 조건"
	CALLF MAKE_INT(V_NAME, 1)
CASE "고유 속옷 비쳐보이는(앞)"
	CALLF MAKE_INT(V_NAME, 1)
CASE "고유 속옷 비쳐보이는(뒤)"
	CALLF MAKE_INT(V_NAME, 1)
CASE "고유 속옷 옷감 두께"
	CALLF MAKE_INT(V_NAME, 1)

;요리 관련
CASE "요리：좋아하는 맛"
	CALLF MAKE_STR(V_NAME, "스파이스/고기 요리/일본풍/국물/짠/호화/품위있는/호쾌/매운/매운/매운/옥토끼풍/수수께끼 요리/")
CASE "요리：싫어하는 맛"
	CALLF MAKE_STR(V_NAME, "중화/단/푸짐/농후/검소/마계풍/마계풍/마계풍/텐구류/가벼운/담백/")
CASE "요리：조수 효과"
	CALLF MAKE_STR(V_NAME, "이상한/" * 2)
;선물 관련
CASE "감성：좋아함"
	CALLF MAKE_STR(V_NAME, "흑빛/요괴/무서움/지적/" + "유령/마법/어둠/레트로/혼돈/법구/전래의/" * 3 + "어둠의/기력(機力)의/" * 5 + "피에 굶주린/살의의/" * 10)
CASE "감성：싫어함"
	CALLF MAKE_STR(V_NAME, "미래/이계풍의/신령/" + "부적/신발/봉주(封呪)의/" * 3 + "요괴의/지령의/폐옥의/지저의/" * 5 + "무녀의/하쿠레이의/분노의/퇴마의/" * 10)
ENDSELECT

;-------------------------------------------------
;固有料理設定
;DISH_NAME          料理名
;RESULTS            料理の種類（경식/주식/디저트）
;CALL 재료설정("")  材料の指定。"범용"を入れると自動で汎用食材になる
;DISH_TASTE         味の設定
;DISH_COMMENT       （任意）一行コメント
;DISH_TIME          （任意）調理にかかる時間
;DISH_MAXLIMIT      （任意）料理の持続時間
;-------------------------------------------------
@SPECIAL_MENU_158
DISH_NAME = 복어 껍질의 간무침
RESULTS = 경식
CALL 재료설정("물고기")
DISH_TASTE = 일식/사각사각/차가운/자극적/단/
DISH_COMMENT = 장인의 솜씨로 손질한 복어 간과 껍질. 완벽한 내장 손질(身欠き)로 무해. …아마도.
RETURN 1

;********************************************************************************************
;キャラ別画像表示テンプレ IMAGE_I158_○○.ERB
;2020/11/07 画像表示修正パッチv2.0 版
;制作者		:画像修正パッチの人
;Licence	:ライセンスフリー(CC0)
;
;キャラ特有の表情やエフェクト画像を個別に表示できるようにしたもの。
;使用方法は ERB\ステータス表示関連\キャラ別画像表示 フォルダにある他キャラのファイルを参照してください。
;使用時は"XX"をキャラクター番号に全置換すること。
;********************************************************************************************
;IMAGE_I158_特殊服装(CHARA)-------------------------------------------------------------------
;キャラクター特有の服装表示条件
;エフェクトを共有する服装差分はこちらで指定する
;使用時注意点:
;	RESULTSに特殊服装を格納すること
;	書式は %服装%%特殊服装% 適宜"_"等入れること
;-------------------------------------------------------------------------------------------
@IMAGE_I158_特殊服装(CHARA)
#DIM CHARA
VARSET RESULTS

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF CHECK_NUDE(CHARA)
		;裸
		IF FLAG:스탠딩종류
			;顔絵
		ELSE
			;立ち絵
		ENDIF
	ELSE
		;服
		IF FLAG:스탠딩종류
			;顔絵
		ELSE
			;立ち絵
		ENDIF
	ENDIF
ELSE
	;通常画像
	IF CHECK_NUDE(CHARA)
		;裸
		IF FLAG:스탠딩종류
			;顔絵
		ELSE
			;立ち絵
		ENDIF
	ELSE
		;服
		IF CFLAG:CHARA:의상일시변경 == 55 || (CFLAG:CHARA:기본복장세트 == 55 && CFLAG:CHARA:의상일시변경==0)
			IF FLAG:스탠딩종류
				;顔絵
				RESULTS = _バニー
			ELSE
				;立ち絵
				RESULTS = _バニー
			ENDIF
		ENDIF
	ENDIF
ENDIF

;IMAGE_I158_体形(CHARA)-----------------------------------------------------------------------
;キャラクター特有の体形表示条件
;エフェクトを共有する体形差分はこちら
;服装を指定しても自動で表示されるので注意
;使用時注意点:
;	RESULTSに体形を格納すること
;	書式は %体形%%服装% 適宜"_"等入れること
;	"巨乳"は本編で実装済み %体形%巨乳%服装% で追記可能
;-------------------------------------------------------------------------------------------
@IMAGE_I158_体形(CHARA)
#DIM CHARA
VARSET RESULTS

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ENDIF

;IMAGE_I158_特殊表情(CHARA)--------------------------------------------------------------------
;キャラクター特有の表情表示条件
;時間停止中でも維持する表情はこちら
;使用時注意点:
;	RESULTS:0に表情を格納
;	RESULTS:1にマウスオーバー時の表情を格納すること
;	"通常","笑顔","분노","발정","수면"は本編で実装済み
;-------------------------------------------------------------------------------------------
@IMAGE_I158_特殊表情(CHARA)
#DIM CHARA
#DIM CLIMAX_EXHAUST ;gets stale after seeing it for a while, so spice it up a little

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
		IF FLAG:시간정지
			IF IN_HEAT(CHARA) && (CFLAG:CHARA:기정사실 && 합의_우후후) && !CHECK_NUDE(CHARA)
				RESULTS:1 = 発情通常
			ELSEIF CHECK_NUDE(CHARA)
				RESULTS:1 '= @"%RESULTS:0%TIMESTOP"
				SIF IN_HEAT(CHARA) && (CFLAG:CHARA:기정사실 && 합의_우후후)
					RESULTS:1 = 発情通常TIMESTOP
			ENDIF
		ELSEIF CFLAG:CHARA:수면 ;prevents overlapping status breaking the sprite
			RESULTS:0 = 睡眠
			RESULTS:1 = 睡眠
		;This check doesn't work, lame
		;Had to copy the checks here
		;ELSEIF RESULTS:0 == "애무" || RESULTS:0 == "性交"
		ELSE
			IF IN_HEAT(CHARA)
				IF !CHECK_NUDE(CHARA) && !IS_SEXING(CHARA) && (CFLAG:CHARA:기정사실 && 합의_우후후)
					RESULTS:1 = 発情通常
				ELSE
					SELECTCASE SELECTCOM
						CASE 0 TO 15
							RESULTS:0 = 発情
							RESULTS:1 '= @"発情愛撫{RAND:2}"
						CASE 60 TO 79, 317 TO 323
							RESULTS:0 = 発情
							RESULTS:1 = 発情性交
					ENDSELECT
				ENDIF
			ELSE
				SELECTCASE SELECTCOM
					CASE 0 TO 15
						RESULTS:0 '= @"愛撫{RAND:3}"
					CASE 60 TO 79, 317 TO 323
						RESULTS:0 '= @"性交{RAND:3}"
					CASE 313 TO 316
						IF CFLAG:CHARA:우후후
							RESULTS:0 = 愛撫
						ELSEIF MARK:CHARA:괘씸각인 == 3
							RESULTS:1 = 愛撫
						ENDIF
				ENDSELECT
			ENDIF
			IF NOWEX:TotalEX > 8 || NOWEX:시간정지TotalEX > 30 || MIN_ORGASM_STRENGTH(CHARA, 3)
				;This function triggers thrice
				;so CLIMAX_EXHAUST goes up by 3 every time this part is ran, what's even going on dude
				;numbers assigned to the CLIMAX_EXHAUST loop dont really have significant meaning to them
				SIF CLIMAX_EXHAUST < 6
					RESULTS:0 = 発情強絶頂
				CLIMAX_EXHAUST += RAND:8
				SIF CLIMAX_EXHAUST > 10
					CLIMAX_EXHAUST = 0
			ENDIF
		ENDIF
	ELSE
		;立ち絵
	ENDIF
ENDIF

;IMAGE_I158_特殊表情COM(CHARA, コマンド)-------------------------------------------------------
;直前のコマンドで変化するキャラクター特有の表情表示条件
;時間停止中は変化しない表情はこちら
;使用時注意点:
;	RESULTS:0に表情を格納
;	RESULTS:1にマウスオーバー時の表情を格納すること
;	"자위한다","애무","性交"は本編で実装済み
;-------------------------------------------------------------------------------------------
@IMAGE_I158_特殊表情COM(CHARA, コマンド)
#DIM CHARA
#DIM コマンド

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ENDIF

;IMAGE_I158_差分(CHARA)-----------------------------------------------------------------------
;キャラクター特有の差分表示条件
;裸やエフェクトを共有しない画像はこちら
;使用時注意点:
;	RESULTSに差分を格納すること
;	書式は {CHARA}%差分% 適宜"_"等入れること
;-------------------------------------------------------------------------------------------
@IMAGE_I158_差分(CHARA)
#DIM CHARA
VARSET RESULTS

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ENDIF

;IMAGE_I158_特殊照れ(CHARA)--------------------------------------------------------------------
;キャラクター特有の照れエフェクト表示条件
;使用時注意点:
;	RESULTSに特殊照れを格納すること
;	書式は %特殊照れ%照れ
;	"裸"は本編で実装済み %特殊照れ%裸照れ で追記可能
;-------------------------------------------------------------------------------------------
@IMAGE_I158_特殊照れ(CHARA)
#DIM CHARA
VARSET RESULTS

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ENDIF

;IMAGE_I158_特殊吐息(CHARA)--------------------------------------------------------------------
;キャラクター特有の吐息エフェクト表示条件
;使用時注意点:
;	RESULTSに特殊吐息を格納すること
;	書式は %特殊吐息%吐息
;	"裸"は本編で実装済み %特殊吐息%裸吐息 で追記可能
;-------------------------------------------------------------------------------------------
@IMAGE_I158_特殊吐息(CHARA)
#DIM CHARA
VARSET RESULTS

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ENDIF

;IMAGE_I158_特殊汗(CHARA)--------------------------------------------------------------------
;キャラクター特有の汗エフェクト表示条件
;使用時注意点:
;	RESULTSに特殊汗を格納すること
;	書式は %特殊汗%汗
;	"裸"は本編で実装済み %特殊汗%裸汗 で追記可能
;-------------------------------------------------------------------------------------------
@IMAGE_I158_特殊汗(CHARA)
#DIM CHARA
VARSET RESULTS

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ENDIF

;IMAGE_I158_特殊エフェクトチェック(CHAR, エフェクト)--------------------------------------------
;キャラクター特有のエフェクト判定  特殊エフェクトを直接指定したい場合に参照
;引数 "エフェクト" に固有のエフェクトが含まれるかを判定する
;例の通り、STRFINDを使用してください
;-------------------------------------------------------------------------------------------
@IMAGE_I158_特殊エフェクトチェック(CHARA, エフェクト)
#DIM CHARA
#DIMS エフェクト

IF CFLAG:CHARA:대체적용
	;差し替え画像
ELSE
	;通常画像
	;SIF STRFIND(エフェクト, "모유") != -1
	;	RETURN 1
	SIF STRFIND(エフェクト, "顔精液") != -1
		RETURN 1
	SIF STRFIND(エフェクト, "口精液") != -1
		RETURN 1
ENDIF

RETURN 0

;IMAGE_I158_特殊エフェクト(CHARA)--------------------------------------------------------------------
;キャラクター特有のエフェクト表示条件
;使用時注意点:
;	RESULTS配列に特殊エフェクトを格納
;	RETURNで追加するエフェクト数を返却すること
;-------------------------------------------------------------------------------------------
@IMAGE_I158_特殊エフェクト(CHARA)
#DIM CHARA
#DIM DYNAMIC エフェクト数 = 0
VARSET RESULTS

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
		IF CFLAG:CHARA:안면정액
			RESULTS:エフェクト数 = 顔精液
			エフェクト数 += 1
		ENDIF
		IF CFLAG:CHARA:구내정액
			RESULTS:エフェクト数 = 口精液
			エフェクト数 += 1
		ENDIF
	ELSE
		;立ち絵
	ENDIF
ENDIF

RETURN エフェクト数

;IMAGE_I158_自慰エフェクト(CHARA)--------------------------------------------------------------------
;キャラクター特有の自慰エフェクト表示条件
;使用時注意点:
;	RESULTS配列に自慰エフェクトを格納
;	RETURNで追加するエフェクト数を返却すること
;-------------------------------------------------------------------------------------------
@IMAGE_I158_自慰エフェクト(CHARA)
#DIM CHARA
#DIM DYNAMIC エフェクト数 = 0
VARSET RESULTS

IF CFLAG:CHARA:대체적용
	;差し替え画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ELSE
	;通常画像
	IF FLAG:스탠딩종류
		;顔絵
	ELSE
		;立ち絵
	ENDIF
ENDIF

RETURN エフェクト数
