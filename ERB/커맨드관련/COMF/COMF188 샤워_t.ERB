;-------------------------------------------------
;샤워
;특수 커맨드
;-------------------------------------------------
@COM188
;착탈의처리 장비시는 소스, 경험의 가산은 실시하지 않는다
TEQUIP:샤워 = !TEQUIP:샤워
;-------------------------------------------------
;COM별 FLAG의 설정
;-------------------------------------------------
;행위자
TCVAR:116 = PLAYER

RETURN 1
;-------------------------------------------------
;장착 계속의 처리
;-------------------------------------------------
@EQUIP_COM188(ARG)
;샤워 사용중

PRINTL ＜샤워 사용중＞

;-------------------------------------------------
;소스 추가 처리
;-------------------------------------------------
;소비 체력, 기력
DOWNBASE:ARG:체력 += 0
DOWNBASE:ARG:기력 += 10

SOURCE:ARG:공순 += 100
SOURCE:ARG:울굴 += 100
SOURCE:ARG:반감 += 50

;-------------------------------------------------
;특수소스처리
;-------------------------------------------------
;흡혈귀(유수 중(안)에서는 움직일 수 없기 때문에, 여러 가지 추가)
IF TALENT:ARG:흡혈귀
	SOURCE:ARG:공포 += 200
	SOURCE:ARG:굴종 += 200
	SOURCE:ARG:불결 += 500
	SOURCE:ARG:일탈 += 500
	SOURCE:ARG:반감 += 500
ENDIF

;동물귀의 경우(아무튼 기본 씻어지는 것은 혐과 해석)
IF TALENT:ARG:동물귀
	SOURCE:ARG:공포 += 100
	SOURCE:ARG:굴종 += 100
	SOURCE:ARG:일탈 += 500
	SOURCE:ARG:반감 += 500
ENDIF


;-------------------------------------------------
;더러움의 처리
;-------------------------------------------------
;샤워로 더러움은 항상 리셋
STAIN:ARG:구 = 0
STAIN:ARG:1 = 0
STAIN:ARG:2 = 2
STAIN:ARG:3 = 1
STAIN:ARG:4 = 8
STAIN:ARG:5 = 0
STAIN:ARG:6 = 0

;윤활을  1000줄인다
IF PALAM:ARG:윤활 > 1000
	PALAM:ARG:윤활 -= 1000
ELSE
	PALAM:ARG:윤활 = 0
ENDIF

RETURN 1

;-------------------------------------------------
;실행 판정
;-------------------------------------------------
@COM_ABLE188
;샤워 실행 판정
SIF !TFLAG:100
	RETURN 0
;일괄관리
SIF GLOBAL_COMABLE(188)
	RETURN RESULT
;해제는 언제라도 가능
SIF TEQUIP:32
	RETURN 1
;정지 중에는 불가
SIF FLAG:70 == 1
	RETURN 0
SIF !GETBIT (FLAG:풀장, 2) || !BATHROOM() && CFLAG:MASTER:현재위치 != OMANEKIBEYA()
	RETURN 0
;클리캡 사용중은 불가
SIF TEQUIP:11
	RETURN 0
;유두캡 사용중은 불가
SIF TEQUIP:16
	RETURN 0
;착유기 사용중은 불가
SIF TEQUIP:17
	RETURN 0
;유방 전극 장착중은 안 돼
SIF TEQUIP:24
	RETURN 0
;흡혈귀나 동물귀에는 순종 4가 없으면 사용 불가(플레이어가 새드라면 OK)
IF TALENT:흡혈귀 || TALENT:동물귀
SIF ABL:순종 < 4 && TALENT:PLAYER:새드 == 0
	RETURN 0
ENDIF
RETURN 1

