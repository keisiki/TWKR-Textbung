;-----------------------------------------------------------
;원거리 이동 설정
;ARG     목적지
;ARG:1   현위치
;RETURN  다음 목적지
;-----------------------------------------------------------
@SKIP_MOVE_3(ARG, ARG:1)
#DIM 현재의위치
;現在位置取得
IF ARG:1
	현재의위치 = ARG:1
ELSE
	현재의위치 = CFLAG:MASTER:현재위치
ENDIF

;目的地に直接移動できる場合そこに移動
SIF CAN_MOVE(현재의위치, ARG) & 1
	RETURN ARG

;袋小路から行ける場所は固定なので、そこを目指す
SELECTCASE 현재의위치
CASE P305헛간
	RETURN P306뒤뜰
CASE P311파츄리방, P312소악마방
	RETURN P310도서관
CASE P3161층화장실
	RETURN P309객실
CASE P320사쿠야방, P321빈방, P3222층화장실, P323메이드요정대기소, P324큰발코니
	RETURN P3192층복도
CASE P327작은발코니
	RETURN P326레밀리아방
CASE P329창고, P330고용인실, P331지하실
	RETURN P328지하복도
CASE P333대욕탕
	RETURN P332탈의실
CASE P337폐양관・부엌, P338폐양관・목욕탕
	RETURN P335폐양관・객실
CASE P340루나사방, P341메를랑방, P342리리카방
	RETURN P339폐양관・2층복도
CASE P344레티의움집, P345치르노의움집, P346대요정의거처
	RETURN P343호숫가
CASE P348안개의호수・바닥
	RETURN P347안개의호수
ENDSELECT

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;基本的に最短で行けるコースを設定する
;現在地によってコースが変わることも考慮して対応する
SELECTCASE ARG
	CASE P301정문
		SELECTCASE 현재의위치
		CASE P305헛간 TO P333대욕탕
			RETURN P302정원
		CASEELSE
			RETURN P343호숫가
		ENDSELECT
	CASE P302정원
		SELECTCASE 현재의위치
		CASE P310도서관, P311파츄리방, P312소악마방
			RETURN P307동쪽테라스
		CASE P315응접실
			RETURN P308서쪽테라스
		CASE P305헛간
			RETURN P306뒤뜰
		CASE P313주방 TO P333대욕탕
			RETURN P309객실
		CASEELSE
			RETURN P301정문
		ENDSELECT
	CASE P303수위실, P304빈오두막
		SELECTCASE 현재의위치
		CASE P305헛간 TO P333대욕탕
			RETURN P302정원
		CASEELSE
			RETURN P301정문
		ENDSELECT
	CASE P305헛간
		RETURN P306뒤뜰
	CASE P306뒤뜰
		SELECTCASE 현재의위치
		CASE P314식당
			RETURN P313주방
		CASEELSE
			RETURN P302정원
		ENDSELECT
	CASE P307동쪽테라스
		SELECTCASE 현재의위치
		CASE P308서쪽테라스, P315응접실
			RETURN P302정원
		CASE P309객실 TO P333대욕탕
			RETURN P310도서관
		CASEELSE
			RETURN P302정원
		ENDSELECT
	CASE P308서쪽테라스
		SELECTCASE 현재의위치
		CASE P307동쪽테라스, P310도서관 TO P312소악마방
			RETURN P302정원
		CASE P309객실 TO P333대욕탕
			RETURN P315응접실
		CASEELSE
			RETURN P302정원
		ENDSELECT
	CASE P309객실
		SELECTCASE 현재의위치
		CASE P307동쪽테라스, P310도서관 TO P312소악마방
			RETURN P310도서관
		CASE P308서쪽테라스
			RETURN P315응접실
		CASE P313주방
			RETURN P314식당
		CASE P329창고 TO P333대욕탕
			RETURN P328지하복도
		CASE P320사쿠야방 TO P327작은발코니
			RETURN P3192층복도
		CASEELSE
			RETURN P302정원
		ENDSELECT
	CASE P310도서관
		RETURN P309객실
	CASE P311파츄리방, P312소악마방
		RETURN P310도서관
	CASE P313주방
		SELECTCASE 현재의위치
		CASE P309객실 TO P333대욕탕
			RETURN P314식당
		CASEELSE
			RETURN P306뒤뜰
		ENDSELECT
	CASE P314식당
		SELECTCASE 현재의위치
		CASE P305헛간, P306뒤뜰
			RETURN P306뒤뜰
		CASEELSE
			RETURN P309객실
		ENDSELECT
	CASE P315응접실
		RETURN P309객실
	CASE P3161층화장실
		RETURN P309객실
	CASE P3192층복도
		RETURN P309객실
	CASE P320사쿠야방 TO P326레밀리아방
		RETURN P3192층복도
	CASE P327작은발코니
		RETURN P326레밀리아방
	CASE P328지하복도
		RETURN P309객실
	CASE P329창고 TO P332탈의실
		RETURN P328지하복도
	CASE P333대욕탕
		RETURN P332탈의실

	CASE P334폐양관・입구
		SELECTCASE 현재의위치
		CASE P337폐양관・부엌 TO P342리리카방
			RETURN P335폐양관・객실
		CASEELSE
			RETURN P343호숫가
		ENDSELECT
	CASE P335폐양관・객실
		RETURN P334폐양관・입구
	CASE P337폐양관・부엌 TO P339폐양관・2층복도
		RETURN P335폐양관・객실
	CASE P340루나사방 TO P342리리카방
		RETURN P339폐양관・2층복도

	CASE P343호숫가
		SELECTCASE 현재의위치
		CASE P301정문 TO P333대욕탕
			RETURN P301정문
		CASE P334폐양관・입구 TO P342리리카방
			RETURN P334폐양관・입구
		CASEELSE
			RETURN P347안개의호수
		ENDSELECT
	CASE P344레티의움집, P345치르노의움집, P346대요정의거처
		RETURN P343호숫가
	CASE P347안개의호수
		RETURN P343호숫가
	CASE P348안개의호수・바닥
		RETURN P347안개의호수
ENDSELECT