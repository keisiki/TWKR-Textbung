@GET_EXISTMOB(ARG)
#FUNCTION
SIF GROUPMATCH(ARG, 3,4,9, 10)
	RETURNF 1

;MASTER가 재택안 또한 모브와 같은 위치에 있다면 MAIN_MAP를 돌려준다
@WITH_MOB()
#FUNCTION
SIF AT_HOME(MASTER) && ROOMDATA:(CFLAG:MASTER:현재위치 % 100) & 장소_모브
	RETURNF MAIN_MAP

@MOB_YOGORE(ARG)
#FUNCTION
SELECTCASE ARG
	CASE 3
		RETURNF -3
	CASE 4
		SIF !GROUPMATCH(TIME:2,1,6,7)
			RETURNF 1
	CASE 9
		SIF !GROUPMATCH(TIME:2,1,6,7)
			RETURNF 2
	CASE 10
ENDSELECT

@MOB_PLACE_3
FOR LOCAL,1,100
	CLEARBIT ROOMDATA:LOCAL,20
	SELECTCASE TIME:2
		CASE 2
			SIF GROUPMATCH(LOCAL,2,6,7,8,9,27)
				ROOMDATA:LOCAL |= 장소_모브
		CASE 3
			SIF GROUPMATCH(LOCAL,13,14,15)
				ROOMDATA:LOCAL |= 장소_모브
		CASE 4
			SIF GROUPMATCH(LOCAL,17,18,19)
				ROOMDATA:LOCAL |= 장소_모브
		CASE 5
			SIF GROUPMATCH(LOCAL,24,25)
				ROOMDATA:LOCAL |= 장소_모브
		CASE 6
			SIF GROUPMATCH(LOCAL,6,28,30)
				ROOMDATA:LOCAL |= 장소_모브
			SIF LOCAL == 29 && CFLAG:50:현재위치 != 329
				ROOMDATA:LOCAL |= 장소_모브
	ENDSELECT
NEXT

@MOB_MESSAGE_3
IF FLAG:70
	PRINTFORML 홉고블린이 정지해 있다…
ELSEIF CFLAG:MASTER:현재위치 == 329
	PRINTFORML 홉고블린이 고양이를 돌보고 있다…
ELSE
	PRINTFORML 홉고블린이 일하고 있다…
ENDIF

@MOB_TURNENDEVENT_3
IF !FLAG:70
	IF CFLAG:MASTER:우후후
		PRINTFORML 홉고블린에게서 이곳은 공공의 공간이니 그런 행위는 지양해달라는 말을 들었다
		PRINTFORML %마스터는% 겸연쩍은 기분을 느꼈다
		BASE:무드 = 0
		FOR LOCAL,0,CHARANUM
			CALL ENDUFUFU(LOCAL)
		NEXT
		TFLAG:106 = 0
		;MASTER와의 접촉 위치를 리셋
		CALL TOUCH_SET(0,0,0,1)
		;(은)탈의 플래그를 오프
		TEQUIP:2 = 0
		TEQUIP:상반신탈의상태 = 0
		;캐릭터 전원의 복재세팅
		FOR LOCAL,0,CHARANUM
			CALL CLOTHES_SETTING_TRAIN(LOCAL)
			;윗도리탈의가끝난상태 플래그를 오프
			TEQUIP:LOCAL:5 = 0
		NEXT
	ELSEIF CFLAG:MASTER:현재위치 == 313
		CALL MAKANAI
	ENDIF
ENDIF

@MOB_TURNENDEVENT_4
IF !FLAG:70
	IF CFLAG:MASTER:우후후
		PRINTFORML %CALLNAME:MASTER%들을 보고 주위 이나바들이 꺅꺅 떠들기 시작하고, 나아가 그 소리를 주워들은 구경꾼이 모이기 시작했다
		PRINTFORML 도저히 일을 벌일 분위기는 아니다……
		BASE:무드 = 0
		FOR LOCAL,0,CHARANUM
			CALL ENDUFUFU(LOCAL)
		NEXT
		TFLAG:106 = 0
		;MASTER와의 접촉 위치를 리셋
		CALL TOUCH_SET(0,0,0,1)
		;(은)탈의 플래그를 오프
		TEQUIP:2 = 0
		;캐릭터 전원의 복재세팅
		FOR LOCAL,0,CHARANUM
			CALL CLOTHES_SETTING_TRAIN(LOCAL)
			;윗도리탈의가끝난상태 플래그를 오프
			TEQUIP:LOCAL:5 = 0
		NEXT
	ELSEIF CFLAG:MASTER:현재위치 == 313
		CALL MAKANAI
	ENDIF
ENDIF

@MOB_PLACE_4
FOR LOCAL,1,100
	CLEARBIT ROOMDATA:LOCAL,20
	SELECTCASE TIME:2
		CASE 1 TO 7
			SIF GROUPMATCH(LOCAL,7,8,9,21,22,31)
				ROOMDATA:LOCAL |= 장소_모브
	ENDSELECT
NEXT


@MOB_PLACE_9
FOR LOCAL,1,100
	CLEARBIT ROOMDATA:LOCAL,20
	IF GROUPMATCH(TIME:2,1,6,7)
		SIF GROUPMATCH(LOCAL,2,3,4,5,13,14,15,23,26,28,29,30,33,38)
			ROOMDATA:LOCAL |= 장소_모브
	ELSE
		SIF GROUPMATCH(LOCAL,2,3,4,5,13,14,15,23,24,26,28,29,30,31,32,33,38)
			ROOMDATA:LOCAL |= 장소_모브
	ENDIF
NEXT

@MOB_PLACE_10
FOR LOCAL,1,100
	CLEARBIT ROOMDATA:LOCAL,20
	SELECTCASE TIME:2
		CASE 2
			SIF GROUPMATCH(LOCAL,3, 4, 14, 20, 23, 25)
				ROOMDATA:LOCAL |= 장소_모브
		CASE 3
			SIF GROUPMATCH(LOCAL,3, 4, 20, 24)
				ROOMDATA:LOCAL |= 장소_모브
		CASE 4
			SIF GROUPMATCH(LOCAL,3, 4, 14, 20, 23, 25)
				ROOMDATA:LOCAL |= 장소_모브
		CASE 5
			SIF GROUPMATCH(LOCAL,3, 4, 20, 24)
				ROOMDATA:LOCAL |= 장소_모브
		CASE 6
			SIF GROUPMATCH(LOCAL,3, 4, 20, 23, 24, 25)
				ROOMDATA:LOCAL |= 장소_모브
		CASEELSE
			SIF GROUPMATCH(LOCAL,20)
				ROOMDATA:LOCAL |= 장소_모브
	ENDSELECT
NEXT

@MOB_TURNENDEVENT_10
IF !FLAG:70
	IF CFLAG:MASTER:우후후
		IF GROUPMATCH(CFLAG:MASTER:현재위치,20, 23)
			PRINTFORML 문지기가 무슨 일인가 하고 법석을 떨며 달려왔다
			PRINTFORML 도저히 일을 벌일 분위기는 아니다……
		ELSE
			PRINTFORML %CALLNAME:MASTER%들을 보고 주위의 옥토들들이 꺅꺅 떠들기 시작하고, 나아가 그 소리를 주워들은 구경꾼이 모이기 시작했다
			PRINTFORML 도저히 일을 벌일 분위기는 아니다……
		ENDIF
		BASE:무드 = 0
		FOR LOCAL,0,CHARANUM
			CALL ENDUFUFU(LOCAL)
		NEXT
		TFLAG:106 = 0
		;MASTER와의 접촉 위치를 리셋
		CALL TOUCH_SET(0,0,0,1)
		;(은)탈의 플래그를 오프
		TEQUIP:2 = 0
		TEQUIP:상반신탈의상태 = 0
		;캐릭터 전원의 복재세팅
		FOR LOCAL,0,CHARANUM
			CALL CLOTHES_SETTING_TRAIN(LOCAL)
			;윗도리탈의가끝난상태 플래그를 오프
			TEQUIP:LOCAL:5 = 0
		NEXT
	ENDIF
ENDIF


@ANIMALNAME()
#FUNCTIONS
SELECTCASE TIME:1 % 25
	;소형 포유류
	CASE 0
		LOCALS = 개
	CASE 1
		LOCALS = 고양이
	CASE 2
		LOCALS = 코알라
	CASE 3
		LOCALS = 고릴라
	CASE 4
		LOCALS = 저지데빌
	CASE 5
		LOCALS = 아르마딜로
	CASE 6
		LOCALS = 새끼멧돼지
	CASE 7
		LOCALS = 카피바라
	;대형 포유류
	CASE 8
		LOCALS = 개미핥기
	CASE 9
		LOCALS = 말
	CASE 10
		LOCALS = 소
	CASE 11
		LOCALS = 양
	CASE 12
		LOCALS = 알파카
	CASE 13
		LOCALS = 바다표범
	;초대형 포유류
	CASE 14
		LOCALS = 코끼리
	CASE 15
		LOCALS = 기린
	;조류
	CASE 16
		LOCALS = 병아리
	CASE 17
		LOCALS = 펭귄
	CASE 18
		LOCALS = 넓적부리황새
	CASE 19
	;LOCALS = 좀비 페어리
		LOCALS = 공작
	CASE 20
		LOCALS = 타조
	;파충류
	CASE 21
		LOCALS = 악어
	CASE 22
		LOCALS = 코모도도마뱀
	CASE 23
		LOCALS = 버마왕뱀
	CASE 24
		LOCALS = 코끼리거북
ENDSELECT
RETURNF LOCALS

@MAKANAI
#DIM 기력회복량
#DIM 체력회복량

VARSET LOCAL
IF !DISHTYPE && !TFLAG:가게에서주는식사 && TIME:2 == 3
;식사할 수 없는 사람이 있는지를 체크
FOR LOCAL,0,CHARANUM
	SIF TCVAR:LOCAL:공복시각 - TIME:1 > 0 && CFLAG:LOCAL:현재위치 == CFLAG:MASTER:현재위치
		LOCAL:1 ++
NEXT
IF !LOCAL:1 && !RAND:5
	TFLAG:가게에서주는식사 = 1
	PRINTFORML %MOB_NAME()%에게서 새참을 권유받았다
	PRINTFORML 받겠습니까?
	CALL ASK_YN
	IF RESULT
		PRINTFORML %마스터는% 정중히 거절했다
	ELSE
		SELECTCASE RAND:5
			CASE 0,1
				PRINTFORML 대충 먹을 만하다
				체력회복량 = 100
				기력회복량 = 300
			CASE 2,3
				PRINTFORML 꽤 입맛을 돋운다
				체력회복량 = 150
				기력회복량 = 400
			CASE 4
				PRINTFORML 이건 맛있다!
				체력회복량 = 300
				기력회복량 = 500
		ENDSELECT
		PRINTFORMW %CALLNAME:MASTER%\@GET_TARGETNUM() ?  들# \@는 출출하던 배를 채웠다
		TIME += 15
		FOR LOCAL,0,CHARANUM
			IF CFLAG:LOCAL:현재위치 == CFLAG:MASTER:현재위치
				CALL RECOVER(LOCAL, 체력회복량,"체력")
				CALL RECOVER(LOCAL, 기력회복량,"기력")
				CALL 만복도상승(LOCAL,"경식")
				PRINTFORML 체력+{체력회복량}(%CALLNAME:LOCAL%)
				PRINTFORML 기력+{기력회복량}(%CALLNAME:LOCAL%)
			ENDIF
		NEXT
	ENDIF
ENDIF
ENDIF
@MOB_NAME(ARG)
#FUNCTIONS
SIF !ARG
	ARG = MAIN_MAP
SELECTCASE ARG
CASE 3
	LOCALS = 홉고블린
CASE 4
	LOCALS = 이나바
CASE 9
	LOCALS = %ANIMALNAME()%
CASE 10
	LOCALS = 옥토
ENDSELECT
RETURNF LOCALS
