;-----------------------------------------------------------
;원거리 이동 설정
;ARG     목적지
;ARG:1   현위치
;RETURN  다음 목적지
;-----------------------------------------------------------
@SKIP_MOVE_1(ARG, ARG:1)
#DIM 현재의위치
;現在位置取得
IF ARG:1
	현재의위치 = ARG:1
ELSE
	현재의위치 = CFLAG:MASTER:현재위치
ENDIF

;目的地に直接移動できる場合そこに移動
SIF CAN_MOVE(현재의위치, ARG) & 1
	RETURN ARG

;袋小路から行ける場所は固定なので、そこを目指す
SELECTCASE 현재의위치
	CASE P103본당
		RETURN P104강당
	CASE P105경당, P119별채, P122범종루, P137마미조의거처
		RETURN P102경내
	CASE P111부엌
		RETURN P108거실
	CASE P112목욕탕
		RETURN P107봉당
	CASE P120헛간
		RETURN P106뒷마당
	CASE P125토지코방, P127후토방, P128미코방, P132조제실
		RETURN P130복도
	CASE P133목욕장, P134곳간, P138종루, P139사선루
		RETURN P124영묘광장
ENDSELECT

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;基本的に最短で行けるコースを設定する
;現在地によってコースが変わることも考慮して対応する
SELECTCASE ARG
	CASE P101산문
		SELECTCASE 현재의위치
		CASE P123영묘대문 TO P134곳간, P138종루, P139사선루
			RETURN P140지장길
		CASEELSE
			RETURN P102경내
		ENDSELECT
	CASE P102경내
		SELECTCASE 현재의위치
		CASE P123영묘대문 TO P134곳간, P138종루, P139사선루, P140지장길
			RETURN P101산문
		CASE P106뒷마당, P110툇마루, P120헛간
			RETURN P121묘지
		CASEELSE
			RETURN P107봉당
		ENDSELECT
	CASE P103본당
		RETURN P104강당
	CASE P104강당, P105경당, P119별채, P122범종루, P137마미조의거처
		RETURN P102경내
	CASE P106뒷마당
		SELECTCASE 현재의위치
		CASE P108거실 TO P111부엌, P113나즈린방 TO P118뱌쿠렌방, P135복도, P136쿄코방
			RETURN P110툇마루
		CASEELSE
			RETURN P121묘지
		ENDSELECT
	CASE P107봉당
		SELECTCASE 현재의위치
		CASE P106뒷마당, P109조온방 TO P118뱌쿠렌방, P120헛간, P135복도, P136쿄코방
			RETURN P108거실
		CASEELSE
			RETURN P102경내
		ENDSELECT
	CASE P108거실
		SELECTCASE 현재의위치
		CASE P106뒷마당, P110툇마루, P113나즈린방 TO P118뱌쿠렌방, P120헛간, P136쿄코방
			RETURN P135복도
		CASEELSE
			RETURN P107봉당
		ENDSELECT
	CASE P109조온방
		SELECTCASE 현재의위치
		CASE P106뒷마당, P110툇마루, P113나즈린방 TO P118뱌쿠렌방, P120헛간, P136쿄코방
			RETURN P135복도
		CASEELSE
			RETURN P108거실
		ENDSELECT
	CASE P110툇마루
		SELECTCASE 현재의위치
		CASE P107봉당 TO P118뱌쿠렌방, P136쿄코방
			RETURN P135복도
		CASEELSE
			RETURN P106뒷마당
		ENDSELECT
	CASE P111부엌
		RETURN P108거실
	CASE P112목욕탕
		RETURN P107봉당
	CASE P113나즈린방, P115쇼방
		SELECTCASE 현재의위치
		CASE P109조온방 TO P118뱌쿠렌방, P136쿄코방
			RETURN P135복도
		CASEELSE
			RETURN P110툇마루
		ENDSELECT
	CASE P114무라사방, P116이치린방, P117누에방, P118뱌쿠렌방, P136쿄코방
		RETURN P135복도
	CASE P120헛간
		RETURN P106뒷마당
	CASE P121묘지
		SELECTCASE 현재의위치
		CASE P109조온방, P110툇마루, P113나즈린방 TO P118뱌쿠렌방, P120헛간, P135복도, P136쿄코방
			RETURN P106뒷마당
		CASEELSE
			RETURN P102경내
		ENDSELECT

	CASE P123영묘대문
		SELECTCASE 현재의위치
		CASE P125토지코방 TO P132조제실
			RETURN P124영묘광장
		CASEELSE
			RETURN P140지장길
		ENDSELECT
	CASE P124영묘광장
		SELECTCASE 현재의위치
		CASE P125토지코방 TO P132조제실
			RETURN P126도장
		CASEELSE
			RETURN P123영묘대문
		ENDSELECT
	CASE P125토지코방, P127후토방, P128미코방, P132조제실, P129응접실, P131고산수
		RETURN P130복도
	CASE P126도장
		SELECTCASE 현재의위치
		CASE P125토지코방 TO P132조제실
			RETURN P130복도
		CASEELSE
			RETURN P124영묘광장
		ENDSELECT
	CASE P130복도
		RETURN P126도장
	CASE P133목욕장, P134곳간, P138종루, P139사선루
		RETURN P124영묘광장

	CASE P135복도
		SELECTCASE 현재의위치
		CASE P106뒷마당, P110툇마루, P120헛간, P121묘지
			RETURN P110툇마루
		CASEELSE
			RETURN P108거실
		ENDSELECT
	CASE P140지장길
		SELECTCASE 현재의위치
		CASE P123영묘대문 TO P134곳간, P138종루, P139사선루
			RETURN P123영묘대문
		CASEELSE
			RETURN P101산문
		ENDSELECT
ENDSELECT