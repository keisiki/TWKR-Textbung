;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;코치야 사나에 대사에 대해 이용하는 함수 두는 곳;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;-----------------------------------------------------------------------
;2017/4/29　Ver 0.03. 04　추가	EVENT_다음의선택지_K31()
;								CHAPTER_지금몇장_K31()
;2017/4/26　Ver 0.03. 03　세부의 수정
;2017/4/10　Ver 0.03. 02　가필	CHARA_INFO_KOJO_K31
;2017/3/26　Ver 0.03. 01　추가	CHARA_INFO_KOJO_K31
;								다음의시나리오조건_K31
;2017/1/20　Ver 0.03. 00　버전 관리 개시
;-----------------------------------------------------------------------
;@EVENT_CHECK_K31(ARG)
;이벤트 No. (ARG)(을)를 밟아 돌고래 토우카
;돌아가 값
;1:밟고 있어요
;0:밟고 있지 않아요
;이벤트 일람(체험판 Ver0. 03 시점)
;제1장　처음 뵙겠습니다
;	No. 1 변변치 못한 차입니다만
;	No. 2 첫접촉
;	No. 3 모리야의 카제하후리
;	No. 4 믿어봤자 정어리는 정어리
;	No. 5 신자는 아니지만
;	No. 6 역시 정어리
;제1장　만나고 3초만에 뚝딱 데이트!?
;	No. 10001 무난한 데이트
;	No. 10002 첫데이트는 억지로
;	No. 10003 현인신도 건드리지 않으면 탈 없다
;	No. 10004 데이트한 뒤에
;	No. 10005 데이트상대는 카제하후리
;	No. 10006 거짓에서 나온 진실
;제2장　모리야 씨댁의 현인신
;	No. 11 모리야 패밀리즈
;	No. 12 어디까지나 협력원
;	No. 13 기적의 고마움
;	No. 14 도우미분?
;	No. 15 신으로서의 사나에 씨
;	No. 16 사람으로서의 사나에 씨
;제2장　신자 획득 대작전
;	No. 21 카제하후리로서의 힘
;	No. 22 믿어달라 그런들…
;	No. 23 덧없는 신앙을 위해서
;	No. 24 힘으로 모으는 신앙
;	No. 25 신자 획득?
;	No. 26 밖에서 지탱하는 대들보
;제2장　복권으로 이어진 연분
;	No. 10011 썩 싫지만도 않은 듯
;	No. 10012 포교의 장려
;	No. 10013 남의 소문도…
;	No. 10014 환상보도○기레기
;	No. 10015 엘레멘탈리, 마이 디어 사나에
;	No. 10016 한복판 중앙 95점
;제2장　기적을 일으키는 법
;	No. 10021 걸즈＆팬티
;	No. 10022 ｑ!!
;	No. 10023 농간에 의한 범행?
;	No. 10024 속고 있는 거예요!!
;	No. 10025 흥미 없습니다(거짓말)
;	No. 10026 안도의 한숨
;-----------------------------------------------------------------------
@EVENT_CHECK_K31(ARG)
#FUNCTION
#DIM 제1선택지
#DIM 제2선택지
#DIM 제3선택지
#DIM 제1장
#DIM 제2장
#DIM 제3장
#DIM 제4장
#DIM 제5장
#DIM 제6장

제1장 = CFLAG:31:K31_CFLAG_제1장시나리오
제2장 = CFLAG:31:K31_CFLAG_제2장시나리오
제3장 = CFLAG:31:K31_CFLAG_제3장시나리오
제4장 = CFLAG:31:K31_CFLAG_제4장시나리오
제5장 = CFLAG:31:K31_CFLAG_제5장시나리오
제6장 = CFLAG:31:K31_CFLAG_제6장시나리오


	;제1장
	IF (ARG < 10 && ARG > 0) || (ARG < 10010 && ARG > 10000)
		;제1장　처음 뵙겠습니다 이벤트 No. 0
		IF ARG < 10
			SIF 제1장 != 0
				RETURNF 0
		;제1장　만나고 3초만에 뚝딱 데이트!?			이벤트 No. 10000
		ELSE
			SIF 제1장 != 10000
				RETURNF 0
		ENDIF
		제1선택지 = (CFLAG:31:3100 / 1) % 10
		제2선택지 = (CFLAG:31:3100 / 10) % 10
		제3선택지 = (CFLAG:31:3100 / 100) % 10
		SELECTCASE ARG- 제1장
		CASE 1
			;해당 부분이 올바르면
			SIF 제1선택지 == 1
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 2
			;해당 부분이 올바르면
			SIF 제1선택지 == 2
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 3
			;해당 부분이 올바르면
			SIF 제2선택지 == 1
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 4
			;해당 부분이 올바르면
			SIF 제2선택지 == 2
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 5
			;해당 부분이 올바르면
			SIF 제3선택지 == 1
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 6
			;해당 부분이 올바르면
			SIF 제3선택지 == 2
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASEELSE
			RETURNF 0
		ENDSELECT
	
	;제2장
	ELSEIF (ARG < 30 && ARG > 10) || (ARG < 10030 && ARG > 10010)
		;제2장　모리야 씨댁의 현인신 이벤트 No. 10
		IF ARG < 20
			SIF 제2장 != 10
				RETURNF 0
		;제2장　모리야 씨댁의 현인신 이벤트 No. 20
		ELSEIF ARG < 30
			SIF 제2장 != 20
				RETURNF 0
		;제2장　복권으로 이어진 연분 이벤트 No. 10010
		ELSEIF ARG < 10020
			SIF 제2장 != 10010
				RETURNF 0
		;제2장　기적을 일으키는 법 이벤트 No. 10020
		ELSE
			SIF 제1장 != 10020
				RETURNF 0
		ENDIF
		제1선택지 = (CFLAG:31:3100 / 1000) % 10
		제2선택지 = (CFLAG:31:3100 / 10000) % 10
		제3선택지 = (CFLAG:31:3100 / 100000) % 10
		SELECTCASE ARG- 제2장
		CASE 1
			;해당 부분이 올바르면
			SIF 제1선택지 == 1
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 2
			;해당 부분이 올바르면
			SIF 제1선택지 == 2
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 3
			;해당 부분이 올바르면
			SIF 제2선택지 == 1
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 4
			;해당 부분이 올바르면
			SIF 제2선택지 == 2
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 5
			;해당 부분이 올바르면
			SIF 제3선택지 == 1
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASE 6
			;해당 부분이 올바르면
			SIF 제3선택지 == 2
				;1(을)를 돌려준다
				RETURNF 1
			;그 이외는 0
			RETURNF 0
		CASEELSE
			RETURNF 0
		ENDSELECT
	
	
	
	ENDIF
RETURNF 0
;-----------------------------------------------------------------------
;@EVENT_다음의선택지_K31()
;다음의선택지는 제무엇 선택지인가
;돌아가 값
;4:제4 선택지
;3:제3선택지
;2:제2선택지
;1:제1선택지
;0:에러( 제6장 도달 또는 상정하지 않는 에러)
;-----------------------------------------------------------------------
@EVENT_다음의선택지_K31()
#FUNCTION
#DIM 선택지가력
#DIM 현재의장
#DIM 제1장
#DIM 제2장
#DIM 제3장
#DIM 제4장
#DIM 제5장
#DIM 제6장


선택지가력 = CFLAG:31:K31_CFLAG_선택지가력

현재의장 = CHAPTER_지금몇장_K31()
SELECTCASE 현재의장
CASE 6
	RETURNF 0
CASE 5
	SIF 선택지가력 / 100000000000000
		RETURNF 4
	SIF 선택지가력 / 10000000000000
		RETURNF 3
	SIF 선택지가력 / 1000000000000
		RETURNF 2
	SIF 선택지가력 / 100000000000
		RETURNF 1
CASE 4
	SIF 선택지가력 / 100000000000
		RETURNF 4
	SIF 선택지가력 / 10000000000
		RETURNF 3
	SIF 선택지가력 / 1000000000
		RETURNF 2
	SIF 선택지가력 / 100000000
		RETURNF 1
CASE 3
	SIF 선택지가력 / 100000000
		RETURNF 4
	SIF 선택지가력 / 10000000
		RETURNF 3
	SIF 선택지가력 / 1000000
		RETURNF 2
	SIF 선택지가력 / 100000
		RETURNF 1
CASE 2
	SIF 선택지가력 / 100000
		RETURNF 4
	SIF 선택지가력 / 10000
		RETURNF 3
	SIF 선택지가력 / 1000
		RETURNF 2
	SIF 선택지가력 / 100
		RETURNF 1
CASE 1
	SIF 선택지가력 / 100
		RETURNF 4
	SIF 선택지가력 / 10
		RETURNF 3
	SIF 선택지가력 / 1
		RETURNF 2
CASE 0
	RETURNF 1
CASEELSE
	PRINTL 에러(@EVENT_다음의선택지())
ENDSELECT
RETURNF 0

;-----------------------------------------------------------------------
;@CHAPTER_지금몇장_K31()
;지금 몇장인지를 돌려주는 식중함수
;돌아가 값
;0:제0장(안면 없음)
;1:제1장
;2:제2장
;3:제3장
;4:제4장
;5:제5장
;6:제6장
;-----------------------------------------------------------------------
@CHAPTER_지금몇장_K31()
#FUNCTION
#DIM 제1장
#DIM 제2장
#DIM 제3장
#DIM 제4장
#DIM 제5장
#DIM 제6장

제1장 = CFLAG:31:K31_CFLAG_제1장시나리오
제2장 = CFLAG:31:K31_CFLAG_제2장시나리오
제3장 = CFLAG:31:K31_CFLAG_제3장시나리오
제4장 = CFLAG:31:K31_CFLAG_제4장시나리오
제5장 = CFLAG:31:K31_CFLAG_제5장시나리오
제6장 = CFLAG:31:K31_CFLAG_제6장시나리오

LOCAL = 6
SIF 제1장 == -1
	LOCAL --
SIF 제2장 == -1
	LOCAL --
SIF 제3장 == -1
	LOCAL --
SIF 제4장 == -1
	LOCAL --
SIF 제5장 == -1
	LOCAL --
SIF 제6장 == -1
	LOCAL --

RETURNF LOCAL

;-----------------------------------------------------------------------
;@CHAPTER_CHECK_K31(ARG)
;특정의 장(이벤트 No. (ARG))(을)를 통과해 돌고래 토우카
;돌아가 값
;1:통과하고 있어요
;0:통과하고 있지 않아요
;쇼이치로 람
;제1장
;통상 루트 「제1장　처음 뵙겠습니다」이벤트 No. 0
;레어 루트 「제1장　만나고 3초만에 뚝딱 데이트!?」이벤트 No. 10000

;제2장
;통상 루트 「제2장　모리야 씨댁의 현인신」이벤트 No. 10
;통상 루트 「제2장　신자 획득 대작전」이벤트 No. 20
;레어 루트 「제2장　복권으로 이어진 연분」이벤트 No. 10010
;레어 루트 「제2장　기적을 일으키는 법」이벤트 No. 10020

;제3장
;통상 루트 「제3장 신자와 신의 수상해 관계」이벤트 No. 100
;통상 루트 「제3장　3년 B조사나에 씨」이벤트 No. 110
;통상 루트 「제3장 요괴 버스터즈」이벤트 No. 120
;레어 루트 「제3장 어느 쪽이 정곡을 찌르고 뽑았어?」이벤트 No. 10100
;레어 루트 「제3장 모리야 신사의 사나에 씨」이벤트 No. 10110
;-----------------------------------------------------------------------
@CHAPTER_CHECK_K31(ARG)
#FUNCTION
#DIM 제1장
#DIM 제2장
#DIM 제3장
#DIM 제4장
#DIM 제5장
#DIM 제6장

제1장 = CFLAG:31:3101
제2장 = CFLAG:31:3102
제3장 = CFLAG:31:3103
제4장 = CFLAG:31:3104
제5장 = CFLAG:31:3105
제6장 = CFLAG:31:3106

;처리적으로는 약간 쓸데없지만 기술이 제일 간단해서
SIF ARG == 제1장
	RETURNF 1
SIF ARG == 제2장
	RETURNF 1
SIF ARG == 제3장
	RETURNF 1
SIF ARG == 제4장
	RETURNF 1
SIF ARG == 제5장
	RETURNF 1
SIF ARG == 제6장
	RETURNF 1
RETURNF 0

;-----------------------------------------------------------------------
;@CHAPTER_공략중_K31(ARG)
;특정의 장(이벤트 No. (ARG))(을)를 공략중인가 토우카
;공략중：그 아키라에 들어가 있는+다음의 아키라에 들어가 있지 않다
;돌아가 값
;1:공략중이에요
;0:공략중은 아니다
;쇼이치로 람
;제1장(CFLAG:31:3101)
;통상 루트 「제1장　처음 뵙겠습니다」이벤트 No. 0
;레어 루트 「제1장　만나고 3초만에 뚝딱 데이트!?」이벤트 No. 10000

;제2장(CFLAG:31:3102)
;통상 루트 「제2장　모리야 씨댁의 현인신」이벤트 No. 10
;통상 루트 「제2장　신자 획득 대작전」이벤트 No. 20
;레어 루트 「제2장　복권으로 이어진 연분」이벤트 No. 10010
;레어 루트 「제2장　기적을 일으키는 법」이벤트 No. 10020
;-----------------------------------------------------------------------
@CHAPTER_공략중_K31(ARG)
#FUNCTION
#DIM 제1장
#DIM 제2장
#DIM 제3장
#DIM 제4장
#DIM 제5장
#DIM 제6장

제1장 = CFLAG:31:3101
제2장 = CFLAG:31:3102
제3장 = CFLAG:31:3103
제4장 = CFLAG:31:3104
제5장 = CFLAG:31:3105
제6장 = CFLAG:31:3106

;처리적으로는 약간 쓸데없지만 기술이 제일 간단해서
SIF ARG == 제1장 && 제2장 == -1
	RETURNF 1
SIF ARG == 제2장 && 제3장 == -1
	RETURNF 1
SIF ARG == 제3장 && 제4장 == -1
	RETURNF 1
SIF ARG == 제4장 && 제5장 == -1
	RETURNF 1
SIF ARG == 제5장 && 제6장 == -1
	RETURNF 1
SIF ARG == 제6장
	RETURNF 1
RETURNF 0

;-----------------------------------------------------------------------------------------------
;@CHARA_INFO_KOJO_K31()
;개인정보의 「캐릭터 소개」의 문장을 고쳐 쓴다
;이것이 있으면 「CSTR」의 20번 이후(20~39)에 캐릭터라인을 기입하는 것만으로 써 교체될 것
;이것을 사용하고 싶지 않은 경우는 코멘트 아웃
;-----------------------------------------------------------------------------------------------
@CHARA_INFO_KOJO_K31()
;===============================================================================================
;기술예
;이 코멘트 아웃을 제외하면(자) 「CSTR」의 20번 이후에 캐릭터라인을 기입하는 것만으로 써 교체되게 된다
;FOR LOCAL, 20,40
;	SIF CSTR:31:(LOCAL) != ""
;		PRINTFORML %CSTR:31:(LOCAL)%
;NEXT
;RETURN 1
;…(와)과 뭐, 이런 느낌으로 CSTR20차례 이후를 사용하면 좋을 것
;===============================================================================================
;본대사은, 써 교체되는 문장이 많기 때문에 CSTR에의 보존을 하지 않고 직접 기입한다
;현시점에서 아래의 2행이 기입해지고 있다
;PRINTL □ 캐릭터 소개 □---------------------------------------------------------------------
;PRINTL 

;-----------------------------------------------------------------------------------------------
;사용하는 플래그
;CFLAG:31:3100 각 선택지으로 무엇을 선택했는지(10 진수 관리) 
;000 000 000 000 000 
;5장, 4장, 3장, 2장, 1장의 순서, 미선택이라면 0, A루트 선택이라면 1, B루트 선택이라면 2
;현상 6장이 골이므로 선택지의 기록이 필요한 것은 5장까지
;CFLAG:31:3101 본대사의 1장의 시나리오(미도달시는―1)
;CFLAG:31:3102 본대사의 2장의 시나리오(미도달시는―1)
;CFLAG:31:3103 본대사의 3장의 시나리오(미도달시는―1)
;CFLAG:31:3104 본대사의 4장의 시나리오(미도달시는―1)
;CFLAG:31:3105 본대사의 5장의 시나리오(미도달시는―1)
;CFLAG:31:3106 본대사의 6장의 시나리오(미도달시는―1)
;-----------------------------------------------------------------------------------------------
;
;표기의 일례로서 이하와 같은 문장이 될 것
;
;
;□ 캐릭터 소개 □---------------------------------------------------------------------
;
;「～숭앙받는 바람의 인간～　●종족：인간　●능력：기적을 일으키는 정도의 능력」
;
;「제2장　복권으로 이어진 연분」
;마을에서의 권유가 너무 바빠 손길이 닿지 않게 되었기 때문에, 최근 한가한 것 같은 인간을 찾고 있으면(자)
;눈앞에, 추정 무직의 인간이 있었으므로 이것 다행이라고 스카우트 했다
;그러나, 소문을 좋아하는 인 요(주인의 텐구)의 눈에 띄고 지 않을 리가 없고
;간신히 멈추기 시작했다 소문이 재연하는 결과에…
;
;뭐양 겨울밤과 일을 도와 주는 당신에게는, 감사하고 있다
;다만, 만남이 만남이었으므로 직접 말로 할 것은 없을 것이다,……아마
;
;
;【현재의 관계】
;
;　　당신과 사나에의 현재의 관계성은, 「아는 사람」입니다
;
;【다음에 진행되는 조건】
;
;　　호감도 1000 신뢰도 100으로 「회화」를 실시한다
;
;-----------------------------------------------------------------------------------------------


;##################################################################################
;①「～숭앙받는 바람의 인간～　●종족：인간　●능력：기적을 일으키는 정도의 능력」을 프린트
;##################################################################################
CALL M_KOJO_COLOR_K31
PRINTFORML %CSVCSTR(31, 10)%
RESETCOLOR
PRINTL 

;##################################################################################
;②캐릭터 소개문을 기입해
;##################################################################################
;사나에 씨와 안면전
IF !CFLAG:31:18
	PRINTFORML 요괴의 산 위에 있는 모리야 신사의 카제하후리
	PRINTFORML 원래는 바깥 세계의 거주자로 야사카 카나코·모리야 스와코의 두 신과 함께 이사 왔다
	PRINTL
	PRINTFORML 성격은 매우 밝고 솔직한 인간이지만 뭔가 어긋나 있다
	PRINTFORML 또한 가끔 성실해 자신가인 일면이 얼굴을 들여다 보게 하는 일도 있다
	PRINTFORML 새로운 인간이 밖의 세계로부터 왔다고 하는 소문을 듣고
	PRINTFORML 환상들이 동료이자 첫 후배가 생길지도 모른다며 의욕에 넘쳐 있다
	PRINTL
	PRINTFORML 최근 신자 획득을 노리고 마을 쪽에서 포교를 시작한 것 같다
	;조건을 기술하는 부분에 난다
	GOTO 다음의시나리오등장의조건
ENDIF

;제1장
IF CFLAG:31:3102 == -1
	;「제1장　처음 뵙겠습니다」
	IF CHAPTER_공략중_K31(0)
		FONTSTYLE 1
		PRINTFORML 「제1장　처음 뵙겠습니다」
		FONTREGULAR
		PRINTFORML 인간이 밖의 세계로부터 왔다고 하는 소문을 들은 사나에
		PRINTFORML 환상들이 동료로서 첫 후배가 생길지도 모른다고 하는 것으로 당장 말을 건네보기로
		PRINTFORML 이야기해보니 딱히 무슨 능력도 없을 법한 평범한 인간이었기에
		PRINTFORML 간신히, 착실한 인간의 아는 사람이 생긴다고 기뻐한 결과, 마지막에 미끄덩했다
		PRINTL
		PRINTFORML 최근에는 %CALLNAME:MASTER% 상대로 어떻게 선배 행세를 할지 생각하고 있다
		SIF EVENT_CHECK_K31(5) || EVENT_CHECK_K31(6)
			PRINTFORML 마을에서의 포교는 라이벌이 많아 별로 잘 풀리지 않는 것 같다…
		;조건을 기술하는 부분에 난다
		GOTO 다음의시나리오등장의조건
	ENDIF
	;「제1장　만나고 3초만에 뚝딱 데이트!?」
	IF CHAPTER_공략중_K31(10000)
		;레어 루트는 색을 바꾸어 본다
		CALL M_KOJO_COLOR_K31
		FONTSTYLE 1
		PRINTFORML 「제1장　만나고 3초만에 뚝딱 데이트!?」
		FONTREGULAR
		PRINTFORML 정신 차리고 보니 모리야 신사의 복권 경품이 되어 있던 불쌍한 카제하후리
		PRINTFORML 보통이라면 금방 알아채고 관두게 했을 테지만
		PRINTFORML 무슨 「기적」인지 알아챘을 때에는, 운명의 복권이 이미 뽑힌 다음이었다
		PRINTL
		PRINTFORML 어쩔 수 없이 데이트를 한 사나에였지만, 산의 무리에게 그 모습을 확실히 볼 수 있어
		PRINTFORML 요괴의 산은 지금, 사나에의 데이트의 화제로 화제거리가 되고 있다
		RESETCOLOR
		;조건을 기술하는 부분에 난다
		GOTO 다음의시나리오등장의조건
	ENDIF
ENDIF

;제2장
IF CFLAG:31:3103 == -1
	;「제2장　모리야 씨댁의 현인신」
	IF CHAPTER_공략중_K31(10)
		FONTSTYLE 1
		PRINTFORML 「제2장　모리야 씨댁의 현인신」
		FONTREGULAR
		PRINTFORML 최근, 실은 이상한 인간인 것이 들키고 있는 카제하후리
		PRINTFORML 처음으로 온 후배에게 말을 건네 가는 동안, 밖의 화제로 의욕 투합 한다
		PRINTFORML 엉뚱한 일로부터, %CALLNAME:MASTER%에 일의 큰 일임을 알려지고
		PRINTFORML 마을에서의 권유를 도움을 받게 되었다
		PRINTL
		PRINTFORML 일을 도와 주는 %CALLNAME:MASTER%에는, 정말로 감사하고 있지만
		PRINTFORML 정말로 도움을 받아도 좋은 것인지와 불안하게 되어 있다
		;조건을 기술하는 부분에 난다
		GOTO 다음의시나리오등장의조건
	ENDIF
	;「제2장　신자 획득 대작전」
	IF CHAPTER_공략중_K31(20)
		FONTSTYLE 1
		PRINTFORML 「제2장　신자 획득 대작전」
		FONTREGULAR
		PRINTFORML 최근, 실은 이상한 인간인 것이 들키고 있는 카제하후리
		PRINTFORML 처음으로 온 후배에게 말을 건네 가는 동안, 밖의 화제로 의욕 투합 한다
		PRINTFORML 엉뚱한 일로부터, %CALLNAME:MASTER%에 일의 큰 일임을 알려지고
		PRINTFORML 마을에서의 권유를 도움을 받게 되었다
		PRINTL
		PRINTFORML 일을 도와 주는 %CALLNAME:MASTER%에는, 정말로 감사하고 있지만
		PRINTFORML 본인의 눈앞에서, 「이상한 종교의 권유에 손을 대어 버렸다」 등이라고 말하는 것은 그만두면 좋겠다고 생각하고 있다
		;조건을 기술하는 부분에 난다
		GOTO 다음의시나리오등장의조건
	ENDIF
	;「제2장　복권으로 이어진 연분」
	IF CHAPTER_공략중_K31(10010)
		;레어 루트는 색을 바꾸어 본다
		CALL M_KOJO_COLOR_K31
		FONTSTYLE 1
		PRINTFORML 「제2장　복권으로 이어진 연분」
		FONTREGULAR
		PRINTFORML 마을에서의 권유가 너무 바빠 손길이 닿지 않게 되었기 때문에, 최근 한가한 것 같은 인간을 찾고 있으면(자)
		PRINTFORML 눈앞에, 추정 무직의 인간이 있었으므로 이것 다행이라고 스카우트 했다
		PRINTFORML 그러나, 소문을 좋아하는 인요(주로 텐구)의 눈에 띄고 지 않을 리가 없고
		PRINTFORML 간신히 멈추기 시작했다 소문이 재연하는 결과에…
		PRINTL
		PRINTFORML 뭐양 겨울밤과 일을 도와 주는 %CALLNAME:MASTER%에는, 감사하고 있다
		PRINTFORML 다만, 만남이 만남이었으므로 직접 말로 할 것은 없을 것이다,……아마
		RESETCOLOR
		;조건을 기술하는 부분에 난다
		GOTO 다음의시나리오등장의조건
	ENDIF
	;「제2장　기적을 일으키는 법」
	IF CHAPTER_공략중_K31(10020)
		;레어 루트는 색을 바꾸어 본다
		CALL M_KOJO_COLOR_K31
		FONTSTYLE 1
		PRINTFORML 「제2장　기적을 일으키는 법」
		FONTREGULAR
		PRINTFORML 마을에서의 권유가 너무 바빠 손길이 닿지 않게 되었기 때문에, 최근 한가한 것 같은 인간을 찾고 있으면(자)
		PRINTFORML 눈앞에, 추정 무직의 인간이 있었으므로 이것 다행이라고 스카우트 했다
		PRINTFORML 소문을 좋아하는 인요(주로 텐구)의 눈에 띄고 지 않을 리가 없지만
		PRINTFORML 「지금은 자유롭게 행동하게 하는 편이 좀 더 재미있어진다」라고 공식상은 조용한 그대로되고 있다
		PRINTL
		PRINTFORML 뭐양 겨울밤과 일을 도와 주는 %CALLNAME:MASTER%에는, 감사하고 있지만
		PRINTFORML 기세나 무엇인가로 억지로 꽉 누른 것 같은 생각이 들어, 마음이 아프고 있다
		PRINTL
		PRINTFORML 아무래도 최근 일어나고 있는 사건에 흥미를 가진 것 같고, 여러 가지 곳에서 탐문을 실시하고 있는 것 같다…
		RESETCOLOR
		;조건을 기술하는 부분에 난다
		GOTO 다음의시나리오등장의조건
	ENDIF
ENDIF

$다음의시나리오등장의조건

;##################################################################################
;③현재의 사나에와의 관계성의 표시
;##################################################################################
PRINTL 
PRINTL 
CALL M_KOJO_COLOR_K31
PRINTFORML 【현재의 관계】
PRINTL 
CALL COLORMESSAGE(@"　　%마스터와% 사나에의 현재의 관계성은, 「", C_YELLOW, 0,0)
FONTSTYLE 1
IF !CFLAG:31:18
	SETCOLOR C_L_GRAY
	PRINTFORM 안면 없음
ELSEIF CFLAG:31:3102 == -1
	SETCOLOR C_WHITE
	PRINTFORM 타인
ELSEIF CFLAG:31:3103 == -1
	SETCOLOR C_P_BLUE
	PRINTFORM 지인
ELSEIF CFLAG:31:3104 == -1
	SETCOLOR C_P_YELLOW
	PRINTFORM 친구
ELSEIF CFLAG:31:3105 == -1
	SETCOLOR C_GREEN
	PRINTFORM 사모
ELSEIF CFLAG:31:3106 == -1
	SETCOLOR C_RED
	PRINTFORM 연모
ELSE
	SETCOLOR C_PINK
	PRINTFORM 연인
ENDIF
FONTREGULAR
CALL COLORMESSAGE("」입니다", C_YELLOW, 1,0)
RESETCOLOR
PRINTL 
;##################################################################################
;④다음의 시나리오에 진행되는 조건의 표시
;##################################################################################
CALL M_KOJO_COLOR_K31
PRINTFORML 【다음에 진행되는 조건】
PRINTL 
PRINT 　　
SETCOLOR C_YELLOW
CALL 다음의시나리오조건_K31(CFLAG:31:3100, CFLAG:31:3101, CFLAG:31:3102, CFLAG:31:3103, CFLAG:31:3104, CFLAG:31:3105, CFLAG:31:3106)
RESETCOLOR
RETURN 1

@다음의시나리오조건_K31(선택지, 제1장, 제2장, 제3장, 제4장, 제5장, 제6장)
#DIM 선택지
#DIM 제1장
#DIM 제2장
#DIM 제3장
#DIM 제4장
#DIM 제5장
#DIM 제6장

;사나에 씨와 안면전
IF !CFLAG:31:18
	PRINTFORML 사나에 씨와 만난다
	PRINTL 
	RETURN
ENDIF

;제1장
IF 제2장 == -1
	;「제1장　처음 뵙겠습니다」
	IF 제1장 == 0
		IF !(선택지 / 10)
			PRINTFORML 호감도 100으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 100)
			PRINTFORML 사나에 씨의 업무중에 「회화」 + %마스터가% 데이트중이 아니다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 1000)
			PRINTFORML 호감도 500 신뢰도 50으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
	ENDIF
	;「제1장　만나고 3초만에 뚝딱 데이트!?」
	IF 제1장 == 10000
		IF !(선택지 / 10)
			PRINTFORML 「회화」를 실시하는 + %마스터가% 데이트중이 아닌 + 그 날 최초로 만난다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 100)
			PRINTFORML 호감도 300으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 1000)
			PRINTFORML 호감도 500 신뢰도 50으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
	ENDIF
ENDIF

;제2장
IF 제3장 == -1
	;「제2장　모리야 씨댁의 현인신」
	IF 제2장 == 10
		IF !(선택지 / 1000)
			PRINTFORML 호감도 500으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 10000)
			PRINTFORML 호감도 700으로 「일을돕는다」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 100000)
			PRINTFORML 호감도 900으로 「일을돕는다」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 1000000)
			;PRINTFORML 호감도 1000 신뢰도 100으로 「회화」를 실시한다
			PRINTFORML To Be Continued...
			PRINTL 
			RETURN
		ENDIF
	ENDIF
	;「제2장　신자 획득 대작전」
	IF 제2장 == 20
		IF !(선택지 / 1000)
			PRINTFORML 호감도 500으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 10000)
			PRINTFORML 호감도 700으로 「일을돕는다」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 100000)
			PRINTFORML 호감도 900으로 「일을돕는다」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 1000000)
			;PRINTFORML 호감도 1000 신뢰도 100으로 「회화」를 실시한다
			PRINTFORML To Be Continued...
			PRINTL 
			RETURN
		ENDIF
	ENDIF
	;「제2장　복권으로 이어진 연분」
	IF 제2장 == 10010
		IF !(선택지 / 1000)
			PRINTFORML 호감도 500으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 10000)
			PRINTFORML 호감도 700으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 100000)
			PRINTFORML 호감도 900으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 1000000)
			;PRINTFORML 호감도 1000 신뢰도 100으로 「회화」를 실시한다
			PRINTFORML To Be Continued...
			PRINTL 
			RETURN
		ENDIF
	ENDIF
	;「제2장　기적을 일으키는 법」
	IF 제2장 == 10020
		IF !(선택지 / 1000)
			PRINTFORML 호감도 500으로 「회화」를 실시한다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 10000)
			PRINTFORML 호감도 700이상 + 그 날 최초로 만난다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 100000)
			PRINTFORML 호감도 900이상 + 그 날 최초로 만난다
			PRINTL 
			RETURN
		ENDIF
		IF !(선택지 / 1000000)
			;PRINTFORML 호감도 1000 신뢰도 100으로 「회화」를 실시한다
			PRINTFORML To Be Continued...
			PRINTL 
			RETURN
		ENDIF
	ENDIF
ENDIF

@플래그초기화_K31()
;----------------------------------------------------------------------------------------
;시나리오 진행 플래그
;장래적으로 3100 접수대를 1000 접수대에 이사할 예정이므로 함수로 분할
;----------------------------------------------------------------------------------------
;선택지 기록 플래그
CFLAG:31:3100 = 0
;장시나리오 기록 플래그
CFLAG:31:3101 = -1
CFLAG:31:3102 = -1
CFLAG:31:3103 = -1
CFLAG:31:3104 = -1
CFLAG:31:3105 = -1
CFLAG:31:3106 = -1

;ONCE 함수의 초기화
CSTR:31:1 = ""
;FIRSTTIME 함수의 초기화
CSTR:31:0 = ""
;----------------------
;아이템 소지 플래그
;----------------------
CFLAG:31:3110 = 0

RETURN

;----------------------------------------------------------------------
;@CHECK_자기방에있을까_K31(ARG)
;ARG:캐릭터 번호
;돌아가 값　1　그 캐릭터는 자기 방에 있어, 0　그 캐릭터는 자기 방에 없어
;----------------------------------------------------------------------
@CHECK_자기방에있을까_K31(ARG)
#FUNCTION
SIF CFLAG:ARG:현재위치 == CFLAG:ARG:초기위치
	RETURNF 1
RETURNF 0
