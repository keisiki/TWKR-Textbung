
@TSC_26
PRINTFORML 결계의 일그러짐이 느껴진다...
PRINTFORML 결계의 틈새 속으로 들어가볼까?
CALL ASK_YN
IF RESULT
	RETURN
ELSE
	CALL 결계탐색
	TIME += 5
ENDIF
RETURN 1


@TSC_NAME26
#DIMS DYNAMIC 커맨드이름
커맨드이름 = 결계의틈새 속으로
RESULTS = %커맨드이름%

@TSC_ABLE26

IF !GROUPMATCH(CFLAG:MASTER:현재위치,GET_MAP_REPLACEMENT(506),GET_MAP_REPLACEMENT(25),GET_MAP_REPLACEMENT(634))
    RETURN 0
ENDIF
;기력 0
SIF BASE:MASTER:기력 <= 0
	RETURN 0
SIF CFLAG:우후후 == 2
	RETURN 0
;정지 중에는 불가
SIF FLAG:70
	RETURN 0
RETURN 2


@결계탐색


#DIM DYNAMIC TEMP_LINE
;세로, 가로
VARSET TT_맵
VARSET TT_NOW
TT_TIMEOUT = 10000
TT_맵:(TT_NOW:0):(TT_NOW:1) = 1 ; 혹시몰라 입구설정
CALL 결계_맵생성
;---------------------
$결계맵루프
TEMP_LINE = LINECOUNT
DRAWLINE
ALIGNMENT CENTER
CALL 결계맵표시
ALIGNMENT LEFT
DRAWLINE
PRINT 　　
PRINTBUTTON "[↑]",1
PRINT 　　　　
PRINTFORM %결계_COMMENT(TT_맵:(TT_NOW:0):(TT_NOW:1))%
PRINTL
PRINTBUTTON "[←]",2
PRINT 　　
PRINTBUTTON "[→]",3
PRINT 　　
PRINTBUTTON "[상호작용]",5
PRINTFORM 　　　　　지역 안정도 {TT_TIMEOUT/100}.{TT_TIMEOUT%100}％
IF TT_TIMEOUT < 9500
	PRINTFORM (이형의 존재 감지됨) 
ENDIF
IF TT_TIMEOUT < 8999
	PRINTFORM (공간왜곡 발생중) 
ENDIF
PRINTL
PRINT 　　
PRINTBUTTON "[↓]",4
PRINTL
INPUT
IF GROUPMATCH(RESULT,1,2,3,4)
	SELECTCASE RESULT
		CASE 1
			IF TT_NOW:0 == 0 ;세로칸 0번이면
				;여기에 걸리면 저 밑으로 가게 된다, 아마도
			ELSEIF !결계_PASSABLE(TT_맵:(TT_NOW:0 - 1):(TT_NOW:1))
			ELSE
				TT_TIMEOUT -= RAND:15 + 1
				TT_NOW:0 --
				CALL 결계일그러짐
			ENDIF
		CASE 2
			IF TT_NOW:1 == 0 ;가로칸 0번이면
				;여기에 걸리면 저 밑으로 가게 된다, 아마도
			ELSEIF !결계_PASSABLE(TT_맵:(TT_NOW:0):(TT_NOW:1 - 1))
			ELSE
				TT_TIMEOUT -= RAND:15 + 1
				TT_NOW:1 --
				CALL 결계일그러짐
			ENDIF
		CASE 3
			IF TT_NOW:1 == TT_맵MAX-1 ;가로칸 끝번이면
				;여기에 걸리면 저 밑으로 가게 된다, 아마도
			ELSEIF !결계_PASSABLE(TT_맵:(TT_NOW:0):(TT_NOW:1 + 1))
			ELSE
				TT_TIMEOUT -= RAND:15 + 1
				TT_NOW:1 ++
				CALL 결계일그러짐
			ENDIF
		CASE 4
			IF TT_NOW:0 == TT_맵MAX-1 ;세로칸 끝번이면
				;여기에 걸리면 저 밑으로 가게 된다, 아마도
			ELSEIF !결계_PASSABLE(TT_맵:(TT_NOW:0 + 1):(TT_NOW:1))
			ELSE
				TT_TIMEOUT -= RAND:15 + 1
				TT_NOW:0 ++
				CALL 결계일그러짐
			ENDIF
	ENDSELECT
ELSEIF RESULT == 5
	;상호작용
	CALL 결계_상호작용(TT_맵:(TT_NOW:0):(TT_NOW:1))
	SELECTCASE RESULT
		CASE -1

		CASE 1
			DOWNBASE:MASTER:기력 = MAXBASE:MASTER:기력*((10000 - TT_TIMEOUT))/10000
			TIME += (10000-TT_TIMEOUT)/100
			RETURN
	ENDSELECT
	IF RESULT != -1
		TT_TIMEOUT -= RAND:50 + 1
	ENDIF
	CALL 결계일그러짐
ELSE
	CLEARLINE LINECOUNT - TEMP_LINE
	GOTO 결계맵루프
ENDIF
IF TT_TIMEOUT <= 0
	PRINTFORMW 불안정해진 결계에서 튕겨져 나와버렸다!
	DOWNBASE:MASTER:기력 = MAXBASE:MASTER:기력*((10000 - TT_TIMEOUT))/10000
	TIME += (10000-TT_TIMEOUT)/100
	RETURN
ENDIF
CLEARLINE LINECOUNT - TEMP_LINE
GOTO 결계맵루프

@결계일그러짐
#DIM DYNAMIC 왜곡보너스
SELECTCASE TT_TIMEOUT/100
	CASE IS < 5
		왜곡보너스 = -13
	CASE IS < 10
		왜곡보너스 = -8
	CASE IS < 20
		왜곡보너스 = -4
	CASE IS < 30
		왜곡보너스 = -2
	CASE IS < 40
		왜곡보너스 = -1
	CASE IS < 50
		왜곡보너스 = 0
	CASE IS < 60
		왜곡보너스 = 1
	CASE IS < 70
		왜곡보너스 = 2
	CASE IS < 80
		왜곡보너스 = 4
	CASE IS < 90
		왜곡보너스 = 6
	CASEELSE
		왜곡보너스 = 8
ENDSELECT
IF TT_TIMEOUT < 8999
	;공간왜곡 시작
	LOCAL:0 = RAND:TT_맵MAX
	LOCAL:1 = RAND:TT_맵MAX
	IF TT_NOW:0 == LOCAL && TT_NOW:1 == LOCAL:1
		;실행없음
	ELSE
		IF TT_맵:(LOCAL:0):(LOCAL:1) == 1
			;역시 실행없음
		ELSE
			IF !명중판정(15+왜곡보너스)
				IF RAND:3 == 0
					TT_맵:(LOCAL:0):(LOCAL:1) = 3
				ELSE
					TT_맵:(LOCAL:0):(LOCAL:1) = 0
				ENDIF
			ENDIF
		ENDIF
	ENDIF
ENDIF
IF TT_TIMEOUT < 9500
	;요괴 등장
	IF !명중판정(85+왜곡보너스)
		PRINTFORMW 어디선가 희미한 망령이 나타나 길을 가로막았다!
		ADDCHARA 144
		TARGET = CHARANUM -1
		CALLNAME:TARGET = 희미한 망령
		NAME:TARGET = 희미한망령
		BASE:TARGET:체력 = 800
		EQUIP:상반신윗도리2 = 1
		EQUIP:상반신속옷1 = 1
		TEQUIP:상반신착의상황 = 1
		TEQUIP:하반신착의상황 = 1
		ABL:TARGET:전투능력 = RAND:4 + 3
		ABL:TARGET:레벨 = (RAND:20 + 20 + (ABL:MASTER:레벨/7))
		CFLAG:TARGET:힘 = RAND:20 + 20 + (CFLAG:MASTER:힘/6)
		CFLAG:TARGET:지성 = RAND:20 + 12 + (CFLAG:MASTER:지성/6)
		CFLAG:TARGET:속도 = RAND:20 + 20 + (CFLAG:MASTER:속도/6)
		CFLAG:TARGET:인내 = RAND:15 + 27 + (CFLAG:MASTER:인내/4)
		CFLAG:TARGET:운 = RAND:20 + 7 + (CFLAG:MASTER:운/5)
		CFLAG:물리내성 = 15 * ABL:TARGET:레벨
		CFLAG:정신내성 = -5 * ABL:TARGET:레벨
		TALENT:TARGET:정화 = 1
		TALENT:TARGET:탄막소사 = 1
		TALENT:TARGET:전투스타일 = 1
		후처리인터셉트 = 1
		경험치인터셉트 = 1
		CALL 뉴탄막전투(MASTER,TARGET,1)
		DELCHARA TARGET
		TARGET = 0
		경험치인터셉트 = 0
		SELECTCASE 후처리인터셉트승패여부
		CASE 0
			;타겟 패배
			PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다
			TT_TIMEOUT -= RAND:10
			
		CASE 1
			;무승부
			PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다...
			TT_TIMEOUT -= RAND:25
		CASE 2
			PRINTFORML 영체는 돌연히 사라졌다
			PRINTFORML 그러나 결계의 불안정화가 한층 더 가속된 것 같다
			TT_TIMEOUT -= RAND:100 + 1
		ENDSELECT
		PRINTW
	ENDIF
ENDIF

@결계맵표시
FOR LOCAL,0,TT_맵MAX+2
	PRINTFORM ■
NEXT
PRINTL


FOR LOCAL,0,TT_맵MAX
	PRINTFORM ■
	FOR LOCAL:1,0,TT_맵MAX
		IF LOCAL == TT_NOW:0 && LOCAL:1 == TT_NOW:1
			PRINT ＠
		ELSE
			IF TT_맵_UNSEEN(LOCAL,LOCAL:1)
				PRINTFORM %결계_기호표시(TT_맵:(LOCAL):(LOCAL:1))%
			ELSE
				PRINTFORM ·
			ENDIF
		ENDIF
	NEXT
	PRINTFORML ■
NEXT

FOR LOCAL,0,TT_맵MAX+2
	PRINTFORM ■
NEXT
PRINTL

@결계_상호작용(ARG)
SELECTCASE ARG
	CASE 0
		;공란
		RETURN -1
	CASE 1
		;입구
		PRINTFORML 결계의 틈새에서 나갈까?
		CALL ASK_YN
		IF !RESULT
			RETURN 1
		ENDIF
		RETURN -1
	CASE 2
		;건물벽
		RETURN -1
	CASE 3
		;일그러짐
		RETURN -1
	CASE 4
		;조교전의 제단
		IF !FLAG:조교전
			PRINTFORML 제단 위의 수상쩍은 책을 발견했다...
			PRINTFORML 주우려고 손을 뻗는 찰나, 정체모를 망령이 솟아나 책을 빼앗았다!
			PRINTFORMW 정체 모를 망령은 공격적인 자세를 취했다...
			CALL 조교사의망령
			SELECTCASE 후처리인터셉트승패여부
				CASE 0
					;타겟 패배
					PRINTFORMW 조교사의 망령이 힘을 잃고 흩어져 사라져 갔다...
					PRINTFORMW %마스터는% 그 밑에 떨어진 검은 책을 주워들었다
					PRINTFORMW 낡은 표지에는 희미하게 원 제목이 적혀 있었다
					PRINTL
					PRINTFORML 「동방 조교전」
					PRINTW
					PRINTFORMW %마스터는% 품 속에 조교전을 챙겼다
					FLAG:조교전 = 1
					TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
				CASEELSE
					PRINTFORMW 조교사의 망령은 %마스터를% 경계하는 듯한 자세를 취하더니, 이내 다시 사라졌다
					PRINTFORMW 조교전은 아직 제단 위에 조용히 놓여 있을 뿐이었다	
					TT_TIMEOUT -= 1000
			ENDSELECT
		ELSE
			PRINTFORML 제단 위에는 누군가의 시체가 소중한듯이 낡은 공책을 쥐고 있었다
			PRINTFORML 다 닳아서 제목조차 읽기 힘든 그 책의 이름은...아마도 조교전인 것 같았다
		ENDIF
	CASE 5
		;돈
		PRINTFORMW 약간 옛스러운 동전을 주웠다!
		LOCAL = (RAND:10 + 1) * 1000
		PRINTFORMW {LOCAL}원 얻었다
		MONEY += LOCAL
		TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
	CASE 6
		;바깥세계의 환영
		PRINTFORMW 바깥세계의 모습이 보인다...
		PRINTFORMW 손을 뻗으려 했으나 무언가에 가로막혀버렸다
		PRINTFORMW 아무래도 아직은 열 수없는 모양이다
ENDSELECT

@결계_기호표시(ARG)
#FUNCTIONS

SELECTCASE ARG
	CASE 0
		;공란
		RETURNF "　"
	CASE 1
		;입구
		RETURNF "♨"
	CASE 2
		;건물 벽
		RETURNF "□"
	CASE 3
		;일그러짐
		RETURNF "＃"
	CASE 4
		;제단
		RETURNF "▣"
	CASE 5
		;돈
		RETURNF "￦"
	CASE 6
		;바깥세계의 환영
		RETURNF "◎"
ENDSELECT

@결계_PASSABLE(ARG)
#FUNCTION
SELECTCASE ARG
	CASE 0
		;공란
		RETURNF 1
	CASE 1
		;입구
		RETURNF 1
	CASE 2
		;건물 벽
		RETURNF 0
	CASE 3
		;일그러짐
		RETURNF 0
	CASE 4
		;제단
		RETURNF 1
	CASE 5
		;돈
		RETURNF 1
	CASE 6
		;바깥세계의 환영
		RETURNF 1
ENDSELECT

@결계_COMMENT(ARG)
#FUNCTIONS
SELECTCASE ARG
	CASE 0
		;공란
		RETURNF ""
	CASE 1
		;입구
		RETURNF "출구"
	CASE 2
		;건물 벽
		RETURNF ""
	CASE 3
		;일그러짐
		RETURNF ""
	CASE 4
		;제단
		RETURNF "무언가가 올려져 있는 제단"
	CASE 5
		;돈
		RETURNF "반짝이는 무언가"
	CASE 6
		;바깥세계의 환영
		RETURNF "높디 높은 빌딩과 사람들의 인파가 옅보인다"
ENDSELECT


@결계_맵생성

LOCAL = RAND:5
;LOCAL = 0 ;일단은 테스트용이니만큼
SELECTCASE LOCAL
	CASE 0
		;숨겨진 마을
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,2,2,0,2,2,2,0,0,0,2,2,0,2,2,2,0,0,0,2,2,0,2,2,2,0,0,0,0,0,2,2,2
		TT_맵:03:0 = 0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,0
		TT_맵:04:0 = 0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,5
		TT_맵:05:0 = 0,0,0,2,2,2,2,2,2,3,0,0,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2
		TT_맵:07:0 = 0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:08:0 = 0,0,0,2,2,0,2,2,2,0,0,3,2,2,0,2,2,2,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0
		TT_맵:09:0 = 0,0,0,2,0,0,0,0,2,0,0,3,3,3,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,3,0,0,0
		TT_맵:10:0 = 0,0,0,2,0,0,3,3,2,0,0,0,2,3,3,3,0,2,0,3,0,2,0,0,0,5,2,0,0,0,0,0,0,0,0
		TT_맵:11:0 = 0,0,0,2,2,2,3,3,2,3,3,0,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,0,0,0,0,3,0,0,0
		TT_맵:12:0 = 0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,3,0,0,0,0,0,0
		TT_맵:14:0 = 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,0,2,3,3,3,0,2,0,0,0,0,0,0,0,0
		TT_맵:15:0 = 3,3,3,3,3,3,3,0,0,0,3,3,0,0,0,3,3,3,3,3,3,3,3,0,0,0,2,0,0,0,3,0,0,0,0
		TT_맵:16:0 = 3,3,3,3,0,0,0,0,0,0,3,0,0,0,0,0,0,3,0,0,3,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,0,0,0,0,0,2,0,2,2,2,0,2,0,0,0,0,0,3,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0
		TT_맵:19:0 = 0,0,0,2,2,2,0,2,2,2,0,0,0,0,3,0,3,0,0,3,0,0,0,0,0,3,3,3,0,0,0,3,3,0,0
		TT_맵:20:0 = 0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,3,3,0,0,0,0,3,3,3,3,0,3,3,0,3,3,0,0,0
		TT_맵:21:0 = 0,0,0,2,0,5,0,0,0,2,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0
		TT_맵:22:0 = 0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,3,3,3,0,2,2,2,2,2,0,2,2,2,2,2,0,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,3,2,5,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,3,3,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,2,0,0,0,0,3,3,3,3,3,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,2,0,0,5,3,3,0,0,2,0,0,0,0,0,0,2,0,0,0,5,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,2,0,0,3,3,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,3,0,0,2,0,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,2,0,0,3,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,2,0,5,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,4,0,0,0,0,2,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	CASE 1
		;돈 창고
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,0
		TT_맵:09:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:10:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,2,0,0,0,2,0,0,5,0,0,0,0,0,0,0,0,5,0,0,5,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,5,0,0,0,0,0,5,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,5,0,0,0,5,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,2,0,3,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,2,0,0,0,2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,5,0,0,0,5,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,2,0,0,0,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	CASE 2
		;바깥세계로의 길
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:09:0 = 3,3,0,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:10:0 = 3,3,3,3,0,0,3,3,3,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,0,0,0,0,0,0,0,3,3,0,3,3,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2
		TT_맵:25:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6
		TT_맵:30:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,5,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,6
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,6,6,6
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,6,6,6
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,6,0,6,6,6
	CASE 3

	CASE 4
		;샘플용 빈 맵
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:09:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:10:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
ENDSELECT

@TT_맵_UNSEEN(ARG,ARG:1)
#FUNCTION
IF ABS(TT_NOW:0-ARG) <= 3 && ABS(TT_NOW:1-ARG:1) <= 3
	SIF ABS(TT_NOW:0-ARG) == 3 && ABS(TT_NOW:1-ARG:1) == 3
		RETURNF 0
	RETURNF 1
ENDIF
RETURNF 0