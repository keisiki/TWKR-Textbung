;稼ぐ手段の紅魔カジノに対して雰囲気+ロールプレイ用な感じで差別化したいなあ
;ほとんどのコードをカジノから引っ張ってきてます
@賭場_導入
#DIM 退店フラグ
退店フラグ = 0
DRAWLINE
CALL 賭場_台詞("入店中")
DRAWLINE
PRINTFORML 
PRINTFORML ～코마쿠사 도박장～
PRINTFORML 　보유금액　　%금액표시(MONEY), 13, RIGHT%
PRINTFORML 　코마후다　　%세자리구분(KOMAFUDA:MASTER), 13, RIGHT%
PRINTFORML 
PRINTFORML [1]쵸한바쿠치로 논다
PRINTFORML [2]친치로로 논다
;PRINTFORML [3]おいちょかぶで遊ぶ-札表示のスクリプト組めたらやりたい
;PRINTFORML [4]ナンパする-お金で即セフレになるモブ子を湧かせる、とか
;PRINTFORML [5]酒を頼む-酔っ払うとダイス判定に極小メリット＆強烈なデバフをつける、とか
;PRINTFORML [6]おだいじん-モブ子も酔うとクリファン率上がる、とか
PRINTFORML 
PRINTFORML [8]코마후다 교환
PRINTFORML [9]설명을 듣는다
PRINTFORML [0]돌아간다
DO
	INPUT
	SELECTCASE RESULT
		CASE 0
			退店フラグ = 1
			BREAK
		CASE 1
			IF KOMAFUDA:0 < 50
				CALL COLORMESSAGE(@"「손님, 패 없이는 놀 수 없으니까」", 0xD37CD0, 1, 0)
				CALL COLORMESSAGE(@"「먼저 패로 교환해줘」", 0xD37CD0, 2, 0)
				PRINTFORMW 코마후다가 100장 이상 필요합니다.
				BREAK
			ENDIF
			CALL COLORMESSAGE("「그럼 어느 판에서 놀지 결정해줘」", 0xD37CD0, 1, 0)
			{
			 CALL ASK_M("　어린이용 놀이터　 :판돈 최대치=200장", KOMAFUDA:0 >= 100,
						"　신사 숙녀의 사교장:판돈 최대치=500장", KOMAFUDA:0 >= 250,
						"　화끈한 도박장　　 :판돈 최대치=1000장", KOMAFUDA:0 >= 500,
						"　수　　 라 　　장　:판돈 최대치=？？？（미실장)", 0,
						"　역시 그만둔다", 1)
			}
			LOCAL = RESULT
			IF RESULT == 4
				CALL COLORMESSAGE(@"「그래, 마음이 내키면 다시 말 걸어줘」", 0xD37CD0, 2, 0)
			ELSE
				CALL COLORMESSAGE(@"「그럼 주사위를 흔들 준비를 해볼까」", 0xD37CD0, 1, 0)
				CALL COLORMESSAGE(@"「사람이 모이면 시작할게」", 0xD37CD0, 2, 0)
				RESULT = 0
				CALL 丁半博打_メイン(LOCAL)
				退店フラグ = RESULT
			ENDIF
		CASE 2
			IF KOMAFUDA:0 < 50
				CALL COLORMESSAGE(@"「손님, 패 없이는 놀 수 없으니까」", 0xD37CD0, 1, 0)
				CALL COLORMESSAGE(@"「먼저 패로 교환해줘」", 0xD37CD0, 2, 0)
				PRINTFORMW 코마후다가 40장 이상 필요합니다.
				BREAK
			ENDIF
			CALL COLORMESSAGE("「그럼 어느 판에서 놀지 결정해줘」", 0xD37CD0, 1, 0)
			{
			 CALL ASK_M("　어린이용 놀이터　 :판돈 최대치=20장", KOMAFUDA:0 >= 40,
						"　신사 숙녀의 사교장:판돈 최대치=200장", KOMAFUDA:0 >= 400,
						"　화끈한 도박장　　 :판돈 최대치=2000장（미실장)", 0,
						"　수　　 라 　　장　:판돈 최대치=？？？（미실장)", 0,
						"　역시 그만둔다", 1)
			}
			LOCAL = RESULT
			LOCALS:0 '= "그래, 서로 사이좋게 즐기고 와", "그래, 잘 벌어와", "흐응, 재주껏 잘 해봐", "...뭐 말리지는 않을게", "어라, 마음이 바뀌었니?"
			RESULT = 0
			CALL COLORMESSAGE(@"「%LOCALS:LOCAL%」", 0xD37CD0, 2, 0)
			SIF LOCAL < 4
				CALL チンチロリン_メイン(LOCAL)
			退店フラグ = RESULT
		CASE 8
			CALL 賭場_コマ札交換
		CASE 9
			CALL 賭場_台詞("へるぷ")
		CASEELSE
			CLEARLINE 1
			CONTINUE
	ENDSELECT
	SIF NEMUKE() >= 700
		退店フラグ = 2
	BREAK
LOOP 1
IF 退店フラグ
	CALL 賭場_台詞("退店", 退店フラグ)
	RETURN
ENDIF
RESTART

;賭場システムメッセージ部分
;@CASINO_CHECK_EVENTをだいたい流用
@賭場_台詞(ARGS, ARG)
#DIM 賭場入店
#DIM 賭場退店
#DIM 人物
#DIM メッセージ
#DIM ラッキー
#DIMS モブ
#DIMS 自称
#DIMS 台詞
#DIMS 表情
人物 = FLAG:데이트상대
表情 = %\@ 人物 == 139 ? 怒り # 通常 \@%
メッセージ = 0
SELECTCASE ARGS
	CASE "入店中"
		;初回
		IF !FLAG:노름판방문일
			SELECTCASE 人物
				;神奈子/諏訪子/久侘歌/魅須丸/龍
				CASE 32, 33, 129, 138, 140
					{
					台詞 = 「이것 참...」
						/「%\@ 人物 == 138 ? 대텐구님이 # 신님이 직접 \@% 방문해 주셨다니 영광입니다.」
						/「여기는 신사 숙녀의 사교장」
						/「지금만큼은 속세의 근심도 전부 잊고 즐겨주시길...」
					}
				;典 
				CASE 139
					{
					台詞 = 「어라...」
						/「쿠다키츠네가 이곳엔 무슨 볼일이지?」
						/「여기는 신사 숙녀의 사교장」
						/「재미없는 장난은 하지 마.」
					}
				CASEELSE
					;山頂/山麓住まい
					IF GROUPMATCH(CSVCFLAG(人物, GETNUM(CFLAG, "자택위치")) / 100 , 7, 8)
						{
						台詞 = 「잘 와줬네, 환영해」
							/「여기는 신사 숙녀의 사교장」
							/「기분 전환에는 딱 맞는 곳이지」
							/「뭐, 너무 열중하지 않을 정도로만 즐겨줘」
						}
					ELSEIF !人物
						{
						台詞 = 「어라? 못 보던 얼굴이네...」
							/「어서와, 여기는 코마쿠사 도박장」
							/「신사 숙녀의 사교장이지」
							/「모처럼 왔으니까, 느긋하게 즐기고 가줘.」
						}
					ELSE
						{
						台詞 = 「어라? 여기서 만나는건 처음인가...」
							/「어서와, 여기는 코마쿠사 도박장」
							/「여기는 신사 숙녀의 사교장, 모두가 즐길 수 있는 곳이지」
							/「무심코 능력을 사용한다던가, 촌스러운 일은 하지 말아줘」
						}
					ENDIF
			ENDSELECT
			賭場入店 = 1
			賭場退店 = 0
			FLAG:노름판방문일 = DAY
			メッセージ = 1
		;その日初めての入店
		ELSEIF DAY - FLAG:노름판방문일
			SELECTCASE 人物
				;神奈子/諏訪子/久侘歌/魅須丸/龍
				CASE 32, 33, 129, 138, 140
					台詞 = 「어서오세요」/「일행과 휴식하시나요?」/「부디 느긋하게 즐겨주세요」
				;典
				CASE 139
					台詞 = 「어라어라, 이런 곳에 여우 요괴가 어슬렁거리고 있네?」/「주인님을 내버려둬도 괜찮은 입장인가?」
				CASEELSE
					台詞 = 「어머, 어서오세요」/「이곳이 마음에 드셨나요?」/「천천히 즐기고 가세요.」
			ENDSELECT
			賭場入店 = 1
			賭場退店 = 0
			FLAG:노름판방문일 = DAY
			メッセージ = 1
		;当日再来店
		ELSEIF 賭場入店 == 賭場退店
			SELECTCASE 人物
				;神奈子/諏訪子/久侘歌/魅須丸/龍
				CASE 32, 33, 129, 138, 140
					台詞 = 「어라, 또 오셨네요?」/「아무쪼록, 만족할 때까지 즐겨주세요」
				;典
				CASE 139
					台詞 = 「아까부터 쫄랑쫄랑...」/「무슨 흉계라도 꾸미고 있는 거야?」/「이상한 짓은 하지 말라고」
				CASEELSE
					台詞 = 「어라, 아직 더 놀고 싶은거야?」/「그래, 만족할 때까지 느긋하게 즐겨줘.」
			ENDSELECT
			賭場退店 ++
			メッセージ = 1
	;にぎやかし
		ELSEIF !RAND:3
			モブ = %TEXTR("야마와로/캇파/카라스텐구/둔갑너구리/둔갑여우/둔갑고양이/이나바/")%
			自称 = %TEXTR("わたし/私/あたい/あたし/")%
			SIF !RAND:4
				自称 = %TEXTR("ボク/僕/")%
			SIF FLAG:구상색
				SETCOLOR GET_CN_WORD_COLOR(STR:(RAND:13 + 2050))
			;しょーもないネタは低確率
			IF !RAND:25
				PRINTFORMDL 입구 옆에서 %モブ%가 머리를 쥐어싸고 있다...
				PRINTFORML 
				PRINTFORML 「소중한 돈을... %TEXTR("그 애의 /가게의 /누님이 맡겨둔 /")%돈까지... 전부 써버렸다...」
				PRINTFORMW 「남은게 겨우 200원... 어쩌지...」
				PRINTFORMDL ......꼴깍!
				PRINTFORML 「남은게 겨우 80원... 어쩌지...」
				PRINTFORMDL ...주스 마시고 있는거야?!
			ELSEIF RAND:2
				PRINTDATADL
					DATAFORM 화려하게 이긴 %モブ%가 떠들고 있다...
					DATAFORM 대승부에서 이긴 %モブ%가 일어나서 울부짖고 있다...
					DATAFORM 코마후다를 산더미처럼 안은 %モブ%가 들떠있다...
					DATAFORM 한방 제대로 딴 %モブ%가 깔깔 웃고 있다...
				ENDDATA
				PRINTFORML 
				PRINTDATAL LOCAL
					DATAFORM 「와, 여기서 이렇게 이길 수 있다니 최고네요!」\n「아, 힘들어, 너무 많이 이겨서 힘들어♪」
					DATAFORM 「어때!? 봤어!!」\n「이게 나의 실력이야!」
					DATAFORM 「이야- 미안한걸」\n 「나만 계속 이기고 말아서 정말 미안해♪」
					DATAFORM 「아하하하! 기분 좋네」\n「어이, 누군가 술 가져와!」\n「이 패배자들에게 은혜를 베풀어 주겠어♪」
					DATAFORM 「한판 더 할까?」\n「좋아 좋아, 몇 번이라도 상대해줄게」\n「지금의 나는 질 기분이 아닌걸!」
					DATAFORM 「사기? 무슨 소릴 하는거야」\n「속임수라니 그럴 리가 없잖아?」\n「자, 빨리 지불해 이 패배자♪」
				ENDDATA
				IF !LOCAL && !RAND:5 && ラッキー != DAY
					WAIT
					ラッキー = DAY
					PRINTFORML 
					PRINTFORML 「어이, 그쪽의 \@ TALENT:MASTER:성별 == 2 ? 형씨 # 누님 \@! 지금 어때?」
					PRINTFORML 「나, 지금 정말 기분이 좋아! 너한테도 이 행운을 조금 나눠줄게!」
					PRINTFORML 「자자, 잘 챙겨둬!」
					PRINTFORMDL 모르는 %モブ%한테 코마후다 100장을 받았다.
					KOMAFUDA:MASTER += 100
				ENDIF
			ELSE
				PRINTDATADL
					DATAFORM 입구 옆에서 %モブ%가 머리를 싸매고 있다...
					DATAFORM 허무한 눈을 한 %モブ%가 중얼거리고 있다...
					DATAFORM 멍한 표정의 %モブ%가 벽가에 주저앉아 있다...
					DATAFORM 안색이 나쁜 %モブ%가 멍하니 서 있다...
				ENDDATA
				PRINTFORML 
				PRINTDATAL
					DATAFORM 「중요한 돈인데... %TEXTR("그 애의 /가게의 /누님이 맡겨둔 /")%돈까지... 전부 써버렸다...」\n「어쩌지... 어쩌지...」
					DATAFORM 「내 돈... 내 돈.... 내 돈... 내 소중한 돈...」\n「전부 없어져 버렸어...」
					DATAFORM 「거기서 핀이 나오지만 않았어도 내 승리인데...」\n「왜, 왜 거기서...」
					DATAFORM 「............」\n「............」\n「저질렀다....」
					DATAFORM 「...차라리 마을로 나가서 인간을...」\n「...하지만 무녀한테 들키면...」\n「...지저의 온천이나 갈까...」
				ENDDATA
			ENDIF
		ELSE
			PRINTFORML 
			PRINTDATAL
				DATAFORM 도박장은 독특한 분위기에 휩싸여 있다...
				DATAFORM 큰 웃음소리와 가볍게 혀를 차는 소리가 들린다...
				DATAFORM 들떠있는 무리가 있다.\n아무래도 대승부가 벌어지고 있는 것 같다...
				DATAFORM 뭔가 말다툼하는 소리가 난다...\n...고 생각했더니 금방 조용해졌다...
				DATAFORM 울며 사과하는 소리가 들린다...\n...고 생각했더니 바로 밖으로 끌려나갔다...
				DATAFORM 아무도 %마스터를% 신경쓰지 않는다\n모두 앞에 있는 승부에 진지한 것 같다...
			ENDDATA
		ENDIF
	CASE "退店"
		;神奈子/諏訪子/久侘歌/魅須丸/龍
		IF GROUPMATCH(人物, 32, 33, 129, 138, 140)
			台詞 = 「돌아가시나요?」/「즐겨주셨다면 다행입니다.」
		;典
		ELSEIF 人物 == 139
			台詞 = 「그래」/「그럼, 출구는 저쪽」/「당장 돌아가」
		ELSE
			台詞 = 「즐거웠어?」/「다음에 또 와줘」
		ENDIF
		賭場退店 ++
		メッセージ = 1
	CASE "へるぷ"
		SIF FLAG:구상색
			SETCOLOR 0xD37CD0
		PRINTFORML 「그럼, 여기서의 규칙을 간단히 설명해 줄게」
		PRINTFORML 
		PRINTFORML 「여기서는 코마후다가 있어야 즐길 수 있어」
		PRINTFORML 「처음은 여기서 교환해가면 돼」
		PRINTFORML 「코마 1장 당 %금액표시(105)%로 교환 가능하고, 10장 단위로 부탁할게」
		PRINTFORML 「매입은 %금액표시(100)%, 당연하지만 이쪽은 장수는 상관없이 계산해줄게」
		PRINTFORML 
		PRINTFORML 「비율이 나쁘다고? 그건 수수료, 우리의 수익분이라는 거야」
		PRINTFORML 「우리한테는 소중한 자금이니까, 나쁘게 생각하지 말아줘」
		PRINTFORML 「그리고... 놀다가 코마가 부족해지면 거기서 끝이야」
		PRINTFORML 「부족한 코마는 그 자리에서 할증된 가격으로 구매해야 하니까.」
		PRINTFORML 「뭐, 파산하지 않게 조심하라고」
		$EXP_LOOP
		RESETCOLOR
		{
		 CALL ASK_M("돌아간다",1,
		 			"쵸한바쿠치란?", 1,
					"친치로란?", 1)
		}
		SIF FLAG:구상색
			SETCOLOR 0xD37CD0
		SELECTCASE RESULT
			CASE 0
			CASE 1
				PRINTFORML 「쵸한바쿠치는... 설명할 게 있나?」
				PRINTFORML 「던진 주사위가 정(짝수)인지 반(홀수)인지 알아맞춘다. 그것뿐이야」
				PRINTFORML 「내기는 10장 단위, 상한은 판에 따라 상한이 정해져 있으니 참고해서 주면 돼」
				PRINTFORML 「아아... 그런데 판돈의 계산은 좀 복잡할지도 모르겠네」
				PRINTFORML 
				PRINTFORML 「정반을 맞추지 못하면 코마도 없다... 뭐 이건 당연하지」
				PRINTFORML 「그래서, 맞췄다고 해서 배당이 갑자기 2배로 늘어나지는 않아」
				PRINTFORML 「틀린 쪽의 코마를 맞춘 쪽이 비율에 따라 나누는 거야」
				PRINTFORML 
				PRINTFORML 「예를 들어... 정에 4명, 반에 3명, 모두가 100장씩 걸었다고 하자」
				PRINTFORML 「이런 경우에 주사위가 반이 나오면, 정에 걸린 400장을 반에 걸은 세 명이 나눠가져」
				PRINTFORMW 「이 경우에는 균등분할, 166장이 되겠네」
				PRINTFORML 
				PRINTFORML 「여기까지 말하고 나니까, 말로 설명하는 것만으로 이해하긴 어려울지도 모르겠네...」
				PRINTFORML 「뭐, 꽝도 당첨도 다 좋은 것 아니겠어」
				PRINTFORMW 「재밌게 즐기다 돌아가줘」
				GOTO EXP_LOOP
			CASE 2
				PRINTFORML 「그럼, 우리 도박장에서의 규칙을 대략 말해줄게」
				PRINTFORML 「히후미(1,2,3)로 2배 지불, 시고로(4,5,6) 2배, 아라시(세 눈 전부 동일 숫자)가 3배, 핀조로(1,1,1)는 5배」
				PRINTFORML 「오야(親)는 승패와 관계 없이 계속 넘어가」
				PRINTFORML 「히후미, 숀벤, 메나시(눈 없음)이 나오면 오야는 넘어가지 않아」
				PRINTFORML 「맞아 맞아, 모두가 한 번씩 오야 역할을 끝낼 때까지 중간에 빠져나갈 수 없으니 조심해」
				PRINTFORMW 「한 판 이기고 빠져나가는건 매너 위반이라고?」
				PRINTFORML 
				PRINTFORML 「좀 더 자세히 알려달라고? 그런 건 스스로 찾아보는 게 좋을 거야」
				PRINTFORML 「도박을 일일이 알려달라고 하는건 좀 촌스러운 거 아냐?」
				PRINTFORML 「어쨌든, 간단한 거라고. 계속 하다 보면 언젠가 외워질 거야」
				GOTO EXP_LOOP
		ENDSELECT
ENDSELECT
SIF メッセージ
	CALL SPTALK, 0, 表情, 95, 台詞, 1
RESETCOLOR
RETURN

;やっぱりCASINOから構文お借りしてます
@賭場_コマ札交換
#DIM 閾値 = 0, 1050, 2100, 10500, 105000
LOCAL = LINECOUNT
PRINTFORML 보유 ₩　　　　%금액표시(MONEY), 13, RIGHT%
PRINTFORML 코마후다　　　%세자리구분(KOMAFUDA:MASTER), 13, RIGHT%
PRINTFORML [1]코마후다 구입 (₩105＝1장）※10장 이상부터 가능
PRINTFORML [2]코마후다 환금 (1장＝₩100）
PRINTFORML [0]돌아간다
DO
	INPUT
	SELECTCASE RESULT
		CASE 0
			CLEARLINE 1
			RETURN 0
		CASE 1
			CALL COLORMESSAGE(@"「몇 장을 윈해?」", 0xD37CD0, 1, 0)
			SIF MONEY >= 1050
				PRINTFORML [1]가진 돈의 전부를 교환（{MONEY / 105}장)
			SIF MONEY >= 2100
				PRINTFORML [2]가진 돈의 절반을 교환（{MONEY / 210}장)
			SIF MONEY >= 10500
				PRINTFORML [3]100장 교환
			SIF MONEY >= 105000
				PRINTFORML [4]1000장 교환
			PRINTFORML [0]그만둔다
			PRINTFORML (원하는 매수를 직접 입력, 또는 버튼을 선택해 주세요)
			$BUY_LOOP
			INPUT
			IF INRANGE(RESULT, 1, 4) && (MONEY < 閾値:RESULT)
				CLEARLINE 1
				GOTO BUY_LOOP
			ENDIF
			SELECTCASE RESULT
				CASE 0
					CLEARLINE LINECOUNT - LOCAL
					RESTART
				CASE 1
					KOMAFUDA:MASTER += MONEY / 105
					MONEY = MONEY % 105
				CASE 2
					KOMAFUDA:MASTER += MONEY / 210
					MONEY /= 2
				CASE 3, 4
					MONEY -= 閾値:RESULT
					KOMAFUDA:MASTER = RESULT == 3 ? KOMAFUDA:MASTER + 100 # KOMAFUDA:MASTER + 1000
				CASE IS < 0, 5 TO 9
					CLEARLINE 1
					GOTO BUY_LOOP
				CASEELSE
					IF RESULT * 105 > MONEY
						CLEARLINE 1
						GOTO BUY_LOOP
					ENDIF
					MONEY -= RESULT * 105
					KOMAFUDA:MASTER += RESULT
			ENDSELECT
			CALL COLORMESSAGE(@"「자, 이쪽으로」", 0xD37CD0, 2, 0)
		CASE 2
			IF !KOMAFUDA:MASTER
				CLEARLINE LINECOUNT - LOCAL
				RESTART
			ENDIF
			CALL COLORMESSAGE(@"「얼마나 교환할래?」", 0xD37CD0, 1, 0)
			PRINTFORML [0]가진 전부를 환금（%금액표시(KOMAFUDA:MASTER * 100)%） 
			PRINTFORML (환금할 매수를 직접 입력하거나 버튼을 선택해 주세요)
			PRINTFORML [-1]그만둔다
			$SELL_LOOP
			INPUT
			SELECTCASE RESULT
				CASE IS < -1
					CLEARLINE 1
					GOTO SELL_LOOP
				CASE -1
					CLEARLINE LINECOUNT - LOCAL
					RESTART
				CASE 0
					MONEY += KOMAFUDA:MASTER * 100
					KOMAFUDA:MASTER = 0
				CASEELSE
					IF RESULT > KOMAFUDA:MASTER
						CLEARLINE 1
						GOTO SELL_LOOP
					ENDIF
					MONEY += RESULT *100
					KOMAFUDA:MASTER -= RESULT
			ENDSELECT
			CALL COLORMESSAGE(@"「그럼, 이쪽에서 확인해 줘」", 0xD37CD0, 2, 0)
	ENDSELECT
	CLEARLINE LINECOUNT - LOCAL
	RESTART
LOOP 1

;ここから試行錯誤のオリジナル
@チンチロリン_メイン(レート)
#DIM 回数
#DIM 増減
#DIM 胴元
#DIM レート
#DIM 判定
#DIM プール
#DIM 賭駒, 5
#DIM 強さ, 5
#DIM 親継続, 6
#DIM L_COUNT
#DIM TGT
#DIM 表示色
#DIM 眠い
#DIM レート指数 = 1, 10, 100 ,500
#DIM 役倍率 = 5, 3, 3 ,3, 3, 3, 2
眠い = 0
VARSET 親継続
FOR COUNT, 1, 5
	IF KOMAFUDA:COUNT < レート指数:レート * 40
		PRINTFORMW ...사람이 모이지 않습니다. 자리를 벗어납니다.
		RETURN 0
	ENDIF
NEXT
回数 = 0
DRAWLINE
PRINTFORML 
PRINTFORML ～친치로～
PRINTFORML 
PRINTFORML 오야(親)를 결정하기 위해 주사위를 주사위를 한 개씩 굴립니다
PRINTFORMW 
CALL TOBA_FILL_DICE(強さ, 5)
FOR COUNT, 6, 1, -1
	胴元 = FINDELEMENT (強さ, COUNT)
	SIF 胴元 == -1
		CONTINUE
	BREAK
NEXT
FOR COUNT, 0, 5
	PRINTFORML %BAKUTO_NAME:COUNT%　　　%\@ STRLENS(BAKUTO_NAME:COUNT) > 4 ? # 　 \@%%TOKANJIT(強さ:COUNT)%
NEXT
PRINTL
PRINTFORMW %조사처리(BAKUTO_NAME:胴元, "이")% 첫 오야입니다.
PRINTFORML 
親継続:胴元 = 1
$GAME_LOOP
IF NEMUKE() >= 540 && !眠い
	眠い = 1
	PRINTFORML 당신은 졸려서 집중이 잘 되지 않는다...
	PRINTFORMW 주사위를 노린 대로 던지지 못할 확률이 증가합니다.
	PRINTFORML 
ENDIF
SIF レート > 1
	役倍率 = 10, 6, 5 ,4, 3, 2, 2
回数 ++
CALL PRINT_TOBA_STATE(回数, レート, !胴元)
LOCAL = LINECOUNT

;COMの賭けゴマを適当に決める
FOR COUNT, 1, 5
	IF KOMAFUDA:COUNT >= レート指数:レート * 50 && RAND:4
		TGT = 20
	ELSEIF KOMAFUDA:COUNT >= レート指数:レート * 20
		TGT = 10
	ELSEIF KOMAFUDA:COUNT <= レート指数:レート * 10
		TGT = KOMAFUDA:COUNT / レート指数:レート
	ELSE
		TGT = 5
	ENDIF
	賭駒:COUNT = レート指数:レート * TGT
NEXT
賭駒:胴元 = 0

IF 胴元
	PRINTFORML 이번 회차의 판돈을 결정해 주세요（1회＝{レート指数:レート}장）
	PRINTFORML [20]최대 매수　　　{20 * レート指数:レート}장
	PRINTFORML [10]전체의 절반　　{10 * レート指数:レート}장
	PRINTFORML 또는 1~19사이의 값 직접 입력
	$INPUT_LOOP
	INPUT
	IF !INRANGE(RESULT, 1, 20) || (レート指数:レート * RESULT > KOMAFUDA:MASTER)
		CLEARLINE 1
		GOTO INPUT_LOOP
	ENDIF
	賭駒:MASTER = レート指数:レート * RESULT
ENDIF
CLEARLINE LINECOUNT - LOCAL
FOR COUNT, 0, 4
	TGT = TOBA_ROTATE:胴元:COUNT
	PRINTFORML %BAKUTO_NAME:TGT%의 코마후다　　　　　%\@ STRLENS(BAKUTO_NAME:TGT) > 4 ? # 　 \@%%세자리구분(賭駒:TGT)%장
	TWAIT 200, 0
NEXT
PRINTFORML
;親の処理
PRINTFORML 오야(親) 차례
LOCAL = LINECOUNT
PRINTFORML 
PRINTFORML %BAKUTO_NAME:胴元%가 주사위를 던집니다
TWAIT 1000, 0
CALL THROW_CHINCHIRO_DICE(胴元, -1)
強さ:胴元 = RESULT
CLEARLINE LINECOUNT -LOCAL
;その場で勝ち負け確定判定
IF !INRANGE(強さ:胴元, 4, 7)
	IF 強さ:胴元 > 7
		CALL COLORMESSAGE(@"오야의 %CHIN_PRIZE:(強さ:胴元)%!", C_YELLOW, 1, 1)
		PRINTFORML %BAKUTO_NAME:胴元%%\@ 強さ:胴元 > 8 ? 는 %TOKANJIS(役倍率:(15 - 強さ:胴元))%배를 징수! # 독식! \@%!
	ELSE
		CALL COLORMESSAGE(@"오야의 %CHIN_PRIZE:(強さ:胴元)%…", C_YELLOW, 1, 1)
		PRINTFORML %BAKUTO_NAME:胴元%가 전원에게 \@ 強さ:胴元 == 0 ? 배로 # 분할해 \@ 지불합니다!
		親継続:5 = 1
	ENDIF
	RESULT = 0
	TGT = !胴元 ? RAND(1, 5) # 胴元
	IF (TGT != 胴元 && RAND:2) || !胴元
		CALL TOBA_GAMBLER_TWEET(TGT, "一投目", 強さ:胴元)
	ELSE
		CALL TOBA_GAMBLER_TWEET(胴元, "親で振った後", 強さ:胴元)
	ENDIF
	GOTO PAY
ENDIF
PRINTFORML 오야의 눈：　　　　　　　%CHIN_PRIZE:(強さ:胴元)%
PRINTFORML 
CALL TOBA_GAMBLER_TWEET(胴元, "親で振った後", 強さ:胴元)
;子の処理
PRINTFORML 참가자(子) 차례
FOR L_COUNT, 0, 4
	TGT = TOBA_ROTATE:胴元:L_COUNT
	LOCAL = LINECOUNT
	PRINTFORML 
	PRINTFORML %BAKUTO_NAME:TGT%가 주사위를 던집니다
	TWAIT 1000, 0
	CALL THROW_CHINCHIRO_DICE(TGT, 強さ:胴元)
	強さ:TGT = RESULT
	TWAIT 600, 0
	CLEARLINE LINECOUNT - LOCAL
	PRINTFORML %BAKUTO_NAME:TGT%의 눈：　　　　　%\@ STRLENS(BAKUTO_NAME:TGT) > 4 ? # %UNICODE(0x3000)% \@%%CHIN_PRIZE:(強さ:TGT)%
NEXT
PRINTFORML 정산을 실시합니다
$PAY
PRINTFORML 
増減 = 0
プール = 0
;親と勝負・出目判定処理
IF INRANGE(強さ:胴元, 4, 7)
	FOR COUNT, 0, 4
		TGT = TOBA_ROTATE:胴元:COUNT
		SELECTCASE 強さ:TGT
			CASE 0
				判定 = 2
				増減 = -(賭駒:TGT * 2)
			CASE 1, 2, 3
				判定 = 0
				増減 = -(賭駒:TGT)
			CASE 4 TO 8
				判定 = 1
				IF 強さ:TGT == 強さ:胴元
					増減 = 0
				ELSEIF 強さ:TGT > 強さ:胴元
					増減 = 賭駒:TGT
				ELSE
					増減 = -(賭駒:TGT)
				ENDIF
			CASEELSE
				判定 = 役倍率:(15 - 強さ:TGT)
				増減 = 賭駒:TGT * 判定
		ENDSELECT
		PRINTFORM %BAKUTO_NAME:TGT%의 눈：%CHIN_PRIZE:(強さ:TGT)%　＝　
		IF 増減 < 0
			PRINTFORML 오야의 승리!
			SIF 判定 > 1
				CALL COLORMESSAGE(@"히후미를 낸 %BAKUTO_NAME:TGT%는 배로 지불했다...", C_YELLOW, 1, 1)
		ELSEIF 増減 > 0
			PRINTFORML 참가자의 승리!
			SIF 判定 > 1
				CALL COLORMESSAGE(@"%CHIN_PRIZE:(強さ:TGT)%를 낸 %BAKUTO_NAME:TGT%에게 %TOKANJIS(判定)%배로 돌려줬다!!", C_YELLOW, 1, 1)
		ELSE
			PRINTFORML 무승부
			PRINTFORML 판돈은 그대로 돌아옵니다.
		ENDIF
		TWAIT 500, 0
		;親のコマ変動を一時保存
		プール -= 増減
		;子のコマ変動を表示
		KOMAFUDA:TGT = KOMAFUDA:TGT + 増減
		SIF 増減
			CALL TOBA_RESULT_PRINT(TGT, 増減)
		PRINTFORML 
	NEXT
;親の総取り/総付け処理
ELSE
	FOR L_COUNT, 0, 4
		TGT = TOBA_ROTATE:胴元:L_COUNT
		SELECTCASE 強さ:胴元
			;ヒフミ
			CASE 0
				プール -= 賭駒:TGT * 2
				KOMAFUDA:TGT += 賭駒:TGT * 2
				増減 = 賭駒:TGT * 2
			;ションベン目無しピン
			CASE 1, 2, 3
				プール -= 賭駒:TGT
				KOMAFUDA:TGT += 賭駒:TGT
				増減 = 賭駒:TGT
			;ロッポウ
			CASE 8
				プール += 賭駒:TGT
				KOMAFUDA:TGT -= 賭駒:TGT
				増減 = -賭駒:TGT
			;倍付以上
			CASEELSE
				プール += 賭駒:TGT * 役倍率:(15 - 強さ:胴元)
				KOMAFUDA:TGT -= 賭駒:TGT * 役倍率:(15 - 強さ:胴元)
				増減 = -(賭駒:TGT * 役倍率:(15 - 強さ:胴元))
		ENDSELECT
		CALL TOBA_RESULT_PRINT(TGT, 増減)
		TWAIT 500, 0
	NEXT
	PRINTFORML 
ENDIF
KOMAFUDA:胴元 += プール
IF プール
	表示色 = プール > 0 ? C_GREEN # C_D_RED
	PRINTFORM %BAKUTO_NAME:胴元%의 수지　　　　　　%\@ STRLENS(BAKUTO_NAME:胴元) > 4 ? # %UNICODE(0x3000)% \@%
	CALL COLORMESSAGE(@"%\@ プール > 0 ? ＋ # － \@%{ABS(プール)}장", 表示色, 1, 1)
	SIF ABS(プール) >= レート指数:レート * 80
		CALL TOBA_GAMBLER_TWEET(胴元, @"%\@ プール > 0 ? 得 # 失 \@%意", 強さ:胴元)
	PRINTFORML 
ENDIF

TIME += 5
;タネ銭足りないと終了
FOR COUNT, 0, 5
	SIF KOMAFUDA:COUNT >= レート指数:レート * 2
		CONTINUE
	PRINTFORML 
	IF COUNT > 0 || KOMAFUDA:0 >= 0
		PRINTFORML %BAKUTO_NAME:COUNT%의 코마후다가\@ KOMAFUDA:COUNT > 0 ? 부족해 # 전부 없어 \@젔습니다.
		PRINTFORMW 그럼 게임은 여기까지로 하겠습니다.
		RETURN 0
	ELSE
		SIF FLAG:구상색
			SETCOLOR 0xD37CD0
		PRINTFORML 「저기... 티켓이 부족하면 그만 비켜 주시겠어요?」
		PRINTFORML 「...지불할 티켓이 부족하다고? 제정신이냐!?」
		PRINTFORMW 「가진 돈을 털어서라도 확실하게 지불하라고!!」
		PRINTFORMDL ...부족한 만큼 자리에서 할증된 가격으로 강매당했다.
		PRINTFORMDW 일단 자리를 벗어납니다.
		RESETCOLOR
		MONEY = MONEY + KOMAFUDA:MASTER * 125
		KOMAFUDA:MASTER = 0
		RETURN 0
	ENDIF
NEXT
;親の目がショボいときは親を続行
IF 親継続:5 == 1
	PRINTFORMW %BAKUTO_NAME:胴元%가 오야를 계속합니다.
	親継続:5 = 0
	GOTO GAME_LOOP
;親交代
ELSEIF SUMARRAY(親継続, 0, 5) < 5
	胴元 = 胴元 == 4 ? 0 # 胴元 + 1
	親継続:胴元 = 1
	PRINTFORMW 다음 오야는 %BAKUTO_NAME:胴元%입니다.
	GOTO GAME_LOOP
ENDIF
IF NEMUKE() >= 700
	PRINTFORMW 졸음이 한계에 도달했습니다. 자리를 벗어납니다. 
	RETURN 2
ENDIF
;一周したら一区切り
PRINTFORML 
PRINTFORML 오야가 일순했기 때문에 게임에서 나올 수 있습니다.
PRINTFORML [0]이대로 계속한다
PRINTFORML [1]그만둔다
DO
 	INPUT
 	IF !INRANGE(RESULT, 0, 1)
 		CLEARLINE 1
 		CONTINUE
 	ELSEIF !RESULT
 		VARSET 親継続
 		胴元 = 胴元 == 4 ? 0 # 胴元 + 1
 		親継続:胴元 = 1
 		PRINTFORML 이대로 계속한다
		PRINTFORMW 다음 오야는 %BAKUTO_NAME:胴元%입니다.
 		GOTO GAME_LOOP
 	ENDIF
 	RETURN 0
LOOP 1


;紅魔館のとなんとか差別化しようとして結構頑張ってます
@丁半博打_メイン(レート)
#DIM CH_TURN, 7
#DIM CH_BET, 7
#DIM BET_POOL, 3
#DIM CH_PROFIT, 7
#DIM CH_COUNT,2
#DIM DICE, 2
#DIM TGT
#DIM L_COUNT
#DIM PL_BET
#DIM 賭駒, 7
#DIM 連勝, 7
#DIM 回数
#DIM 結果
#DIM レート
#DIM レート指数 = 20, 50, 100 ,1000
回数 = 0
VARSET 連勝
FOR L_COUNT, 1, 7
	IF KOMAFUDA:L_COUNT < レート指数:レート * 5
		PRINTFORMW ...사람이 모이지 않습니다. 자리를 벗어납니다.
		RETURN 0
	ENDIF
NEXT
DRAWLINE
PRINTFORML 
PRINTFORML ~쵸한바쿠치~
PRINTFORML 
CALL TOBA_DEALER_TWEET(3, "挨拶")

$GAME_LOOP
回数 ++
CALL PRINT_TOBA_STATE(回数, レート, 0)
TWAIT 1200, 0
VARSET CH_BET
VARSET CH_COUNT
VARSET BET_POOL
REDRAW 0
CALL TOBA_FILL_DICE(DICE, 2)
LOCAL = LINECOUNT
CALL TOBA_DEALER_TWEET(0, "スタート口上",0, 0, 回数)
TWAIT 1500, 0
CLEARLINE LINECOUNT-LOCAL

LOCAL = LINECOUNT
CALL TOBA_DEALER_TWEET(0, "構え口上", DICE:0, DICE:1)
TWAIT 1500, 0
CLEARLINE LINECOUNT-LOCAL

CALL TOBA_DEALER_TWEET(0, "被り口上")
TWAIT 1200, 0
PRINTFORML 
REDRAW 1
CALLF FUNC_FISHER_YATES_SHAFFLE(CH_TURN, 7)
;予想ターン
FOR L_COUNT, 0, 7
	TGT = CH_TURN:L_COUNT
	IF !TGT
		REDRAW 0
		PL_BET = 0
		$BET_LOOP
		LOCAL = LINECOUNT
		PRINTPLAIN [정][반]을 선택 후 판돈을 결정해주세요
		PRINTFORML 
		PRINTFORML 1회＝10장 최대　%세자리구분(レート指数:レート * 10)%장
		PRINTFORML 보유 코마후다　 %세자리구분(KOMAFUDA:MASTER)%장
		CALL PRINTBUTTON_EX("　　　[정]", -1, 0, (PL_BET == -1))
		CALL PRINTBUTTON_EX("　　　[반]", -2, 0, (PL_BET == -2))
		PRINTFORML 
		PRINTBUTTON @"[{レート指数:レート * 10}장-상한까지 걸기]", レート指数:レート
		PRINTFORML 
		PRINTBUTTON @"[{レート指数:レート * 5}장-상한의 반을 걸기]", レート指数:レート / 2
		PRINTFORML 
		PRINTBUTTON @"[{レート指数:レート / 4 * 10}장-조심스럽게 상황을 지켜본다]", レート指数:レート / 4
		PRINTFORML 
		PRINTFORML 혹은 1～{レート指数:レート - 1}사이의 값 직접 입력
		INPUT
		CLEARLINE LINECOUNT - LOCAL
		SELECTCASE RESULT
			CASE IS < -2, 0, IS > レート指数:レート
				GOTO BET_LOOP
			CASE -1, -2
				PL_BET = RESULT
				GOTO BET_LOOP
			CASEELSE
				SIF !PL_BET || RESULT * 10 > KOMAFUDA:MASTER
					GOTO BET_LOOP
				賭駒:MASTER = RESULT * 10
				CH_BET:MASTER = PL_BET == -1 ? 0 # 1
		ENDSELECT
		PRINTFORML 당신은 %\@ CH_BET:MASTER == 0 ? 정 # 반 \@%에 {賭駒:MASTER}장 걸었습니다.
		TWAIT 350, 0
		REDRAW 1
	ELSE
		;NPCの丁半予想と賭けゴマ数を決定
		CH_BET:TGT = RAND:2
		賭駒:TGT = BET_CHOHAN(TGT, レート指数:レート, 連勝:TGT)
		CALL TOBA_GAMBLER_TWEET(TGT, "丁半選択", CH_BET:TGT, 連勝:TGT)
		IF !RESULT && TGT != 4
			CALL COLORMESSAGE(@"「%\@ CH_BET:TGT ? 반 # 정 \@%%UNICODE(0xFF01)*RAND(1,4)%」", BAKUTO_WORDCOLOR:TGT, 1, 0)
			TWAIT 300, 0
		ENDIF
		PRINTFORML %BAKUTO_NAME:TGT%는 %\@ CH_BET:TGT == 0 ? 정 # 반 \@%에 {賭駒:TGT}장 걸었습니다.
		TWAIT 600, 0
	ENDIF
	PRINTFORML 
	CH_COUNT:(CH_BET:TGT) ++
	;BET_POOL:第一引数 0=丁の賭けゴマ 1=半の賭けゴマ 2=賭けゴマ総数
	BET_POOL:(CH_BET:TGT) += 賭駒:TGT
	SIF L_COUNT == 6
		BREAK
	CALL TOBA_DEALER_TWEET(0, "煽り", CH_COUNT:0, CH_COUNT:1, CH_BET:TGT)
	PRINTFORML 
	TWAIT 350 + RAND(3, 7) * 50, 0
NEXT
PRINTFORML 　　판돈 집계
PRINTFORML 　　정:{CH_COUNT:0}명　　{BET_POOL:0}장
PRINTFORMW 　　반:{CH_COUNT:1}명　　{BET_POOL:1}장
BET_POOL:2 = BET_POOL:0 + BET_POOL:1

;ツボを開くターン
CALL TOBA_FILL_DICE(DICE, 2)
結果 = (DICE:0 + DICE:1) % 2
CALL TOBA_CREATE_DICEIMAGE(DICE:0, 0, DICE:1, 2)
LOCAL = LINECOUNT
TGT = (ABS(CH_COUNT:0 - CH_COUNT:1) == 7) * 3
REDRAW 0
CALL TOBA_DEALER_TWEET(TGT, "予想終了", CH_COUNT:0, CH_COUNT:1)
SIF TGT
	CALL COLORMESSAGE(@"「...그럼, 다시 한번」\n「승부!」", 0xD37CD0, 1, 0)
TWAIT 1600 + (RAND(2, 5) * 200), 0
CLEARLINE LINECOUNT - LOCAL
CALL TOBA_DEALER_TWEET(0, "勝負！", DICE:0, DICE:1, 結果)
TWAIT 1200, 0
REDRAW 1
;コマ札やり取りのターン
VARSET CH_PROFIT
;丁半コマ揃って勝負
IF CH_COUNT:0 && CH_COUNT:1
	FOR L_COUNT, 0, 7
		IF CH_BET:L_COUNT == 結果
			CH_PROFIT:L_COUNT = (BET_POOL:(!結果) * ((10000 * 賭駒:L_COUNT) / BET_POOL:結果)) / 10000
		ELSE
			CH_PROFIT:L_COUNT = -(賭駒:L_COUNT)
		ENDIF
		KOMAFUDA:L_COUNT += CH_PROFIT:L_COUNT
	NEXT
;全員同じ方に賭けて当たった
ELSEIF CH_BET:MASTER == 結果
	FOR L_COUNT, 0, 7
		CH_PROFIT:L_COUNT = (BET_POOL:2 * ((4500 * 賭駒:L_COUNT) / BET_POOL:2)) / 10000
		KOMAFUDA:L_COUNT += CH_PROFIT:L_COUNT
	NEXT
;皆ハズレ
ELSE
	FOR L_COUNT, 0, 7
		CH_PROFIT:L_COUNT = -(賭駒:L_COUNT)
		KOMAFUDA:L_COUNT += CH_PROFIT:L_COUNT
	NEXT
ENDIF
;ランダムで誰か一言
TGT = RAND(1, 7)
CALL TOBA_GAMBLER_TWEET(TGT, @"%\@ CH_BET:TGT == 結果 ? 安堵 # 失望 \@%", 0, 0, 7)

;結果表示
FOR L_COUNT, 0, 7
	TGT = CH_TURN:L_COUNT
	CALL TOBA_RESULT_PRINT(TGT, CH_PROFIT:TGT)
	IF CH_PROFIT:TGT > 0
		連勝:TGT ++
	ELSE
		連勝:TGT = 0
	ENDIF
	TWAIT 250, 0
NEXT

;BET最大値より儲けるとツボ振りとのサシ勝負提案
IF CH_PROFIT:MASTER > レート指数:レート * 10
	REDRAW 0
	CALL TOBA_DEALER_TWEET(0, "サシ持ちかけ")
	CALL ASK_YN
	IF RESULT
		CALL TOBA_DEALER_TWEET(3, "サシお断り")
		REDRAW 1
	ELSE
		REDRAW 0
		LOCAL = LINECOUNT
		CALL TOBA_DEALER_TWEET(0, "スタート口上",0, 0, 0)
		TWAIT 1500, 0
		CLEARLINE LINECOUNT-LOCAL

		LOCAL = LINECOUNT
		CALL TOBA_DEALER_TWEET(0, "構え口上", DICE:0, DICE:1, 1)
		TWAIT 1800, 0
		CLEARLINE LINECOUNT-LOCAL
		
		CALL TOBA_DEALER_TWEET(0, "被り口上", 0, 0, 1)
		CALL ASK_YN("정", "반")
		CH_BET:MASTER = RESULT
		CALL TOBA_FILL_DICE(DICE, 2)
		結果 = (DICE:0 + DICE:1) % 2
		CALL TOBA_CREATE_DICEIMAGE(DICE:0, 0, DICE:1, 2)
		LOCAL = LINECOUNT
		CALL TOBA_DEALER_TWEET(0, "予想終了", CH_BET:MASTER, 0, 1)
		TWAIT 2000 + (RAND(2, 5) * 200), 0
		CLEARLINE LINECOUNT - LOCAL
		CALL TOBA_DEALER_TWEET(0, "勝負！", DICE:0, DICE:1, 結果)
		TWAIT 1200, 0
		IF CH_BET:MASTER == 結果
			CALL TOBA_DEALER_TWEET(3, "サシで負け")
			KOMAFUDA:MASTER += CH_PROFIT:MASTER
			連勝:MASTER ++
		ELSE
			CALL TOBA_DEALER_TWEET(3, "サシで勝ち")
			KOMAFUDA:MASTER -= CH_PROFIT:MASTER
			連勝:MASTER = 0
			CH_PROFIT:MASTER = -(CH_PROFIT:MASTER)
		ENDIF
		REDRAW 1
		CALL TOBA_RESULT_PRINT(MASTER, CH_PROFIT:MASTER)
		PRINTFORML 당신의 코마후다　　　　%세자리구분(KOMAFUDA:MASTER)%장
	ENDIF
ENDIF

TIME += 5
;継続/終了チェック
PRINTFORML 
FOR L_COUNT, 0, 7
	SIF KOMAFUDA:L_COUNT >= レート指数:レート * 5
		CONTINUE
	PRINTFORML %BAKUTO_NAME:L_COUNT%의 코마후다가 없어진 것 같습니다.
	PRINTFORMW 그럼 게임은 여기까지로 하겠습니다.
	RETURN 0
NEXT
IF NEMUKE() >= 700
	PRINTFORMW 음이 한계에 도달했습니다. 자리를 벗어납니다.
	RETURN 2
ENDIF

CALL TOBA_DEALER_TWEET(0, "継続口上", (CH_BET:MASTER == 結果), (連勝:MASTER > 1))
CALL ASK_YN("계속한다", "그만둔다")
SIF !RESULT
	GOTO GAME_LOOP
CALL COLORMESSAGE(@"「%TEXTR("그래/유감이네/어쩔 수 없지")%」\n「그럼 수고했어」", 0xD37CD0, 2, 0)
RETURN 0


;丁半博打で賭けゴマの枚数を決める式中関数
;評価値とか重み付けとか難しいことはよくわからんので乱数頼み
@BET_CHOHAN(TGT, MAX_BET, WINS)
#FUNCTION
#DIM TGT
#DIM MAX_BET
#DIM BASE_BET
#DIM ADD
#DIM WINS
#DIM BET
;勝っていると稀に全ツッパ
SIF RAND:100 + 1 < MIN(WINS, 3)
	RETURNF MIN(KOMAFUDA:TGT / 10, MAX_BET) * 10
BASE_BET = MAX_BET / 4
ADD = RAND(3 + WINS) > 1 ? RAND(BASE_BET) # -(RAND(BASE_BET))
SELECTCASE RAND:15 + MIN(WINS, 4) 
	CASE IS > 11
		BASE_BET = BASE_BET * 3 + (ADD / 4)
	CASE 5 TO 11
		BASE_BET = BASE_BET * 2 + (ADD / 3)
	CASE IS < 5
		BASE_BET = BASE_BET + (ADD / 2)
ENDSELECT
BASE_BET = LIMIT(BASE_BET, 1, KOMAFUDA:TGT / 100 * 8) * 10
RETURNF BASE_BET

;チンチロリンダイス表示＆判定関数
@THROW_CHINCHIRO_DICE(振り手, ARG)
#DIM 出目
#DIM L_COUNT
#DIM D_COUNT
#DIM 賽, 3
#DIM DICE, 3
#DIM 失敗率
#DIM ファンブル
#DIM 振り手
;ファンブル率2％、あなたのみ眠気ありで+2％
失敗率 = 1 + (!振り手 && NEMUKE() >= 540) * 2
ファンブル = 0
CALL TOBA_GAMBLER_TWEET(振り手, "一投目", ARG)
FOR L_COUNT, 1, 4
	LOCAL = LINECOUNT
	CALL TOBA_FILL_DICE(賽, 3)
	VARSET DICE
	ARRAYCOPY "賽", "DICE"
	;昇順に並び替え
	ARRAYSORT DICE, FORWARD
	;値が同じ=ゾロ目
	IF ALLSAMES(DICE:0, DICE:1, DICE:2)
		IF DICE:0 == 1
			出目 = 15
		ELSE
			出目 = 15 - (7 - DICE:0)
		ENDIF
	;値が全て異なる=目無し/ヒフミ/シゴロ
	ELSEIF !((DICE:0 == DICE:1) || (DICE:1 == DICE:2) || (DICE:0 == DICE:2))
		IF DICE:0 == 1 && DICE:2 == 3
			出目 = 0
		ELSEIF DICE:0 == 4 && DICE:2 == 6
			出目 = 9
		ELSE
			出目 = 2
		ENDIF
	;XXYパターン=Yの値で判定
	ELSEIF DICE:0 == DICE:1
		出目 = 2 + DICE:2
	;XYYパターン=Xの値で判定
	ELSE
		出目 = 2 + DICE:0
	ENDIF
	;ファンブル判定
	ファンブル = RAND:100 <= 失敗率 ? 1 # 0
	PRINTFORML ～%TOKANJIT(L_COUNT)%회차～
	REDRAW 0
	IF FLAG:화상표시
		CALL TOBA_CREATE_DICEIMAGE(賽:0, 賽:1, 賽:2, ファンブル)
		CALL PRINT_IMAGE_ANIMATION("SAI_",0 ,13, 1, 0, 33)
		CALL PRINT_IMAGE("SAI_RESULT")
		TWAIT 250, 0
	ELSE
		FOR D_COUNT, 0, 3
			PRINTFORM %TOKANJIT(賽:D_COUNT)%　%\@ D_COUNT == 2 ? ！ # \@%
			TWAIT 30 + RAND(25, 50 + D_COUNT * 20), 0
		NEXT
	ENDIF
	IF ファンブル
		PRINTFORML 앗!?
		PRINTFORML %BAKUTO_NAME:振り手%가 흔든 주사위가 %TEXTR("어디론가 훌쩍 날아가/번쩍하고 눈앞에서 사라져/갑자기 나타난 스키마에 삼켜져")% 버렸습니다...
		SIF !振り手
			TWAIT 1000, 0
		出目 = 1
		BREAK
	ELSEIF 出目 == 2
		PRINTFORML \@ L_COUNT < 3 ? 눈이 나오지 않았으므로 다시 던집니다. # 3번 던졌지만 눈이 나오지 않았다... \@
		CALL TOBA_GAMBLER_TWEET(振り手, "n投目", L_COUNT, 0, (3 + (L_COUNT == 3) * 4))
		SIF !RESULT
			TWAIT 1000, 0
		REDRAW 0
		CLEARLINE LINECOUNT - LOCAL
		SIF L_COUNT < 3 
			CONTINUE
		REDRAW 1
	ENDIF
	BREAK
NEXT
RESULT = 0
IF 出目 == 2 || !振り手
;出目が極端なら必ずつぶやく
ELSEIF 出目 == 0 || (INRANGE(ARG, 0, 4) && ARG > 出目)
	CALL TOBA_GAMBLER_TWEET(振り手, "悲鳴", 出目, 0, 7)
ELSEIF 出目 == 1
	CALL TOBA_GAMBLER_TWEET(振り手, "罵声", 出目, 0, 7)
ELSEIF 出目 > 8 || (ARG > 6 && 出目 > ARG)
	CALL TOBA_GAMBLER_TWEET(振り手, "歓声", 出目, 0, 7)
;通常の勝ち負け/出目
ELSEIF (ARG < 0 && INRANGE(出目, 3, 4)) || ARG > 出目
	CALL TOBA_GAMBLER_TWEET(振り手, "失望", 出目)
ELSEIF (ARG < 0 && INRANGE(出目, 7, 8)) || (ARG >= 0 && ARG < 出目)
	CALL TOBA_GAMBLER_TWEET(振り手, "安堵", 出目)
ENDIF
SIF !RESULT
	TWAIT 600, 0
REDRAW 1
RETURN 出目

;博徒の呟きを表示する関数
;CHARA:1=山童 2=河童 3= 鴉天狗, 4=蟒蛇 5=ランダムモブ子Ａ 6=ランダムモブ子Ｂ
;L_FEED：表示分類=BIT0 ONでウエイトあり BIT1 ONでCLEARLINE BIT2 ONで必ず表示
@TOBA_GAMBLER_TWEET(CHARA, 状況, 分類, SUB = 0, L_FEED = 3)
#DIM CHARA
#DIM 分類
#DIM L_FEED
#DIM SUB
#DIM EFFECT
#DIM L_COUNT
#DIM 表示CID = 0, 91, 92, 93, 94, 25, 26
#DIMS エフェクト = "", "顔絵_ざわ", "顔絵_ぐにゃあ"
#DIMS 状況
#DIMS 表情
#DIMS MESSAGE
#DIMS FONTCOLOR
#DIMS MESSAGE_PRINT, 50
;ペラペラ喋ると発言すぐ被るので発生抑えめ
SIF !(!RAND:3 || 分類 == 15 || GETBIT(L_FEED, 2)) || CHARA == MASTER
	RETURN 0
EFFECT = 0
MESSAGE = %BAKUTO_TALK_STRINGS(CHARA, 状況, 分類, SUB)%
DEBUGPRINTFORML {CHARA} %MESSAGE%
SIF MESSAGE == ""
	RETURN 0
表情 = %RESULTS%
LOCAL = LINECOUNT
;表示部分は@SP_TALKのカスタム
IF 顔絵付きメッセージ
	キャラ画像表示サイズ比 = 100
	FONTCOLOR = %TOSTR(BAKUTO_WORDCOLOR:CHARA, "X")% 
	VARSET MESSAGE_PRINT
	SIF FLAG:멀티사이즈
		デフォルトキャラ画像横幅 = 180
	CALL 画像セット(@"顔絵_服_%表情%_MOB_{表示CID:CHARA}", 0, 0, キャラ画像表示サイズ比, 0)
	SIF EFFECT
		CALL 画像セット(エフェクト:EFFECT, 0, 0, キャラ画像表示サイズ比, 1)
	MESSAGE = %SPTALK整形(MESSAGE)%
	SPLIT MESSAGE, "/", MESSAGE_PRINT
	FOR L_COUNT, 0, RESULT
		SIF L_COUNT != 0 || EFFECT
			CALL ダミーセット(0, 0, キャラ画像表示サイズ比, L_COUNT)
		TEMP_HTML:L_COUNT += @"<font color='#%FONTCOLOR%'>%MESSAGE_PRINT:L_COUNT%</font>"
	NEXT
	CALL 画像一斉表示(0, 0, 1, -1)
	IF GETBIT(L_FEED, 0)
		PRINTW 
	ELSE
		PRINTL
	ENDIF
ELSE
	SIF FLAG:구상색
		SETCOLOR BAKUTO_WORDCOLOR:CHARA
	SPLIT MESSAGE, "/", MESSAGE_PRINT
	FOR L_COUNT, 0, RESULT
		PRINTFORML %MESSAGE_PRINT:L_COUNT%
	NEXT
	RESETCOLOR
	SIF GETBIT(L_FEED, 0)
		WAIT
ENDIF
REDRAW 0
SIF GETBIT(L_FEED, 1)
	CLEARLINE LINECOUNT - LOCAL
REDRAW 1
RETURN 1

;博徒の呟きと表情を決める式中関数
;キャラ:1=山童 2=河童 3=鴉天狗 4=蟒蛇 5=ランダムモブ子１ 6=ランダムモブ子２
@BAKUTO_TALK_STRINGS(キャラ, 状況, 分類, SUB = 0)
#FUNCTIONS
#DIM キャラ
#DIM 分類
#DIM SUB
#DIM 初回
#DIM 定義済
#DIM L_COUNT
#DIMS 賭け = "정", "반"
#DIMS 自称, 2
#DIMS 状況
#DIMS 台詞
#DIMS 候補
RESULTS = 通常
台詞 = 
IF 定義済 != DAY
	定義済 = DAY
	FOR L_COUNT, 0, 2
		自称:L_COUNT = %TEXTR("わたし/私/あたい/あたし/")%
		SIF !RAND:4
			自称:L_COUNT = %TEXTR("ボク/僕/")%
	NEXT
ENDIF
SELECTCASE 状況
	;チンチロリン台詞
	;親・子の一投目：分類 = 親の出目
	CASE "一投目"
		SELECTCASE 分類
			;親がピン以下勝ち確時の煽り
			CASE 0 TO 3
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「어머, 혹시 돈은 모으지 않는 편인가요?」/「그럼 감사히 받아갑니다♪」
							DATAFORM 「앉아만 있어도 돈이 늘어나네...」/「정말... 좋은 도박장이야♪」
							DATAFORM 「뭐, 이후에 분명 좋은 일이 있을 거에요」/「하지만, 여기 있는 동안은 그냥 호구로 있어 주세요♪」
							DATAFORM 「『지는 게 이기는 것이다』 라는 말이 있죠」/「마지막에만 이기면 되지 않을까요?」/「그러니까, 지금은 더 승리를 양보해야 할 거예요♪」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「모두에세 나눠주다니 좋은걸」/「요! 수고했어♪」
							DATAFORM 「수고하십니다♪」
							DATAFORM 「네네, 지금 크게 손해봤는데 기분이 어때?」/「지금? 어떤 기분이야? 응? 어떤 기분일까나~?」
							DATAFORM 「풋, 푸흐흡,푸흐흐흣」/「...웃겨-♪」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「아하하, 코마도 널 싫어하나보네!」/「안심해 내가 책임지고 데려갈게♪」
							DATAFORM 「이야, 모두를 이렇게까지 웃게 만들다니」/「너 엄청난 성인이네」\n「뭔가 후광이 비쳐 보이네♪」
							DATAFORM 「어라!? 보는 것 만으로 돈이 늘었어?」/「이야~ 벌었다 잔뜩 벌었다♪」
							DATAFORM 「타인의 불행은 꿀맛이란 말이지♪」/「이런 꿀이라면 평생 빨아도 좋아~♥」
						ENDDATA
					CASE 4
						RESULTS = 笑顔
						STRDATA 台詞
							DATAFORM （뱀요괴는 빙긍빙글 돌고 있다...）
							DATAFORM （뱀요괴는 기쁜 듯이 크게 입을 벌렸다...）
							DATAFORM （뱀요괴는 똬리를 틀며 쭉 늘렸다...）
							DATAFORM （뱀요괴는 입맛을 다시고 있다...）
						ENDDATA
				ENDSELECT
			CASE 4
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「이러면 질 수가 없겠네요」
							DATAFORM 「후후훗, 봐줘서 고마워요」
							DATAFORM 「이것도 승부, 망설일 순 없으니까요」
							DATAFORM 「여기선 확실히 이기겠습니다」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「오옷, 봐주는 거야?」/「그럼 고맙게 받아갈게~」
							DATAFORM 「이야, 호의적이네. 너무나도 감동적이야」/「그래도 너 처럼 되고 싶진 않네~」
							DATAFORM 「이야 나쁘지 않네」/「하지만 이것도 승부니까♪」
							DATAFORM 「아하하, 미안 미안♪」/「빨리 던져서 정해버릴게」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「미안하지만, 여기선 내가 받아갈게」
							DATAFORM 「뭐, 이런 일도 있는거지」/「그렇게 낙심하지 말라고」
							DATAFORM 「이길 수 있을 떄 이겨둬야지」
							DATAFORM 「아하하, 너 인심이 좋구나」/「그래도 고맙게 받아갈게」
						ENDDATA
					CASE 4
						STRDATA 台詞
							DATAFORM （뱀요괴는 입으로 능숙하게 주사위를 굴렸다）
							DATAFORM （뱀요괴는 혀를 사용해 재빠르게 주사위를 흔들었다）
							DATAFORM （뱀요괴는 꼬리로 주사위를 튕겼다!）/（주사위는 공중으로 날아올라 아름답게 굴렀다...）
						ENDDATA
				ENDSELECT
			CASE -1, 5, 6
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「네, 던집니다」
							DATAFORM 「시작합니다... 호잇」
							DATAFORM 「그럼, 갑니다」
							DATAFORM 「신중하게 신중하게... 가자!」
							DATAFORM 「이얍!」
							DATAFORM 「좋아, 와랏!」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「가자!」
							DATAFORM 「호잇!」
							DATAFORM 「달그락달그락」
							DATAFORM 「좋아... 여기다!」
							DATAFORM 「얍!」
							DATAFORM 「핀조로, 핀조로 제발...」/「제발 나와줘!」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「가자!」
							DATAFORM 「팍팍 간다!」
							DATAFORM 「갑니다」
							DATAFORM 「신님... 부처님... 부탁드립니다!」
							DATAFORM 「사삭사삭 가자!」
							DATAFORM 「핀조로... 가자!」
						ENDDATA
					CASE 4
						STRDATA 台詞
							DATAFORM （뱀요괴는 입으로 능숙하게 주사위를 굴렸다）
							DATAFORM （뱀요괴는 혀를 사용해 재빠르게 주사위를 흔들었다）
							DATAFORM （뱀요괴는 꼬리로 주사위를 튕겼다!）/（주사위는 공중으로 날아올라 아름답게 굴렀다...）
						ENDDATA
				ENDSELECT
			CASE 7
				RESULTS = 泣き
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「음... 어렵네요...」
							DATAFORM 「할 수 있는만큼 해봐야겠죠, 혹시라도...」
							DATAFORM 「조금이라도 가능성이 있다면...」
							DATAFORM 「음, 아직... 패배한 건 아니니까...」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「아차, 이러면 곤란한데...」
							DATAFORM 「일단, 크게 해보자...」/「이 방법밖에 없으니까...」
							DATAFORM 「의외로 던져보면 어떻게든 될...지도?」
							DATAFORM 「밑져야 본전... 샥 가보자」＠通常
						ENDDATA
					CASE 3
						RESULTS = 通常
						STRDATA 台詞
							DATAFORM 「이걸로 이긴다면 나 너무 멋있는거 아냐?」
							DATAFORM 「아냐아냐, 던져보기 전까진 모르지요?」
							DATAFORM 「이걸로 이기면 기분 좋겠네~」
							DATAFORM 「기합! 기합으로 뭔가 되겠죠, 그렇죠!」
						ENDDATA
					CASE 4
						STRDATA 台詞
							DATAFORM （뱀요괴는 자신없이 주사위를 던졌다...）
							DATAFORM （뱀요괴는 신중하게 생각한 후 주사위를 던졌다...）
							DATAFORM （뱀요괴는 평소보다 신중하게 주사위를 던졌다...）
						ENDDATA
				ENDSELECT
			CASE 8 TO 15
				SELECTCASE キャラ
					CASE 1
						RESULTS = 怒り
						STRDATA 台詞
							DATAFORM 「...일단 맡겨두는 거니까요!」/「반드시 돌려받을거에요!」
							DATAFORM 「손해를 보면 이겨야하고, 이겨도 손해보고...」/「응, 분명 되찾을 거에요!」
							DATAFORM 「이건 말이 안 나오네요...」/「손도 못 대고 잃는건 역시 조금... 말이...」＠泣き
						ENDDATA
					CASE 2
						RESULTS = 泣き
						STRDATA 台詞
							DATAFORM 「주사위를 지켜보는 것만으로 간단히 끝나버렸네」/「돈도 반대로 가져간다고?」/「아, 싫다...」
							DATAFORM 「에, 지금 던진 건 연습이잖아?」/「자자, 빨리 다시 던져봐!」/「...아 이건 사기야! 역시 사기지?」
							DATAFORM 「이걸로는 전혀 분위기를 끌어올릴 수 없어」/「다들 제대로 하자고!」/「마지막에 나 혼자 이기는 게 이상적인 흐름이 아닐까!?」
						ENDDATA
					CASE 3
						RESULTS = 怒り
						STRDATA 台詞
							DATAFORM 「아아- 이건 엉망진창이네...」/「어쩔거야, 이 분위기」
							DATAFORM 「나도 알아!」/「분명 어떤 반전이 있을 거라고...」＠通常
							DATAFORM 「아무것도 안 하는 사이에 끝났네...」/「아, 시시해~」
						ENDDATA
					CASE 4
						RESULTS = 泣き
						STRDATA 台詞
							DATAFORM （뱀요괴는 풀이 죽어 있다...）
							DATAFORM （뱀요괴는 우물쭈물하고 있다...）
							DATAFORM （뱀요괴는 왠지 슬퍼보인다...）
							DATAFORM （뱀요괴는 고개를 숙이고 있다...）
						ENDDATA
				ENDSELECT
		ENDSELECT
	;親子共通n回目の賽振り:分類 = 振り終わった回数
	CASE "n投目"
		SELECTCASE 分類
			CASE 1
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「한번 더 할게요」
							DATAFORM 「어머머, 안 나왔네요」
							DATAFORM 「다시 던져볼게요」
							DATAFORM 「네네, 가보죠」
							DATAFORM 「팍팍 정해졌으면 하네요」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「호이, 한번 더」
							DATAFORM 「한번 더 던집니다」
							DATAFORM 「다시 던질게요」
							DATAFORM 「네네, 다음」
							DATAFORM 「다음에는 좋은게 오려나~」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「이상한 거 나오는 것보다 나을 거 같아... 가자!」
							DATAFORM 「네네, 던질게요」
							DATAFORM 「그럼 한 번 더, 간다!」
							DATAFORM 「좋아, 기합 넣고... 가자!」
							DATAFORM 「다음엔 확실하게 결착을」
						ENDDATA
					CASE 4
						STRDATA 台詞
							DATAFORM （뱀요괴는 입으로 능숙하게 주사위를 굴렸다）
							DATAFORM （뱀요괴는 혀를 사용해 재빠르게 주사위를 흔들었다）
							DATAFORM （뱀요괴는 꼬리로 주사위를 튕겼다!）/（주사위는 공중으로 날아올라 아름답게 굴렀다...）
						ENDDATA
				ENDSELECT
			CASE 2
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「잠깐...부탁이야~」
							DATAFORM 「이젠... 나오면 좋겠는데」
							DATAFORM 「어라..? 몸이 안 좋은 걸까요...」
							DATAFORM 「뭐, 마지막에만 잘 나온다면...」
							DATAFORM 「모두를 방심하게 하고선...」/「여기!」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「모으고 모아서... 여기!」
							DATAFORM 「아아-, 이제 뭐라도 좀 나오면 좋겠네」
							DATAFORM 「좀 조급해지는데...」
							DATAFORM 「어라... 이상하네, 또?」
							DATAFORM 「마지막까지 모아서...」/「짜잔!」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「아직이다... 아직이야」
							DATAFORM 「지금부터가 본방이야」/「이거다!」
							DATAFORM 「일단 승부는 내야겠지... 음...」
							DATAFORM 「마지막은 진심으로 갑니다!」
							DATAFORM 「이걸로 볼거리를 만드는거야」
						ENDDATA
					CASE 4
						STRDATA 台詞
							DATAFORM （뱀요괴는 다시 한번 주사위를 흔들었다）
							DATAFORM （뱀요괴는 왠지 초초해하고 있다...）＠泣き
							DATAFORM （뱀요괴는 고개를 갸웃거리고 있다...）
						ENDDATA
				ENDSELECT
			CASEELSE
				RESULTS = 泣き
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「가, 가끔은... 이런 일도 있죠...」
							DATAFORM 「운이 없네요...」
							DATAFORM 「아, 어라? 잘 안 풀리네요...」
							DATAFORM 「승부의 무대에도 서지 못하는 건, 좀...」
							DATAFORM 「으, 으앙...」/「이건 아니야...」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「가, 가끔은 이런 일도 있는거지, 응?」
							DATAFORM 「아- 꼬였네...」
							DATAFORM 「우와... 저질렀네...」
							DATAFORM 「져... 졌다...」/「아 젠장!!」＠怒り
							DATAFORM 「주사위씨!」/「좀 더 기운차게 굴렀으면 좋았을텐데~」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「아... 이게 이렇게 되다니...」
							DATAFORM 「정말로 운이 없네...」
							DATAFORM 「아. 저질렀다, 이건 졌다...」
							DATAFORM 「네네, 패배야, 내가 졌다고!」＠怒り
							DATAFORM 「다음에 다음에, 꼭 되찾아줄테니까!」＠怒り
						ENDDATA
					CASE 4
						STRDATA 台詞
							DATAFORM （뱀요괴는 정색하고 있다...）＠通常
							DATAFORM （뱀요괴는 풀이 죽어있다...）
							DATAFORM （뱀요괴는 고개를 갸웃거리고 있다...）
						ENDDATA
				ENDSELECT
		ENDSELECT
	CASE "親で振った後"
		SELECTCASE 分類
			CASE 0
				RESULTS = 泣き
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「이건... 너무 아파요...」
							DATAFORM 「이젠 아무것도 없어...」/「하아...」
							DATAFORM 「이, 이번 패배는 지갑에 치명타...」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「싫어어어! 이게 뭐야!!」
							DATAFORM 「이건 너무 아파!」
							DATAFORM 「잠깐만 기다려봐」/「뭐야 이게!」＠怒り
						ENDDATA
					CASE 3
					RESULTS = 怒り
						STRDATA 台詞
							DATAFORM 「뭔데 이게!?」/「내가 뭐 잘못했어!?」
							DATAFORM 「지금 웃을 상황이야..?!」/「악! 윽! 엑! 악! 아악!!」
							DATAFORM 「웃을 수 있는 것도 지금뿐이야...」/「...너희들도 곧 나처럼 될 거니까!」
						ENDDATA
					CASE 4
						STRDATA 台詞
							DATAFORM （뱀요괴는 충격으로 굳어있다...）
							DATAFORM （뱀요괴는 혼란스러운 나머지 왠지 춤을 추고 있다...）＠通常
							DATAFORM （뱀요괴는 부들부들 떨고 있다...）
						ENDDATA
				ENDSELECT
			CASE 1 TO 3
				RESULTS = 泣き
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「아아- 전부 뻬앗기다니」
							DATAFORM 「뭐 다... 다음이 있으니까요」
							DATAFORM 「이러고 있으면 이기는 것도 이길 수 없겠네」/「기분전환해 볼까」
							DATAFORM 「우와... 꽤 힘드네요, 이거...」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「네, 다음 게임! 빨리 다음 가자!」＠怒り
							DATAFORM 「이건 내면 안 돼!」
							DATAFORM 「적어도 승부할 수 있는 눈이었다면...」/「그래도... 이건 아니지...」
							DATAFORM 「이런 일도 가끔은 있지만...」/「이제 됐어」/「자, 다음 가자!」＠怒り
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「승부의 가능성은...」/「아, 이건 좀 너무하네...」
							DATAFORM 「방금은 운이 없었을 뿐이니까!」/「다음에 깜짝 놀라게 해줄게!」＠怒り
							DATAFORM 「기분전환이야, 그래 기분전환」
							DATAFORM 「하, 이딴걸로 이길 수 있을 리 없잖아」/「네네, 다음 게임-」＠怒り
						ENDDATA
					CASE 4
						台詞 = （뱀요괴는 %TEXTR("풀이 죽어/맥이 풀려/고개를 숙이고")%있다...）
				ENDSELECT
			CASE 4
				RESULTS = 泣き
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「상냥하게 부탁드려요...」
							DATAFORM 「실수했네요...」
							DATAFORM 「이건... 안 되나요...」
							DATAFORM 「의외로 이럴 때가...」/「모두에게 발목을 휘둘리고... 뭐 그런 일들이 많죠...」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「음, 조금만 더 부드럽게 안 될까...」
							DATAFORM 「으악, 저질렀다...」
							DATAFORM 「아... 이건 틀렸네...」
							DATAFORM 「이 다음에는 뭔가 일어날지도 몰라서...」/「내가 이기거나 뭐 그런 일이 벌어질 수도 있고...」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「음, 아직은 모르잖아요...」/「아직 결과는 몰라... 그치..?」
							DATAFORM 「아, 해버렸나...」
							DATAFORM 「「우와... 이건 좀...」
							DATAFORM 「아 그래도... 이 이상 떨어질 순...」/「나는 아직... 포기하지 않아...」＠通常
						ENDDATA
					CASE 4
						台詞 = （뱀요괴는 %TEXTR("풀이 죽어/맥이 풀려/고개를 숙이고")%있다...）
				ENDSELECT
			CASE 5
				RESULTS = 泣き
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「응... 안심할 순 없네요...」
							DATAFORM 「조금 부족한 느낌이에요...」
							DATAFORM 「...미묘하네요」
							DATAFORM 「또 이런 애매한 눈을...」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「위험한가...」
							DATAFORM 「「좀 부족할지도...」
							DATAFORM 「좀 미묘한가...」
							DATAFORM 「이건 뭐랄까... 음...」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「하, 한번만 다시 굴리면 안될까..?」
							DATAFORM 「응? 한번만 더...」/「진짜 조금 남았는데...」
							DATAFORM 「아, 이건... 애매...」
							DATAFORM 「이럴 때는 의외로 모두가 어설프게 나오는 법이죠.」＠通常
						ENDDATA
					CASE 4
						RESULTS = 通常
						STRDATA 台詞
							DATAFORM （뱀요괴는 어쩐지 불만스러워 하는 듯 하다...）
							DATAFORM （뱀요괴는 똬리를 틀고 있다...）
							DATAFORM （뱀요괴는 쉿쉿 소리를 내고 있다...）
						ENDDATA
				ENDSELECT
			CASE 6
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「확률적으로는... 이길 수 있을까요?」
							DATAFORM 「음, 최악은 아니네요」
							DATAFORM 「이거라면... 되겠네요」
							DATAFORM 「이 정도면 여유일지도...」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「음, 이게 다야?」
							DATAFORM 「이 정도면 괜찮지 않을까?」
							DATAFORM 「좋아, 이건 괜찮을 거에요」
							DATAFORM 「모두들... 눈치 챙기라고?」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「좋아, 승부 승부」/「뭐, 어떻게든 되겠지」
							DATAFORM 「좋아, 이건 괜찮아...」/「상당히 좋아 좋아」
							DATAFORM 「응, 괜찮아 괜찮아」
							DATAFORM 「아니, 이건 난이도 너무 높은데?」/「이 이상은 진짜로 무리니까」
						ENDDATA
					CASE 4
						RESULTS = 笑顔
						STRDATA 台詞
							DATAFORM （뱀요괴는 기뻐 보인다...）
							DATAFORM （뱀요괴는 만족스러운 듯이 고개를 끄덕이고 있다...）
							DATAFORM （뱀요괴는 쉿쉿 소리를 내고 있다...）
							DATAFORM （뱀요괴는 혀를 낼름거리고 있다...）
						ENDDATA
				ENDSELECT
			CASE 7
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「…이겼네요♪」
							DATAFORM 「자자, 이거 봐주세요!」/「이걸 이기는건... 어려울 거에요♪」
							DATAFORM 「자, 그럼 모두 던져주세요♪」
							DATAFORM 「후훗, 여유가 생겼네요♪」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「이야, 미안한걸~」/「거의 이겨버려서 미안해~♪」
							DATAFORM 「아하하♪ 이거 봐봐~!」
							DATAFORM 「아핫, 이젠 여유~ 안심했어~」
							DATAFORM 「풋풋푸~ 아마 무리겠지만」/「호우~、힘내라~♥ 힘내라~♥」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「야호♪ 이건 분명한 승리네!」
							DATAFORM 「하하, 봤어!? 이거 어때!」
							DATAFORM 「자자, 어서 그 『헛된 저항』을 보여달라고♪」
							DATAFORM 「아하하, 이걸 이기려면 힘들어」/「나였다면 포기했을지도~♪」
						ENDDATA
					CASE 4
						RESULTS = 笑顔
						STRDATA 台詞
							DATAFORM （뱀요괴는 기뻐 보인다...）
							DATAFORM （뱀요괴는 만족스러운 듯이 고개를 끄덕이고 있다...）
							DATAFORM （뱀요괴는 쉿쉿 소리를 내고 있다...）
							DATAFORM （뱀요괴는 혀를 낼름거리고 있다...）
						ENDDATA
				ENDSELECT
			CASE 8
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「그럼, 잘먹겠습니다♪」
							DATAFORM 「네, 그럼 빨리 정산합시다♪」
							DATAFORM 「독식이라니... 기분 최고네요♪」
							DATAFORM 「아하하」/「이 코마는, 전부 내・거♪」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「요점은 모두를 동요하면, 절대로 이길 수 있지♪」
							DATAFORM 「와~이, 성공했어요!!」
							DATAFORM 「자, 그럼 전부 받아가보실까♪」
							DATAFORM 「이야, 큰일이네~」/「모두의 티켓이 나를 너무 사랑하는거 같아~」/「티켓 하렘이라도 되는걸까~♪」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「이야, 좋은 눈이였어~」/「나만의 스타일이지~」
							DATAFORM 「최고의 전개야, 이거!」
							DATAFORM 「네 정산 시간~」/「이젠 전부 나의 것~♪」
							DATAFORM 「진실은 언제나 하나..!」/「...그래, 모든 돈은 나한테 모이는 거야..!」/「아하하하하!!」
						ENDDATA
					CASE 4
						RESULTS = 笑顔
						STRDATA 台詞
							DATAFORM （뱀요괴는 기쁨의 춤을 추고 있다...）
							DATAFORM （뱀요괴는 기쁜 듯이 자리를 빙빙 기어다니고 있다...）
							DATAFORM （뱀요괴는 리듬을 타며 좌우로 몸을 흔들고 있다...）/（아무래도 매우 기뻐하고 있는 것 같다...）
						ENDDATA
				ENDSELECT
			CASE 15
				SELECTCASE キャラ
					CASE 1
						台詞 = 「...아앙~♥」/「잠... 잠깐... 잠깐만요...」/「저 지금... 가버린겉... 같아요...♥」/「잠시 속옷좀 갈아입고 올게요...♥」
					CASE 2
						台詞 = 「호호호, 첩이야말로 친치로의 여신」/「미천한 자들은, 전부 제게 바치는 것이다~」
					CASE 3
						台詞 = 「우와!? 이거 대박!?」/「에, 이거 대박이지 않아?」/「아니 진짜로 대박인데?」/「...진짜 이거 대박이지 않아?」
					CASE 4
						台詞 = （뱀요괴는 똬리를 틀고 있... 그 자리에서 뛰어 올랐다!?）/（그대로 연속해서 뛰고 있다!）/（꽤 기쁜가보다...）
				ENDSELECT
			CASEELSE
				SELECTCASE キャラ
					CASE 1
						STRDATA 台詞
							DATAFORM 「후훗, 미안해요♪」
							DATAFORM 「아... 기분 좋아...」/「벌써... 가버렸어요♥」
							DATAFORM 「후훗..♥」/「이 %CHIN_PRIZE:分類%에서... 더 위를 노려볼까요♪」
						ENDDATA
					CASE 2
						STRDATA 台詞
							DATAFORM 「아하하하하!!」/「다들『크으윽』하는 표정, 너무 웃겨♪」/「완전 웃기네♪」
							DATAFORM 「자자자!!!」/「내봐, 전부 내놔봐♪」
							DATAFORM 「%CHIN_PRIZE:分類%... 좋은 울림이네」/「다음부터 계속 이대로 가고 싶네♪」
						ENDDATA
					CASE 3
						STRDATA 台詞
							DATAFORM 「왔다...」/「이제는... 나의 시대가 왔네♪」
							DATAFORM 「이리로 이리로 빨리 빨리 내놔봐」/「여기 있는 것만으로는 부족해♪」
							DATAFORM 「후후후、나는 항상 위를 목표로 하는 여자...」/「그래, 노리는 거야. %CHIN_PRIZE:(分類 + 1)%...」/「결정이네♪」
						ENDDATA
					CASE 4
						RESULTS = 笑顔
						STRDATA 台詞
							DATAFORM （뱀요괴는 기뻐 보인다...）
							DATAFORM （뱀요괴는 만족스러운 듯이 고개를 끄덕이고 있다...）
							DATAFORM （뱀요괴는 쉿쉿 소리를 내고 있다...）
						ENDDATA
				ENDSELECT
		ENDSELECT
	CASE "悲鳴"
		;親子共通ヒフミ/子が親のニゾウに負けた/親あなたがシゴロ以上
		RESULTS = 泣き
		SELECTCASE キャラ
			CASE 1
				STRDATA 台詞
					DATAFORM 「......에? %CHIN_PRIZE:分類%?」/「에에에에!!??」
					DATAFORM 「싫어어어어어어어!!!」
					DATAFORM 「잠깐만 에에에에엥!!??」
					DATAFORM 「에에에에에!!?? 거짓말이지!!??」
				ENDDATA
			CASE 2
				STRDATA 台詞
					DATAFORM 「우에에에에에에에에에? 안돼안돼안돼!!!!!」/「여기서 %CHIN_PRIZE:分類%라니 하지 말라고!!」
					DATAFORM 「우에에에엥에에!!? 뭐야 이거!!!!」
					DATAFORM 「dㅜtrl지ㅁkfㄹkrh!!!!」
					DATAFORM 「「우아아아아아아아!!??」
				ENDDATA
			CASE 3
				STRDATA 台詞
					DATAFORM 「잠깐잠깐!?」/「%CHIN_PRIZE:分類% 같은건 들어본 적 없어!!」
					DATAFORM 「우와아아아아!!!! 진-짜-냐-고!!!!!」
					DATAFORM 「하아아아아아!?!?」
					DATAFORM 「에에에에에에?!?!?」
				ENDDATA
			CASE 4
				STRDATA 台詞
					DATAFORM （뱀요괴는 슬픈 듯이 주사위를 바라보고 있다...）
					DATAFORM （뱀요괴는 허둥지둥하고 있다...）
					DATAFORM （뱀요괴는 쉿쉿 소리를 내고 있다...）
				ENDDATA
		ENDSELECT
	;親子共通シゴロ以上/子が親のゴケに勝った
	CASE "歓声"
		SELECTCASE キャラ
			CASE 1
				STRDATA 台詞
					DATAFORM 「%CHIN_PRIZE:分類% !?」/「해냈다~!!!」
					DATAFORM 「앗싸!!!」
					DATAFORM 「대박!! 거짓말 같아!」
					DATAFORM 「꺄악! 대단해!」/「완전 대박!」
				ENDDATA
			CASE 2
				STRDATA 台詞
					DATAFORM 「%CHIN_PRIZE:分類% 떴다―――(ﾟ∀ﾟ)――――!!」
					DATAFORM 「야앗!! 왔다왔다!!」/「이거 완전 왔어―!!」
					DATAFORM 「아하하하하하하하!!!!」/「이래서 도박을 끊을 수 없다니까!!!」
					DATAFORM 「야호오오오!!」
				ENDDATA
			CASE 3
				STRDATA 台詞
					DATAFORM 「오오오~~!? %CHIN_PRIZE:分類% !!」/「진짜로!?」
					DATAFORM 「좋아 왔다―――!!」
					DATAFORM 「와하하하하, 어때 봤냐―――!!」
					DATAFORM 「이야호――――!!」
				ENDDATA
			CASE 4
				RESULTS = 笑顔
				STRDATA 台詞
					DATAFORM （뱀요괴는 기뻐하는 듯 하다...）
					DATAFORM （뱀요괴는 만족스러운 듯 고개를 끄덕이고 있다...）
					DATAFORM （뱀요괴는 몸이 파도처럼 흔들고 있다...）/（아마도 혼자? 웨이브를 하고 있는 거겠지...）
					DATAFORM （뱀요괴는 모두를 향해... 윙크를 했다!?）/（『찡긋☆』소리가 들린 것 같다...）
				ENDDATA
		ENDSELECT
	;親子共通ションベン
	CASE "罵声"
		RESULTS = 怒り
		SELECTCASE キャラ
			CASE 1
				STRDATA 台詞
					DATAFORM 「에엣!? 잠시만요!?」
					DATAFORM 「아니아니아니아니」/「이거 이상하지 않아요!?」
					DATAFORM 「아니 기다려주세요!?」/「이게 무슨 농담이에요!?」
				ENDDATA
			CASE 2
				STRDATA 台詞
					DATAFORM 「우오오오!?」/「이게 뭐야!? 장난하지 말라고!!??」
					DATAFORM 「이의 있소! 이의 있소! 이런 건 안 돼―!」
					DATAFORM 「하아!? 의미를 모르겠어!」
				ENDDATA
			CASE 3
				STRDATA 台詞
					DATAFORM 「잠깐잠깐!? 기다려!!」/「진짜 이런게 말이 된다고?」
					DATAFORM 「하아아아아!!??」/「아니아니, 이상하잖아 이거!!」
					DATAFORM 「이건 사기잖아!? 잠깐 기다리라고!!」/「이러기 있어!?」
				ENDDATA
			CASE 4
				RESULTS = 泣き
				STRDATA 台詞
					DATAFORM （뱀요괴는 사라진 주사위를 찾고 있다...）
					DATAFORM （뱀요괴는 깜짝 놀라 굳어 있다...）
					DATAFORM （뱀요괴는 풀이 죽어 있다...）
				ENDDATA
		ENDSELECT
	;親収支マイナスがレートの80倍以上
	CASE "失意"
		RESULTS = 泣き
		SELECTCASE キャラ
			CASE 1
				STRDATA 台詞
					DATAFORM 「이거, 제대로 되찾을 수 있을까요..?」
					DATAFORM 「아아, 이렇게 줄어버리면...」
					DATAFORM 「열심히 차곡차곡 모아도...」/「한번에 휙 뺏겨버리면...」/「..그래, 나도 똑같이 되갚아줄게요!」＠怒り
				ENDDATA
			CASE 2
				STRDATA 台詞
					DATAFORM 「어..이...」/「코마짱들, 반드시 내게 돌아올거지?」/「약속이야...」
					DATAFORM 「우와... 이건 너무 줄었는데...」
					DATAFORM 「어? 이 상황에서 보험이 있다고!?」/「...미안해, 그런 게 있을 리가 없지」
				ENDDATA
			CASE 3
				STRDATA 台詞
					DATAFORM 「우와... 정말로 다 가져갔네...」/「힘들어...」
					DATAFORM 「아아, 더 이상은 싫어!」/「핀조로 10연발 정도는 해주마!」＠怒り
					DATAFORM 「아니, 이거 진짜 위험하네...」/「나, 이제 몇개 더 가지고 있었더라..?」
				ENDDATA
			CASE 4
				STRDATA 台詞
					DATAFORM （뱀요괴는 티켓 위에서 똬리를 틀고 위협하고 있다...）/（...그러나 참가자들의 눈총을 받자 바로 물러섰다...）
					DATAFORM （뱀요괴는 쉿쉿 소리를 내고 있다...）/（도저히 파충류라고는 생각되지 않는 한심한 얼굴을 하고 있다...）
					DATAFORM （뱀요괴는 같은 자리를 빙빙 기어다니고 있다...）/（누가 보더라도 매우 곤란해 하는 것 같다...）
				ENDDATA
		ENDSELECT
	;親収支プラスがレートの80倍以上
	CASE "得意"
		SELECTCASE キャラ
			CASE 1
				STRDATA 台詞
					DATAFORM 「아... 이거예요, 이 순간...」/「몇 번이나 느껴봐도… 너무 좋아요…♥」
					DATAFORM 「음, 너무 좋은 흐름이야」/「이대로… 갑시다♥」
					DATAFORM 「후후후...」/「후후후후후♪」/「후후후♥」
				ENDDATA
			CASE 2
				STRDATA 台詞
					DATAFORM 「오ー, 대어대어♪」/「물론, 다음에도 노릴거야~」
					DATAFORM 「아하하, 이런 상황에서 결과를 내는건...」 /「혹시...」/「나, 꽤 능력 있는 여자…?」
					DATAFORM 「좋아좋아, 이 분위기!」/「이대로 전부 박살내버리자♪」
				ENDDATA
			CASE 3
				STRDATA 台詞
					DATAFORM 「이야~ 기분 좋은걸~」/「이대로 계속 접대해 주면 고맙겠어♪」
					DATAFORM 「봐봐, 너희 손 안에 있는 코마도 조심하라고」/「어느새 전부 나한테 다 들어오고 있을지도 몰라♪」
					DATAFORM 「실은 말이야...」/「나, 이거 노리고 낸거야♪」/「정말이라니까」/「그래, 다음에도 %CHIN_PRIZE:分類%... 가보자..♪」
				ENDDATA
			CASE 4
			RESULTS = 笑顔
				STRDATA 台詞
					DATAFORM （뱀요괴는 기쁜 듯이 몸을 흔들고 있다...）/（이게... 웨이브!?）
					DATAFORM （뱀요괴는 기쁨의 춤을 추고 있다...）
					DATAFORM （뱀요괴는 꼬리?를 좌우로 흔들고 있다...）
				ENDDATA
		ENDSELECT
	;丁半博打
	;丁半博打選択台詞
	CASE "丁半選択"
		IF RAND:2
			SIF キャラ == 4
				RETURNF @"（뱀요괴는 도움을 받아 티켓을 %賭け:分類% 쪽으로 뻗었다...）"
			RETURNF @"「%賭け:分類%%UNICODE(0xFF01)*RAND(1,4)%」"
		ENDIF
		SELECTCASE キャラ
			CASE 1
				STRDATA 台詞
					DATAFORM 「이것저것 생각해봐도 의미 없어요」/「...%賭け:分類% 일까요」
					DATAFORM 「여기선 직감대로...」/「%賭け:分類% !」
					DATAFORM 「이건 말 그대로 정 아니면 반...」/「제 선택은... %賭け:分類% !」
				ENDDATA
			CASE 2
				STRDATA 台詞
					DATAFORM 「이런 건 분위기와 기세로 정해야지!」/「그러니까, %賭け:分類% !」
					DATAFORM 「...어렴풋이 떠올랐다」/「{RAND(1, 5) * 2 + !分類}라는 숫자가」/「...%賭け:分類% !」
					DATAFORM 「망설이면 후회할거야」/「팟! 하고 떠오른 %賭け:分類%에 걸게!」
				ENDDATA
			CASE 3
				STRDATA 台詞
					DATAFORM 「...번뜩였다」/「여기서 %賭け:分類% ! 절대로 %賭け:分類%야!」
					DATAFORM 「아ー 정말, 생각해봐도 모르겠어」/「역시 %賭け:分類%일까」? %賭け:分類%로 간다!」
					DATAFORM 「...좋아, 결정!」/「여기선, %賭け:分類%이다!」
				ENDDATA
			CASE 4
				DO 
					LOCAL = RAND(1, 7)
				LOOP  LOCAL == 4
				STRDATA 台詞
					DATAFORM （뱀요괴는 %賭け:分類% 쪽으로 열심히 밀어넣고 있다...）
					DATAFORM （뱀요괴는 부지런히 입으로 물고 나르고 있다...）/（잠시 후, %賭け:分類% 쪽으로 티켓이 쌓였다...）
					DATAFORM （뱀요괴는 %BAKUTO_NAME:LOCAL%의 소매를 물고 잡아당기고 있다...）/（%BAKUTO_NAME:LOCAL%가 뱀요괴의 코마를 %賭け:分類% 쪽으로 옮겨주었다...）
				ENDDATA
			CASE 5, 6
				STRDATA 台詞
					DATAFORM 「여기는 %自称:(キャラ - 5)%의 복불복...」/「오는 것은... %賭け:分類% !」
					DATAFORM 「고민해도 소용없어」/「여기선 %賭け:分類%에 건다!」
					DATAFORM 「정? 반? 음, 정말 뭐지??」/「에잇... 오... 에잇...」/「...%賭け:分類% !!」
				ENDDATA
		ENDSELECT
	;共通台詞
	;チンチロリン親子共通ピン・ニゾウ/子負け/丁半博打負け
	CASE "失望"
		RESULTS = %\@ キャラ > 4 ? 怒り # 泣き \@%
		候補 = 우와아.../...엣/거짓말.../...그만둬/응?? 응응응??/에, 에에.../...아차/
		SELECTCASE キャラ
			CASE 1
				候補 = %候補%... 싫어.../아...어라.../...용서해줘/아... 아파.../어, 이거.../나... 지는거야..?
			CASE 2
				候補 = %候補% ...그만해줘/...진짜??/허무하네.../큰일났다.../...아차/...이겼네요, 나의 패배네요
			CASE 3
				候補 = %候補% 어이어이어이.../...앗 위험해/우와... 왔다.../우에.../헉.../우와, 나 져버렸어...
			CASE 4
				STRDATA 台詞
					DATAFORM （뱀요괴는 풀이 죽어 있다...）
					DATAFORM （뱀요괴는 실망하고 있다...）
					DATAFORM （뱀요괴는 슬픈 듯이 주사위를 바라보고 있다...）
					DATAFORM （뱀요괴는 우물쭈물하고 있다...）
				ENDDATA
			CASE 5, 6
				候補 = %候補% 에에?? 왜??/으에... 떨어졌다.../아악!! 젠장!!/아아... 두고보자!!/으아... 최악이야.../아아, %自称:(キャラ - 5)%의 패배다!
		ENDSELECT
		SIF キャラ != 4
			台詞 = 「%TEXTR(候補)%」
	;チンチロリン親子共通ゴケ・ロッポウ/子勝ち/丁半博打勝ち
	CASE "安堵"
		RESULTS = %\@ キャラ > 3 ? 笑顔 # 通常 \@%
		SELECTCASE キャラ
			CASE 1
				候補 = 앗싸!/...이겼어요♪/으흐흐♪/...왔네요!/...아핫♪/꺄악, 기뻐♪/이거, 이거, 이거에요♪/후후후, 보는대로랍니다♪
			CASE 2
				候補 = 아싸!/...나 이겨버렸네♪/ ( ΦωΦ)σ 만세!/해냈어!/...최고!/...딱이야!/이건... 와버렸네♪/산뜻하네♪
			CASE 3
				候補 = ...어? 와버렸나♪/...이겼다 이겼다♪/헤헷/이거이거이거♪/야호!!/좋았어!/좋아요♪/잔뜩 벌었다♪
			CASE 4
				STRDATA 台詞
					DATAFORM （뱀요괴는 벌떡 일어났다..!?）
					DATAFORM （뱀요괴는 즐거운 듯이 몸을 흔들고 있다...）
					DATAFORM （뱀요괴는 자리를 빙빙 기어다니고 있다...）
					DATAFORM （뱀요괴는 만면에 미소를 짓고 있다..?）/（의외로 표정근육이 발달했을지도...）
				ENDDATA
			CASE 5, 6
				候補 = 어라... 왔다♪/좋아, 좋아좋아좋아♪/해냈어♪/이겼다 이겼어♪/얏호!/받았어요♪/보시는대로♪/좋아, %自称:(キャラ - 5)%의 완전승리♪
		ENDSELECT
		SIF キャラ != 4
			台詞 = 「%TEXTR(候補)%」
ENDSELECT
IF STRFIND(台詞, "＠") > -1
	VARSET LOCALS
	SPLIT 台詞, "＠", LOCALS
	台詞 = %LOCALS:0%
	RESULTS = %LOCALS:1%
ENDIF
RETURNF 台詞

;ツボ振りの呟きを表示する関数
@TOBA_DEALER_TWEET(L_FEED, 状況, NUM_A, NUM_B, SUB = 0)
;L_FEED：表示分類 BIT0 ONでウエイトあり BIT1 ONでCLEARLINE BIT2 ONで必ず表示
#DIM NUM_A
#DIM NUM_B
#DIM SUB
#DIM L_FEED
#DIM EFFECT
#DIM L_COUNT
#DIMS エフェクト = "", "顔絵_ざわ", "顔絵_ぐにゃあ"
#DIMS 状況
#DIMS 表情
#DIMS MESSAGE
#DIMS MESSAGE_PRINT, 50
#DIMS RESOURCE
EFFECT = 0
MESSAGE = %DEALER_TALK_STRINGS(状況, NUM_A, NUM_B, SUB)%
SIF MESSAGE == ""
	RETURN 0
表情 = %RESULTS%
LOCAL = LINECOUNT
;表示部分は@SP_TALKのカスタム
IF !顔絵付きメッセージ || STRFIND(状況, "煽り") > -1
	SIF FLAG:구상색
		SETCOLOR 0xD37CD0
	SPLIT MESSAGE, "/", MESSAGE_PRINT
	FOR L_COUNT, 0, RESULT
		PRINTFORML %MESSAGE_PRINT:L_COUNT%
	NEXT
	RESETCOLOR
	SIF GETBIT(L_FEED, 0)
		WAIT
ELSE
	キャラ画像表示サイズ比 = 100
	VARSET MESSAGE_PRINT
	SIF FLAG:멀티사이즈
		デフォルトキャラ画像横幅 = 180
	RESOURCE = %\@ 状況 == "勝負！" ? SAI_RESULT # 顔絵_はだけ_%表情%_MOB_95 \@%
	CALL 画像セット(RESOURCE, 0, 0, キャラ画像表示サイズ比, 0)
	SIF EFFECT
		CALL 画像セット(エフェクト:EFFECT, 0, 0, キャラ画像表示サイズ比, 1)
	MESSAGE = %SPTALK整形(MESSAGE)%
	SPLIT MESSAGE, "/", MESSAGE_PRINT
	FOR L_COUNT, 0, RESULT
		SIF L_COUNT != 0 || EFFECT
			CALL ダミーセット(0, 0, キャラ画像表示サイズ比, L_COUNT)
		TEMP_HTML:L_COUNT += @"<font color='#0xD37CD0'>%MESSAGE_PRINT:L_COUNT%</font>"
	NEXT
	CALL 画像一斉表示(0, 0, 1, -1)
	IF GETBIT(L_FEED, 0)
		PRINTW 
	ELSE
		PRINTL
	ENDIF
ENDIF
SIF GETBIT(L_FEED, 1)
	CLEARLINE LINECOUNT - LOCAL
RETURN 1

;ツボ振りの呟きと表情を決める式中関数
@DEALER_TALK_STRINGS(状況, NUM_A, NUM_B, SUB)
#FUNCTIONS
#DIM NUM_A
#DIM NUM_B
#DIM BIAS
#DIM SUB
#DIM POS
#DIM 初回
#DIMS 賭け = "정", "반"
#DIMS 状況
#DIMS 台詞
#DIMS 候補
#DIMS 呼称
呼称 = %\@ TALENT:MASTER:성별 == 2 ? 형씨 # 누님 \@%
POS = NUM_A - NUM_B
RESULTS = 通常
台詞 = 
SELECTCASE 状況
	;チンチロリン台詞
	;ツボ振り挨拶
	CASE "挨拶"
		STRDATA 台詞
			DATAFORM 「그럭저럭 다들 모인 것 같으니...」/「%BAKUTO_NAME:5%랑 %BAKUTO_NAME:6%의 언니들, \@ 初回 == DAY ? 또 와준거야? # 여긴 처음이야?」/「오늘은 제대로 \@ 즐기다가 가줘~」
			DATAFORM 「슬슬 괜찮을까?」/「미리 말해두지만, 이겨도 져도 원망하기 없기다!」/「즐겁게 즐기는게 제일이니까」
		ENDDATA
		初回 = DAY
	;ツボ振り直前
	CASE "スタート口上"
		SELECTCASE SUB
			CASE 0
				STRDATA 候補
					DATAFORM 「그럼 그렇게지!」
					DATAFORM 「좋은걸, 나도 기대되는데」
					DATAFORM 「%呼称%라면 신경 안 쓰고 있다고 믿고 있었어」
				ENDDATA
				台詞 = %候補%/「자, 시작할게?」
			CASE 1
				候補 = %TEXTR(@"「...뭐, 인사는 이 정도로 하고」/「...뭐, 더 말할 필요는 없을것 같네」/「...자, 모두 환영합니다」")%
				台詞 = %候補%/「빨리 즐겨보자고」
			CASEELSE
				STRDATA 台詞
					DATAFORM 「자, %\@ RAND:2 ? 짱, # \@% 가자!」
					DATAFORM 「그래, %\@ RAND:2 ? 도박은 # 승부는 \@% 지금부터니까!」
					DATAFORM 「좋아, 다들 컨디션 괜찮지?」
					DATAFORM 「자, 한판 더 하자」
					DATAFORM 「자, 계속 가볼까!」
					DATAFORM 「자, 다음 승부!」
					DATAFORM 「사양하지 말고 다들 승부!」
					DATAFORM 「손님들, 얼마든지 어울려 주겠다고!」
					DATAFORM 「어서어서, 다들 괜찮지?」
				ENDDATA
		ENDSELECT
	CASE "構え口上"
		STRDATA 台詞
			DATAFORM 「자, 그러면... 」
			DATAFORM 「%CH_PRIZE:NUM_A:NUM_B%부터 시작할게」
			DATAFORM 「%CH_PRIZE:NUM_A:NUM_B%, 쓸게요」
			DATAFORM 「시작합니다」
		ENDDATA
	;ツボかぶり
	CASE "被り口上"
		RESULTS =  賽振り
		台詞 = 「자%\@ SUB ? 、한번에 간다 # ! 어느쪽일까 \@%!」
	;丁半選択時合いの手
	;NUM_A=丁選択人数 NUM_B=半選択人数 SUB=張り方 0=丁 1=半
	CASE "煽り"
		BIAS = ((POS > 0 && !SUB) || (POS < 0 && SUB))
		IF ABS(POS) > 2 && BIAS
			台詞 = 「흐음!? %\@ ABS(POS) > 3 ? 아직도 # \@% %賭け:SUB%!?」/
		ELSE
			台詞 = 「%賭け:SUB% 들어왔어, %賭け:SUB%!」/
		ENDIF
		SELECTCASE ABS(POS)
			CASE 0
				STRDATA 候補
					DATAFORM 「정일까, 반일까, 어느쪽일까?」
					DATAFORM 「걸어봐! 걸어봐!」/「%賭け:(!SUB)% 없어? %賭け:SUB% 없어?」
					DATAFORM 「자자 %賭け:(!SUB)%없을까? %賭け:(!SUB)% 없을까?」
					DATAFORM 「걸어라 걸어!!! 계속 걸어봐!」
				ENDDATA
			CASE 1, 2
				STRDATA 候補
					DATAFORM 「자 %賭け:(POS > 0)% 없어? %賭け:(!SUB)% 없어?」
					DATAFORM 「걸었다! 걸었다! %賭け:(POS > 0)%없어?」/「자 정반, 둘 다 걸어봐!」
					DATAFORM 「자자, 걸어봐! 자, %賭け:(!SUB)% 걸어봐!」
					DATAFORM 「걸어라 걸어!!!」/「자자, %賭け:(POS > 0)% 없어? %賭け:(!SUB)% 없어?」
				ENDDATA
			CASE 3, 4, 5
				STRDATA 候補
					DATAFORM 「%賭け:(POS > 0)% 없어?%賭け:(POS > 0)% !」/「%賭け:(POS > 0)% 지금 비어있다고!」
					DATAFORM 「어이, 이번에는 %賭け:(POS > 0)% %\@ BIAS ? 은 아닌걸까 # 겨우 모였네 \@%!」/「자, %賭け:(POS > 0)% 없어? %賭け:(POS > 0)%!」
					DATAFORM 「뭐야 뭐야, %賭け:(POS > 0)% %\@ BIAS ? 인기 없네 # 겨우 모였네 \@%!」/「자 %賭け:(POS > 0)% 없나요? %賭け:(POS > 0)% 팍팍 걸어줘!」
					DATAFORM 「잠깐 잠깐! %賭け:(POS > 0)% 쪽에 티켓 부족하다고?」/「어서어서 %\@ BIAS ? 모두 같으면 재미없어~ # %賭け:(POS > 0)%에 걸어봐 \@%!」/「%賭け:(POS > 0)% 없어?」
				ENDDATA
			CASE 6
				RESULTS = 怒り
				STRDATA 候補
					DATAFORM 「뭐야뭐야, 뭐가 일어나고 있는 거야！」/「손님들, 뭔가 짜고 치는 거야?」
					DATAFORM 「어이어이, 뭐가 안타까운 상황이 벌어진 것 같네」/「이런 도박은 어떤가 싶지 않아?」
					DATAFORM 「잠깐만! 좀 봐달라고!」/「이건 너무 몰린거 아냐!?」
				ENDDATA
		ENDSELECT
		台詞 = %台詞%%候補%
	;ツボを開く直前
	CASE "予想終了"
		;サシ勝負
		IF SUB
			台詞 = 「%賭け:NUM_A%%TEXTR("로 확실하지?/, 확실히 확인했어/...아무래도 정해진 것 같네")%」
			STRDATA 候補
				DATAFORM 「%呼称%와 나 누가 이길까」/「...승부!!」
				DATAFORM 「그래, 그렇게 나왔구나...」/「자, 승부!」
				DATAFORM 「%呼称%, 정말로 결단력이 좋네」/「자, 승부!」
			ENDDATA
			台詞 = %台詞%/%候補%
		;通常
		ELSEIF ABS(POS) < 7
			台詞 = 「그럼 판돈도 모였으니...」/「...승부!」
		;全員同じ張り方
		ELSE
			RESULTS = 怒り
			{
			台詞 = 「아... 이렇게 되면 어쩔 수 없네」/
					「어쩔 수 없이, 이쪽에서 %賭け:(POS > 0)% 거는 걸로」/
					「그.치.만, 수수료는 확실하게 빼뒀으니까」/
					「이기더라도 크게 벌 수는 없지만, 거기까지는 포기해줘!」
			}
		ENDIF
	;賽の目表示
	CASE "勝負！"
		台詞 = 「%CH_PRIZE:NUM_A:NUM_B%!!」
		SIF RAND:2
			台詞 = %台詞%/「%\@ !SUB ? 정 # 반 \@%이다!」
	CASE "継続口上"
		IF NUM_A
			STRDATA 候補
				DATAFORM 「%呼称%(은)는 한번 이겼다고 그만두는건 아니지?」
				DATAFORM 「%呼称%, %\@ NUM_B ? 지금부터 # 여기서부터 \@% 시작인 것 같지 않아?」
				DATAFORM 「%呼称%, %\@ NUM_B ? 컨디션이 좋아졌네 # 컨디션은 나쁘지 않은 것 같네 \@%」
			ENDDATA
		ELSE
			STRDATA 候補
				DATAFORM 「%呼称%도 여기서 끝내버리면 기분 별로지?」
				DATAFORM 「%呼称% %呼称%, 이제는 되갚아줄 차례라고 생각하지 않아?」
				DATAFORM 「다음에는 이긴다!」/「이런 박력과 기개가 중요한 거야」
			ENDDATA
		ENDIF
		台詞 = %候補%/「%TEXTR("당연히 계속 할거지/계속 진행해볼까/자... 한판 더 어때")%?」
	;サシ勝負持ちかけ
	CASE "サシ持ちかけ"
		STRDATA 候補
			DATAFORM 「%呼称%%呼称%, 한번 따니까 기분 좋지?」
			DATAFORM 「이야 %呼称%, 잔뜩 벌었네!」
			DATAFORM 「어머 %呼称%, 대단하네」
		ENDDATA
		台詞 = %候補%/「어때, 이긴 만큼 또 승부하지 않을래?」/「이기면 배로, 지면 전부 잃는거지」
		STRDATA 候補
			DATAFORM 「운부천부(運否天賦), 알기 쉽지?」
			DATAFORM 「즐거운 도박을 할 수 있겠지?」
			DATAFORM 「봐봐, 대박의 냄새 나지 않아?」
		ENDDATA
		台詞 = %台詞%/%候補%
	;	ハハ
	;（ ﾟωﾟ ）お断りします
	CASE "サシお断り"
		RESULTS = 泣き
		候補 = 「%TEXTR("안타깝네.../이런... 사고네 사고/아이고, 당해버렸네")%」
		STRDATA 台詞
			DATAFORM 「뭐, 어쩔 수 없지」
			DATAFORM 「어쩔 수 없네, 다음에 또 기대할게」
			DATAFORM 「여자의 권유를 거절하다니, 안 되지 %呼称%」
		ENDDATA
		台詞 = %候補%/%台詞%
	;サシ勝負あなたの勝ち
	CASE "サシで負け"
		SELECTCASE RAND:4
			CASE 0, 1
				STRDATA 台詞
					DATAFORM 「아이구, 졌네 졌어」/「%呼称%한테는 거의 안 지는데」
					DATAFORM 「축하해~」/「네가 이겼어」/「자, 가져가」
					DATAFORM 「하하, 아이구, %呼称% 너무 강하네」/「이긴 만큼 나도 한잔 사달라고」
				ENDDATA
			CASE 2, 3
				RESULTS = 泣き
				STRDATA 台詞
					DATAFORM 「...오우」/「당해버렸네」
					DATAFORM 「아하하...」/「이런, 내 돈도 더 벌고 싶었는데...」
					DATAFORM 「아야야...」/「나도 용돈 늘리고 싶었는데...」
				ENDDATA
			CASE 4
				RESULTS = 怒り
				STRDATA 台詞
					DATAFORM 「...치」/「실수했어」
					DATAFORM 「...젠장」/「손이 엉망이 돼버렸네...」
				ENDDATA
		ENDSELECT
	;サシ勝負あなたの負け
	CASE "サシで勝ち"
		STRDATA 台詞
			DATAFORM 「이야- 미안해」/「그래도 승부는 승부, 사양하지 않고 받아갈게」
			DATAFORM 「좋아!」/「...여기서 이긴 만큼은 내 용돈이 되는 거야」/「그런만큼 기합도 더 들어간다는 거지」
			DATAFORM 「아쉬웠네」/「이건 내가 가져갈게」
			DATAFORM 「유감, %呼称%도 운이 별로 없었나봐」
			DATAFORM 「아하하, 잃었네」
			DATAFORM 「우하하, 벌었다」/「이제 고가의 맛있는 술을 마실 수 있겠어♪」
		ENDDATA
ENDSELECT
RETURNF 台詞

;ダイス画像を一個一個丁寧に手作りする関数
;標準でダイス３個、ARGが真ならダイス２個の画像をセット
;ARG == 2なら丁半用背景画像をセット
@TOBA_CREATE_DICEIMAGE(DICE:0, DICE:1 = 0, DICE:2 = 0, ARG = 0)
#DIM DICE,3
#DIM GID
#DIM L_COUNT
#DIM POS_X, 3 = 14, 67, 114
#DIM POS_Y, 3 = 109, 125, 91
#DIM RAND_X
#DIM RAND_Y
IF GID
	SPRITEDISPOSE "SAI_RESULT"
	GDISPOSE GID
ENDIF
GID= 0
CALL 画像合成(GID, @"%\@ ARG == 2 ? CH_BASE # ダミー \@%")
FOR L_COUNT, 0, 3
	SIF L_COUNT == 1 && ARG
		CONTINUE
	;表示位置にばらつきを持たせる
	RAND_X = ARG == 2 ? RAND(1, 16) - 9 # RAND(1, 7) - 4 
	RAND_Y = ARG == 2 ? RAND(1, 16) - 9 # RAND(1, 7) - 4
	CALL 画像合成(GID, @"D_SURF_{DICE:L_COUNT}", POS_X:L_COUNT + RAND_X, POS_Y:L_COUNT + RAND_Y, 46, 55)
NEXT
SPRITECREATE "SAI_RESULT", GID
RETURN

;コマ札変動を表示位置揃えて表示する関数
@TOBA_RESULT_PRINT(TGT, BP, ARG = 0)
#DIM BP
#DIM NUM
#DIM TGT
#DIM COLOR
#DIMS STRINGS
COLOR = BP > 0 ? C_GREEN # C_D_RED
STRINGS = %BAKUTO_NAME:TGT%의 코마후다%\@ BP > 0 ? 에 # 에서 \@%
NUM = (5 + ARG) - STRLENSU(BAKUTO_NAME:TGT)
STRINGS = %STRINGS%%UNICODE(0x3000) * NUM%
PRINTFORM %STRINGS%
CALL COLORMESSAGE(@"%\@ BP > 0 ? ＋ # － \@%{ABS(BP)}장", COLOR, 1, 1)
RETURN

;持ちゴマと遊戯回数を表示する関数
@PRINT_TOBA_STATE(回数, レート, ウエイト)
#DIM 回数
#DIM レート
#DIM ウエイト
#DIM レート色 = C_AQUA, C_WHITE, C_YELLOW, C_D_PINK
#DIMS レート表示 = "낮음", "평균", "높음", "쓰레기"
DRAWLINE
PRINTFORML ~%TOKANJIT(回数)%회전~　　　　　　현재시각:%시각표시(TIME)% 
PRINTFORML 
SIF ウエイト
	TWAIT 750, 0
PRINTFORML 보유 코마후다　　　　　%세자리구분(KOMAFUDA:MASTER)%장
PRINTFORM 현재 판돈:
CALL COLORMESSAGE(レート表示:レート, レート色:レート, 1, 1)
PRINTFORML 
RETURN

;配列を{ARG}個のダイス目で埋める参照関数
@TOBA_FILL_DICE(ダイス目, ARG)
#DIM REF ダイス目, 0
#DIM L_COUNT
FOR L_COUNT, 0, ARG
	ダイス目:L_COUNT = RAND(1, 7)
NEXT
RETURN

;賭場セッティング関数
@TOBA_SETUP
#DIM 設定済
#DIM 代入済
#DIM L_COUNT
#DIM KOMA
#DIMS 種族, 2
#DIMS 呼び名
;一日一回所持金確認,モブ子博徒定義
SIF 設定済 == DAY
	RETURN
設定済 = DAY
;NPC持ちゴマはあなた所持金の４割に設定
;パッチ取り込まれたらもう少しきちんと処理したい
KOMA = MONEY / 1000 * 4
KOMA = MAX(KOMA, 500) 
VARSET KOMAFUDA, KOMA, 1, 7

VARSET 種族
FOR L_COUNT, 0, 2
	DO
		種族:L_COUNT = %TEXTR("이나바/요정/백랑텐구/오니/둔갑너구리/둔갑고양이/둔갑여우/너구리요괴/판매원")%
	LOOP 種族:0 == 種族:1
	CALL モブ店員画像作成(25 + L_COUNT, 種族:L_COUNT)
	BAKUTO_WORDCOLOR:(5 + L_COUNT) = モブ子店員口上色:(25 + L_COUNT)
	BAKUTO_NAME:(5 + L_COUNT) '= 種族:L_COUNT
NEXT
FOR L_COUNT, 0, 2
	SIF BAKUTO_NAME:(5 + L_COUNT) == "너구리요괴"
		BAKUTO_NAME:(5 + L_COUNT) = 子分狸
NEXT
;ゲーム中に１回ニ次元配列変数を定義
SIF 代入済
	RETURN
代入済 = 1
;丁半博打出目の呼称定義
CH_PRIZE:1:0 '= "", "핀조로의 정", "이치니의 반", "삼미치의 정", "요이치의 반", "구이치의 정", "이치로쿠의 반"
CH_PRIZE:2:0 '= "", "이치니의 반", "니조로의 정", "사니의 반", "시니의 정", "구니의 반", "니로쿠의 정"
CH_PRIZE:3:0 '= "", "삼미치의 정", "사니의 반", "삼조로의 정", "시소우의 반", "구산의 반", "사부로쿠의 반"
CH_PRIZE:4:0 '= "", "요이치의 반", "시니의 반", "시소우의 반", "시조로의 정", "구시의 반", "시로쿠의 정"
CH_PRIZE:5:0 '= "", "구이치의 반", "구니의 반", "구산의 정", "구시의 반", "고조로의 정", "고로쿠의 반"
CH_PRIZE:6:0 '= "", "이치로쿠의 반", "니로쿠의 정", "사부로쿠의 반", "시로쿠의 정", "고로쿠의 반", "로쿠조로의 정"
;回り胴順番の定義：第一引数 0=あなた 1=山童 2=河童 3=鴉天狗 4=蟒蛇が親、第二引数 FOR構文ループカウント
TOBA_ROTATE:0:0 = 1, 2, 3, 4
TOBA_ROTATE:1:0 = 2, 3, 4, 0
TOBA_ROTATE:2:0 = 3, 4, 0, 1
TOBA_ROTATE:3:0 = 4, 0, 1, 2
TOBA_ROTATE:4:0 = 0, 1, 2, 3
RETURN
