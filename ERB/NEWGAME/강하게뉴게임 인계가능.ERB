@BITE_THE_DUST_CLEAR_LEGECY
#DIM 번호대피소
#DIM CHARANUM대피소
VARSET JUEL
VARSET MOBGIRL_PLACE, 99
CALL BITE_THE_DUST_CLEAR_FLAG
;대본 리셋
VARSET ITEM, 0, 101, 110
CFLAG:MASTER:초대 = 0
CFLAG:MASTER:육아인원수 = 0
CFLAG:MASTER:아이인원수 = 0
;당신의 기정사실 및[연인]을 클리어
CLEARBIT CFLAG:MASTER:기정사실, 2
TALENT:MASTER:연인 = 0
;당신 이외 전원 리셋.
;여기서 CHARANUM의 값이 바뀌므로 주의
TARGET = 0
ASSI = 0
VARSET MOBGIRL_PLACE, 99
VARSET 인계대상정보
VARSET 인계대상TALENT
VARSET 인계대상CFLAG
VARSET 인계대상CFLAG1
VARSET 인계대상CFLAG2
VARSET 인계CSTR
;PICKUPCHARA MASTER
CHARANUM대피소 = CHARANUM
FOR LOCAL,1,CHARANUM
	IF LOCAL > CHARANUM대피소
		BREAK
	ENDIF
	IF LOCAL == MASTER
		BREAK
	ENDIF
	IF 인계대상:(CHARANUM대피소 - LOCAL) == 1
		PRINTFORML %CALLNAME:(CHARANUM대피소 - LOCAL)%은 생존했다
		FOR LOCAL:1,0,100
			인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):0:(LOCAL:1) = ABL:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
		NEXT
		FOR LOCAL:1,0,3333
			인계대상CFLAG:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = CFLAG:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
			인계대상CFLAG1:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = CFLAG:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1 + 3333)
			인계대상CFLAG2:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = CFLAG:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1 + 6666)
		NEXT
		FOR LOCAL:1,0,51
			인계CSTR:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = %CSTR:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)%
		NEXT
		FOR LOCAL:1,0,100
			인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):1:(LOCAL:1) = BASE:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
		NEXT
		FOR LOCAL:1,0,200
			인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):2:(LOCAL:1) = EXP:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
		NEXT
		FOR LOCAL:1,0,100
			인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):3:(LOCAL:1) = MARK:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
		NEXT
		FOR LOCAL:1,0,2500
			인계대상TALENT:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = TALENT:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
		NEXT
		FOR LOCAL:1,0,1000
			인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):4:(LOCAL:1) = TCVAR:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
		NEXT
	ELSE
		PRINTFORM %CALLNAME:(CHARANUM대피소 - LOCAL)%은 폭발했다
	ENDIF
		번호대피소 = GETCHARA (CHARANUM대피소 - LOCAL)
		PRINTFORML {번호대피소}번
		DELCHARA (번호대피소)
NEXT
DRAWLINE
FOR LOCAL,1,CHARANUM대피소
	ADDCHARA LOCAL
	;PRINTFORML %CALLNAME:LOCAL%은 부활했다
	FOR LOCAL:1,0,100
		ABL:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = 인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):0:(LOCAL:1)
	NEXT
	FOR LOCAL:1,0,3333
		CFLAG:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = 인계대상CFLAG:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
		CFLAG:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1+3333) = 인계대상CFLAG1:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
		CFLAG:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1+6666) = 인계대상CFLAG2:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
	NEXT
	FOR LOCAL:1,0,51
		CSTR:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = %인계CSTR:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)%
	NEXT
	FOR LOCAL:1,0,100
		BASE:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = 인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):1:(LOCAL:1)
	NEXT
	FOR LOCAL:1,0,200
		EXP:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = 인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):2:(LOCAL:1)
	NEXT
	FOR LOCAL:1,0,100
		MARK:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = 인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):3:(LOCAL:1)
	NEXT
	FOR LOCAL:1,0,2500
		TALENT:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = 인계대상TALENT:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1)
	NEXT
	FOR LOCAL:1,0,1000
		TCVAR:(인계대상:(CHARANUM대피소 - LOCAL)):(LOCAL:1) = 인계대상정보:(인계대상:(CHARANUM대피소 - LOCAL)):4:(LOCAL:1)
	NEXT
	RESULT = 0
	TRYCALLFORM M_KOJO_K{LOCAL}
	IF RESULT
		CFLAG:LOCAL:대사실장상황 = 1
	ELSE
		CFLAG:LOCAL:대사실장상황 = 0
	ENDIF
NEXT
SORTCHARA
VARSET JUEL
;당신リセット
PRINTFORML %CALLNAME:MASTER%의 경험·능력도 리셋하겠습니까?
CALL COLORMESSAGE(@"실적으로 취득한 소질 등도 취소되기 때문에 추천하지 않습니다", C_YELLOW,1)
CALL ASK_YN
IF !RESULT
	FOR LOCAL,0, 100
		ABL:MASTER:LOCAL = 0
		EXP:MASTER:LOCAL = 0
	NEXT
	FOR LOCAL,100, 150
		EXP:MASTER:LOCAL = 0
	NEXT
	PRINTFORMW 리셋 했습니다.
ENDIF