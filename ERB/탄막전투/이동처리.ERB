
;실제로 캐릭터를 이동시키는 함수
@TB_캐릭이동(캐릭터,이동값)
#DIM DYNAMIC 캐릭터
#DIM DYNAMIC 이동값

T_위치:캐릭터:0 += 이동값
IF T_위치:캐릭터:0 >= TB_위치값한계
    이동값 -= T_위치:캐릭터:0 - TB_위치값한계
    T_위치:캐릭터:0 = TB_위치값한계
ELSEIF T_위치:캐릭터:0 <= 0
    이동값 += 0 - T_위치:캐릭터:0
    T_위치:캐릭터:0 = 0
ENDIF
RETURN 이동값

;특정 좌표로 순간 이동 시킴
@TB_순간이동(캐릭터,좌표)
#DIM DYNAMIC 캐릭터
#DIM DYNAMIC 좌표

T_위치:캐릭터:0 = 좌표
IF T_위치:캐릭터:0 >= TB_위치값한계
    이동값 -= T_위치:캐릭터:0 - TB_위치값한계
    T_위치:캐릭터:0 = TB_위치값한계
ELSEIF T_위치:캐릭터:0 <= 0
    이동값 += 0 - T_위치:캐릭터:0
    T_위치:캐릭터:0 = 0
ENDIF
RETURN 이동값

;대상간의 거리, 혹은 대상과 지점간의 거리를 측정
@TB_거리(대상 = 0,좌표 = 0)
#FUNCTION
#DIM DYNAMIC 대상
#DIM DYNAMIC 좌표

IF 대상 && 좌표
    RETURNF ABS(T_위치:대상:0 - 좌표)
ELSE
    RETURNF ABS(T_위치:T_대상1:0 - T_위치:T_대상2:0)
ENDIF


;이동력을 바탕으로 이동거리를 계산해서 이동함
@T_MOVE(캐릭터,방향,거리 = 0)
#DIM DYNAMIC 캐릭터
#DIM DYNAMIC 방향
#DIM DYNAMIC 거리
CALL 행동기회소모(캐릭터,T_이동행동)
IF !거리
    거리 = ARG능력치(캐릭터,"이동력")
ENDIF
IF 방향 == 1
    CALL TB_캐릭이동(캐릭터,MIN(방향*ARG능력치(캐릭터,"이동력"), 방향*거리))
    PRINTFORML %조사처리(CALLNAME:캐릭터,"가")% 오른쪽으로 {RESULT}m움직였다!
ELSE
    CALL TB_캐릭이동(캐릭터,MAX(방향*ARG능력치(캐릭터,"이동력"), 방향*거리))
    PRINTFORML %조사처리(CALLNAME:캐릭터,"가")% 왼쪽으로 {ABS(RESULT)}m움직였다!
ENDIF